<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>NiCMidi: GUI Notifiers</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">NiCMidi
   &#160;<span id="projectnumber">1.0</span>
   </div>
   <div id="projectbrief">A MIDI library derived from J.D.Koftinoff jdksmidi</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('_n_o_t_i_f_i_e_r_s.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">GUI Notifiers </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Notifiers are helper objects very useful in graphics interfaces.</p>
<p>If you want to implement your GUI interacting with the library classes you will probably want it to be responsive: if, while playing a MIDI song, a parameter (tempo, time signature, a track program) changes the GUI should immediately show it. So the library implements notifiers, i.e. objects which communicates between the sequencer classes and the GUI,sending real time messages when something happens in the sequencer.</p>
<h2>The MIDISequencerGUIEvent class </h2>
<p>The <a class="el" href="class_m_i_d_i_sequencer_g_u_i_event.html" title="Holds data for a message that the sequencer can send to the GUI to warn it when something happens.">MIDISequencerGUIEvent</a> packs into a single unsigned long data that represents a GUI event, i.e. "something that is happened in the sequencer". Events have three attributes: group, subgroup and item, according to the following table: </p><table class="doxtable">
<tr>
<th><b>Group</b> </th><th><b>Subgroup</b> </th><th><b>Item</b> </th><th><b>Meaning</b>  </th></tr>
<tr>
<td><b>GROUP_ALL</b> </td><td>Not used </td><td>GROUP_ALL_ALL </td><td>General refresh of the GUI (for example when a file is loaded or when you jump from a time to another)  </td></tr>
<tr>
<td rowspan="6"><b>GROUP_CONDUCTOR</b> </td><td rowspan="6">Not used </td></tr>
<tr>
<td>GROUP_CONDUCTOR_TEMPO </td><td>A tempo change  </td></tr>
<tr>
<td>GROUP_CONDUCTOR_TIMESIG </td><td>A time signature change  </td></tr>
<tr>
<td>GROUP_CONDUCTOR_KEYSIG </td><td>A key signature change  </td></tr>
<tr>
<td>GROUP_CONDUCTOR_MARKER </td><td>A text marker  </td></tr>
<tr>
<td>GROUP_CONDUCTOR_USER </td><td>User defined conductor event    </td></tr>
<tr>
<td rowspan="6"><b>GROUP_TRANSPORT</b> </td><td rowspan="6">Not used </td></tr>
<tr>
<td>GROUP_TRANSPORT_START </td><td>Start of the sequencer  </td></tr>
<tr>
<td>GROUP_TRANSPORT_STOP </td><td>Stop of the sequencer  </td></tr>
<tr>
<td>GROUP_TRANSPORT_MEASURE </td><td>New measure  </td></tr>
<tr>
<td>GROUP_TRANSPORT_BEAT </td><td>New metronome beat  </td></tr>
<tr>
<td>GROUP_TRANSPORT_USER </td><td>User defined transport event    </td></tr>
<tr>
<td rowspan="9"><b>GROUP_TRACK</b> </td><td rowspan="9">The track number </td></tr>
<tr>
<td>GROUP_TRACK_NAME </td><td>Track name text event  </td></tr>
<tr>
<td>GROUP_TRACK_PROGRAM </td><td>Program change  </td></tr>
<tr>
<td>GROUP_TRACK_NOTE </td><td>Note  </td></tr>
<tr>
<td>GROUP_TRACK_VOLUME </td><td>Volume control change  </td></tr>
<tr>
<td>GROUP_TRACK_PAN </td><td>Pan control change  </td></tr>
<tr>
<td>GROUP_TRACK_CHR </td><td>Chorus control change  </td></tr>
<tr>
<td>GROUP_TRACK_REV </td><td>Reverb control change  </td></tr>
<tr>
<td>GROUP_TRACK_USER </td><td>User defined track event  </td></tr>
<tr>
<td><b>GROUP_USER</b> </td><td>Not used </td><td>GROUP_USER_USER </td><td>User defined user event  </td></tr>
</table>
<p>The GROUP_TRACK has a subgroup which represents the track number in which the event is happened (while other groups don't use the subgroup). The various item attributes have USER values that you can use for your own purposes (and can be extended with, for example, GROUP_CONDUCTOR_USER + 1, GROUP_CONDUCTOR_USER + 2, etc.).</p>
<p>When the GUI receives a message, it can examine it and know what is happened; messages do not contain the values of the changed parameters, but these can be asked to the sequencer by its get methods, allowing therefore to refresh the GUI.</p>
<h2>The MIDISequencerGuINotifier class </h2>
<p>The <a class="el" href="class_m_i_d_i_sequencer_g_u_i_notifier.html" title="A pure virtual class implementing a device that can send MIDISequencerGUIEvent messages to a GUI.">MIDISequencerGUINotifier</a> is an abstract class which has a pure virtual method <a class="el" href="class_m_i_d_i_sequencer_g_u_i_notifier.html#a129cbe924b9f7bf89da5e5ebfa421323" title="Notifies the MIDISequencerGUIEvent ev.">MIDISequencerGUINotifier::Notify()</a>: this takes as parameter a <a class="el" href="class_m_i_d_i_sequencer_g_u_i_event.html" title="Holds data for a message that the sequencer can send to the GUI to warn it when something happens.">MIDISequencerGUIEvent</a> and sends it to the GUI. The class is abstract because the effective sending depends by the OS (in a GUI it is typically a communication between separate processes or windows). The library implements two working subclasses of the base class: the <a class="el" href="class_m_i_d_i_sequencer_g_u_i_notifier_text.html" title="A MIDISequencerGUINotifier which sends text messages to a std::ostream (std::cout as default).">MIDISequencerGUINotifierText</a> which prints readable messages to a std::ostream and the <a class="el" href="class_m_i_d_i_sequencer_g_u_i_notifier_win32.html" title="A MIDISequencerGUINotifier which sends messages to a Win32 window using the Windows PostMessage() fun...">MIDISequencerGUINotifierWin32</a> for MS Windows: this communicates with a window by mean of the Windows API PostMessage() function.</p>
<p>When you want to use a notifier together with a sequencer you must first create the notifier and then pass its pointer as a parameter in the sequencer constructor (see <a class="el" href="class_m_i_d_i_sequencer.html#ae02e785294fbd634682b04310c0fd904" title="The constructor.">MIDISequencer::MIDISequencer</a> and <a class="el" href="class_advanced_sequencer.html#a023c3cd293f57406623a76a41ce90177" title="Creates an AdvancedSequencer with 17 tracks (one for each channel plus the master track).">AdvancedSequencer::AdvancedSequencer</a>). For example:</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="notifier_8h.html">notifier.h</a>&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="advancedsequencer_8h.html">advancedsequencer.h</a>&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="timer_8h.html">timer.h</a>&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> main() {</div>
<div class="line">   <a class="code" href="class_m_i_d_i_sequencer_g_u_i_notifier_text.html">MIDISequencerGUINotifierText</a> notifier;</div>
<div class="line">   <a class="code" href="class_advanced_sequencer.html">AdvancedSequencer</a> sequencer(&amp;notifier);</div>
<div class="line">   seq.Load(<span class="stringliteral">&quot;twinlkle.mid&quot;</span>);</div>
<div class="line">   seq.Play();</div>
<div class="line">   <span class="keywordflow">while</span> (seq.IsPlaying())</div>
<div class="line">      <a class="code" href="class_m_i_d_i_timer.html#adbf80f5b6708bf6f84b3d354aa006bae">MIDITimer::Wait</a>(10);</div>
<div class="line">}</div>
<div class="ttc" id="aadvancedsequencer_8h_html"><div class="ttname"><a href="advancedsequencer_8h.html">advancedsequencer.h</a></div><div class="ttdoc">Contains the definition of the classes MIDISequencerTrackProcessor and AdvancedSequencer.</div></div>
<div class="ttc" id="aclass_advanced_sequencer_html"><div class="ttname"><a href="class_advanced_sequencer.html">AdvancedSequencer</a></div><div class="ttdoc">An enhanced MIDISequencer, able to directly load and play MIDI files and many more.</div><div class="ttdef"><b>Definition:</b> advancedsequencer.h:93</div></div>
<div class="ttc" id="aclass_m_i_d_i_sequencer_g_u_i_notifier_text_html"><div class="ttname"><a href="class_m_i_d_i_sequencer_g_u_i_notifier_text.html">MIDISequencerGUINotifierText</a></div><div class="ttdoc">A MIDISequencerGUINotifier which sends text messages to a std::ostream (std::cout as default).</div><div class="ttdef"><b>Definition:</b> notifier.h:179</div></div>
<div class="ttc" id="aclass_m_i_d_i_timer_html_adbf80f5b6708bf6f84b3d354aa006bae"><div class="ttname"><a href="class_m_i_d_i_timer.html#adbf80f5b6708bf6f84b3d354aa006bae">MIDITimer::Wait</a></div><div class="ttdeci">static void Wait(unsigned int msecs)</div><div class="ttdoc">Stops the calling thread for the given number of milliseconds.</div><div class="ttdef"><b>Definition:</b> timer.h:109</div></div>
<div class="ttc" id="anotifier_8h_html"><div class="ttname"><a href="notifier_8h.html">notifier.h</a></div><div class="ttdoc">Contains the definition of the classes MIDISequencerGUIEvent, MIDISequencerGUINotifier (abstract),...</div></div>
<div class="ttc" id="atimer_8h_html"><div class="ttname"><a href="timer_8h.html">timer.h</a></div><div class="ttdoc">Contains the definition of the MIDITimer class and some other typedef related to MIDI timing.</div></div>
</div><!-- fragment --><p>In the following files you can see more elaborated examples of the typical usage of the notifier classes:</p><ul>
<li><a class="el" href="test_stepsequencer_8cpp-example.html">test_stepsequencer.cpp</a> (text notifier)</li>
<li><a class="el" href="test_win32_player_8cpp-example.html">test_win32_player.cpp</a> (Windows notifier) </li>
</ul>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
