<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>NiCMidi: test_sequencer.cpp</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">NiCMidi<span id="projectnumber">&#160;1.1.0</span>
   </div>
   <div id="projectbrief">A MIDI library derived from J.D.Koftinoff jdksmidi</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.2 -->
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('test_sequencer_8cpp-example.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle"><div class="title">test_sequencer.cpp</div></div>
</div><!--header-->
<div class="contents">
<p >A command line example of the features of the <a class="el" href="class_m_i_d_i_sequencer.html" title="A MIDITickComponent which implements a basic sequencer, able to play the MIDI events contained in a M...">MIDISequencer</a> class. It creates an instance of the class and allows the user to interact with it. You can load MIDI files and play them changing some parameters (it has more limited features than the <a class="el" href="class_advanced_sequencer.html" title="An enhanced MIDISequencer, able to directly load and play MIDI files and many more.">AdvancedSequencer</a>).</p>
<p >Requires functions.cpp, which contains command line I/O functions.</p>
<div class="fragment"><div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment"> *   Example file for NiCMidi - A C++ Class Library for MIDI</span></div>
<div class="line"><span class="comment"> *</span></div>
<div class="line"><span class="comment"> *   Copyright (C) 2021, 2022  Nicola Cassetta</span></div>
<div class="line"><span class="comment"> *   https://github.com/ncassetta/NiCMidi</span></div>
<div class="line"><span class="comment"> *</span></div>
<div class="line"><span class="comment"> *   This file is part of NiCMidi.</span></div>
<div class="line"><span class="comment"> *</span></div>
<div class="line"><span class="comment"> *   NiCMidi is free software: you can redistribute it and/or modify</span></div>
<div class="line"><span class="comment"> *   it under the terms of the GNU Lesser General Public License as</span></div>
<div class="line"><span class="comment"> *   published by the Free Software Foundation, either version 3 of</span></div>
<div class="line"><span class="comment"> *   the License, or (at your option) any later version.</span></div>
<div class="line"><span class="comment"> *</span></div>
<div class="line"><span class="comment"> *   NiCMidi is distributed in the hope that it will be useful,</span></div>
<div class="line"><span class="comment"> *   but WITHOUT ANY WARRANTY; without even the implied warranty of</span></div>
<div class="line"><span class="comment"> *   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span></div>
<div class="line"><span class="comment"> *   GNU Lesser General Public License for more details.</span></div>
<div class="line"><span class="comment"> *</span></div>
<div class="line"><span class="comment"> *   You should have received a copy of the GNU Lesser General Public License</span></div>
<div class="line"><span class="comment"> *   along with NiCMidi.  If not, see &lt;http://www.gnu.org/licenses/&gt;.</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment">  A command line example of the features of the MIDISequencer</span></div>
<div class="line"><span class="comment">  class. It creates an instance of the class and allows the user</span></div>
<div class="line"><span class="comment">  to interact with it. You can load MIDI files and play them</span></div>
<div class="line"><span class="comment">  changing some parameters (it has more limited features than the</span></div>
<div class="line"><span class="comment">  AdvancedSequencer).</span></div>
<div class="line"><span class="comment">  Requires functions.cpp, which contains command line I/O functions.</span></div>
<div class="line"><span class="comment">*/</span></div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &quot;../include/sequencer.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;../include/manager.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;../include/notifier.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;../include/filereadmultitrack.h&quot;</span>  <span class="comment">// for LoadMIDIFile()</span></div>
<div class="line"><span class="preprocessor">#include &quot;functions.h&quot;</span>                      <span class="comment">// helper functions for input parsing and output</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">using namespace </span>std;</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="comment">//                        G L O B A L S                         //</span></div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">// a MIDIMultiTrack</span></div>
<div class="line"><a id="_a0" name="_a0"></a><a class="code hl_class" href="class_m_i_d_i_multi_track.html">MIDIMultiTrack</a> multitrack;</div>
<div class="line"><span class="comment">// a text notifier</span></div>
<div class="line"><a id="_a1" name="_a1"></a><a class="code hl_class" href="class_m_i_d_i_sequencer_g_u_i_notifier_text.html">MIDISequencerGUINotifierText</a> notifier;</div>
<div class="line"><span class="comment">// this constructor creates the sequencer from the given multitrack</span></div>
<div class="line"><a id="_a2" name="_a2"></a><a class="code hl_class" href="class_m_i_d_i_sequencer.html">MIDISequencer</a> sequencer(&amp;multitrack, &amp;notifier);</div>
<div class="line"> </div>
<div class="line"><span class="keyword">extern</span> <span class="keywordtype">string</span> command, par1, par2;          <span class="comment">// used by GetCommand() for parsing the user input</span></div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> helpstring[] =                   <span class="comment">// shown by the help command</span></div>
<div class="line"><span class="stringliteral">&quot;\nAvailable commands:\n\</span></div>
<div class="line"><span class="stringliteral">   load filename       : Loads the file into the sequencer\n\</span></div>
<div class="line"><span class="stringliteral">   ports               : Enumerates MIDI In and OUT ports\n\</span></div>
<div class="line"><span class="stringliteral">   play                : Starts playback from current time\n\</span></div>
<div class="line"><span class="stringliteral">   loop meas1 meas2    : Sets loop play (doesn&#39;t start it!) from\n\</span></div>
<div class="line"><span class="stringliteral">                         meas1 to meas2. Give 0 0 for non loop play\n\</span></div>
<div class="line"><span class="stringliteral">   stop                : Stops playback\n\</span></div>
<div class="line"><span class="stringliteral">   rew                 : Goes to the beginning (stops the playback)\n\</span></div>
<div class="line"><span class="stringliteral">   goto meas [beat]    : Moves current time to given meas and beat\n\</span></div>
<div class="line"><span class="stringliteral">                         (numbered from 0)\n\</span></div>
<div class="line"><span class="stringliteral">   playmode u/b        : Sets the play mode (bounded or unbounded)\n\</span></div>
<div class="line"><span class="stringliteral">   dump [trk]          : Prints a dump of all midi events in the file\n\</span></div>
<div class="line"><span class="stringliteral">                         (or in the track trk)\n\</span></div>
<div class="line"><span class="stringliteral">   outport track port  : Sets the MIDI port for the given track\n\</span></div>
<div class="line"><span class="stringliteral">   tscale scale        : Sets global tempo scale. scale is in percent\n\</span></div>
<div class="line"><span class="stringliteral">                         (ex. 200 = twice faster, 50 = twice slower)\n\</span></div>
<div class="line"><span class="stringliteral">   tshift track amt    : Sets the time shift for given track. The amount can\n\</span></div>
<div class="line"><span class="stringliteral">                         be positive or negative.\n\</span></div>
<div class="line"><span class="stringliteral">   trackinfo [v]       : Shows info about all tracks of the file. If you\n\</span></div>
<div class="line"><span class="stringliteral">                         add the v the info are more complete.\n\</span></div>
<div class="line"><span class="stringliteral">   notify  on/off      : Turns on and off the notifier\n\</span></div>
<div class="line"><span class="stringliteral">   b                   : (backward) Moves current time to the previous measure\n\</span></div>
<div class="line"><span class="stringliteral">   f                   : (forward) Moves current time to the next measure\n\</span></div>
<div class="line"><span class="stringliteral">   help                : Prints this help screen\n\</span></div>
<div class="line"><span class="stringliteral">   quit                : Exits\n\</span></div>
<div class="line"><span class="stringliteral">All commands can be given during playback\n&quot;</span>;</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="comment">//                              M A I N                         //</span></div>
<div class="line"><span class="comment"></span> </div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> main(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> **argv) {</div>
<div class="line">    notifier.<a id="a3" name="a3"></a><a class="code hl_function" href="class_m_i_d_i_sequencer_g_u_i_notifier.html#a01c6a78586524abb599fe1ed9d41ac59">SetEnable</a>(<span class="keyword">false</span>);</div>
<div class="line">    cout &lt;&lt; <span class="stringliteral">&quot;TYPE help TO GET A LIST OF AVAILABLE COMMANDS&quot;</span> &lt;&lt; endl &lt;&lt; endl;</div>
<div class="line">    <span class="keywordflow">while</span> (command != <span class="stringliteral">&quot;quit&quot;</span>) {                     <span class="comment">// main loop</span></div>
<div class="line">        GetCommand();                               <span class="comment">// gets user input and splits it into command, par1, par2</span></div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span>(command == <span class="stringliteral">&quot;&quot;</span>)                           <span class="comment">// empty command</span></div>
<div class="line">            <span class="keywordflow">continue</span>;</div>
<div class="line">        <span class="keywordflow">if</span> (command == <span class="stringliteral">&quot;load&quot;</span>) {                    <span class="comment">// loads a file</span></div>
<div class="line">            <span class="comment">// this is different from the same on AdvancedSequencer, because there is</span></div>
<div class="line">            <span class="comment">// no dedicated method in MIDISequencer: you must load the multitrack and</span></div>
<div class="line">            <span class="comment">// then call MIDISequencer::Reset() for initializing the sequencer</span></div>
<div class="line">            <span class="keywordflow">if</span> (<a id="a4" name="a4"></a><a class="code hl_function" href="group___g_l_o_b_a_l_s.html#ga2aeb658536e62963f91dafccdbdd78c2">LoadMIDIFile</a>(par1, &amp;multitrack))</div>
<div class="line">                cout &lt;&lt; <span class="stringliteral">&quot;Loaded file &quot;</span> &lt;&lt; par1 &lt;&lt; endl;</div>
<div class="line">            <span class="keywordflow">else</span></div>
<div class="line">                cout &lt;&lt; <span class="stringliteral">&quot;Error loading file&quot;</span> &lt;&lt; endl;</div>
<div class="line">            sequencer.Reset();</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (command == <span class="stringliteral">&quot;ports&quot;</span>) {              <span class="comment">// enumerates the midi ports</span></div>
<div class="line">            <span class="keywordflow">if</span> (<a id="a5" name="a5"></a><a class="code hl_function" href="class_m_i_d_i_manager.html#ac5fbf7c0255b7bdecc32a5b06b65cb0b">MIDIManager::GetNumMIDIIns</a>()) {</div>
<div class="line">                cout &lt;&lt; <span class="stringliteral">&quot;MIDI IN PORTS:&quot;</span> &lt;&lt; endl;</div>
<div class="line">                <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; <a class="code hl_function" href="class_m_i_d_i_manager.html#ac5fbf7c0255b7bdecc32a5b06b65cb0b">MIDIManager::GetNumMIDIIns</a>(); i++)</div>
<div class="line">                    cout &lt;&lt; i &lt;&lt; <span class="stringliteral">&quot;: &quot;</span> &lt;&lt; <a id="a6" name="a6"></a><a class="code hl_function" href="class_m_i_d_i_manager.html#a919ef6ffc4b3183102f28aa00b36ef43">MIDIManager::GetMIDIInName</a>(i) &lt;&lt; endl;</div>
<div class="line">            }</div>
<div class="line">            <span class="keywordflow">else</span></div>
<div class="line">                cout &lt;&lt; <span class="stringliteral">&quot;NO MIDI IN PORTS&quot;</span> &lt;&lt; endl;</div>
<div class="line">            <span class="keywordflow">if</span> (<a id="a7" name="a7"></a><a class="code hl_function" href="class_m_i_d_i_manager.html#a330e53d746e07835d7e7bd7358825835">MIDIManager::GetNumMIDIOuts</a>()) {</div>
<div class="line">                cout &lt;&lt; <span class="stringliteral">&quot;MIDI OUT PORTS:&quot;</span> &lt;&lt; endl;</div>
<div class="line">                <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; <a class="code hl_function" href="class_m_i_d_i_manager.html#a330e53d746e07835d7e7bd7358825835">MIDIManager::GetNumMIDIOuts</a>(); i++)</div>
<div class="line">                    cout &lt;&lt; i &lt;&lt; <span class="stringliteral">&quot;: &quot;</span> &lt;&lt; <a id="a8" name="a8"></a><a class="code hl_function" href="class_m_i_d_i_manager.html#aeebfa44a8493628e34a8822cd5339452">MIDIManager::GetMIDIOutName</a>(i) &lt;&lt; endl;</div>
<div class="line">            }</div>
<div class="line">            <span class="keywordflow">else</span></div>
<div class="line">                cout &lt;&lt; <span class="stringliteral">&quot;NO MIDI OUT PORTS&quot;</span> &lt;&lt; endl;</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (command == <span class="stringliteral">&quot;play&quot;</span>) {               <span class="comment">// starts playback</span></div>
<div class="line">            sequencer.Play();</div>
<div class="line">            cout &lt;&lt; <span class="stringliteral">&quot;Sequencer started at measure: &quot;</span> &lt;&lt; sequencer.GetCurrentMeasure() &lt;&lt; <span class="stringliteral">&quot;:&quot;</span></div>
<div class="line">                 &lt;&lt; sequencer.GetCurrentBeat() &lt;&lt; endl;</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (command == <span class="stringliteral">&quot;loop&quot;</span>) {               <span class="comment">// sets repeated play</span></div>
<div class="line">            <span class="keywordtype">int</span> beg = atoi(par1.c_str());</div>
<div class="line">            <span class="keywordtype">int</span> end = atoi(par2.c_str());</div>
<div class="line">            <span class="keywordflow">if</span> (!(beg == 0 &amp;&amp; end == 0)) {</div>
<div class="line">                <span class="keywordflow">if</span> (sequencer.SetRepeatPlay(<span class="keyword">true</span>, beg, end))</div>
<div class="line">                    cout &lt;&lt; <span class="stringliteral">&quot;Repeat play set from measure &quot;</span> &lt;&lt; beg &lt;&lt; <span class="stringliteral">&quot; to measure &quot;</span> &lt;&lt; end &lt;&lt; endl;</div>
<div class="line">                <span class="keywordflow">else</span></div>
<div class="line">                    cout &lt;&lt; <span class="stringliteral">&quot;Invalid parameters: repeat play cleared&quot;</span> &lt;&lt; endl;</div>
<div class="line">            }</div>
<div class="line">            <span class="keywordflow">else</span> {</div>
<div class="line">                sequencer.SetRepeatPlay(<span class="keyword">false</span>, 0, 0);</div>
<div class="line">                cout &lt;&lt; <span class="stringliteral">&quot;Repeat play cleared&quot;</span> &lt;&lt; endl;</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (command == <span class="stringliteral">&quot;stop&quot;</span>) {               <span class="comment">// stops playback</span></div>
<div class="line">            sequencer.Stop();</div>
<div class="line">            cout &lt;&lt; <span class="stringliteral">&quot;Sequencer stopped at measure: &quot;</span> &lt;&lt; sequencer.GetCurrentMeasure() &lt;&lt; <span class="stringliteral">&quot;:&quot;</span></div>
<div class="line">                 &lt;&lt; sequencer.GetCurrentBeat() &lt;&lt; endl;</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (command == <span class="stringliteral">&quot;rew&quot;</span>) {                <span class="comment">// stops and rewind to time 0</span></div>
<div class="line">            sequencer.Stop();</div>
<div class="line">            sequencer.GoToZero();</div>
<div class="line">            cout &lt;&lt; <span class="stringliteral">&quot;Rewind to 0:0&quot;</span> &lt;&lt; endl;</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (command == <span class="stringliteral">&quot;goto&quot;</span>) {               <span class="comment">// goes to meas and beat</span></div>
<div class="line">            <span class="comment">// if there are program change, control change or sysex events between actual</span></div>
<div class="line">            <span class="comment">// and new time, MIDISequencer doesn&#39;t send them, so you can expect inaccurate</span></div>
<div class="line">            <span class="comment">// playing when you jump from one time to another (this is solver in</span></div>
<div class="line">            <span class="comment">// AdvancedSequencer)</span></div>
<div class="line">            <span class="keywordtype">int</span> meas = atoi(par1.c_str());</div>
<div class="line">            <span class="keywordtype">int</span> beat = atoi (par2.c_str());</div>
<div class="line">            <span class="keywordflow">if</span> (sequencer.GoToMeasure(meas, beat))</div>
<div class="line">                cout &lt;&lt; <span class="stringliteral">&quot;Actual position: &quot;</span> &lt;&lt; sequencer.GetCurrentMeasure() &lt;&lt; <span class="stringliteral">&quot;:&quot;</span></div>
<div class="line">                     &lt;&lt; sequencer.GetCurrentBeat() &lt;&lt; endl;</div>
<div class="line">            <span class="keywordflow">else</span></div>
<div class="line">                cout &lt;&lt; <span class="stringliteral">&quot;Invalid position&quot;</span> &lt;&lt; endl;</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (command == <span class="stringliteral">&quot;playmode&quot;</span>) {</div>
<div class="line">            <span class="keywordflow">if</span> (par1 == <span class="stringliteral">&quot;u&quot;</span>) {</div>
<div class="line">                sequencer.SetPlayMode(<a id="a9" name="a9"></a><a class="code hl_enumvalue" href="class_m_i_d_i_sequencer.html#a27a42c2b51d2e1024796734c09eeb336a8b07ad2e2a8fb81ffa9d4915bb3787f7">MIDISequencer::PLAY_UNBOUNDED</a>);</div>
<div class="line">                cout &lt;&lt; <span class="stringliteral">&quot;Set sequencer play mode to UNBOUNDED&quot;</span> &lt;&lt; endl;</div>
<div class="line">            }</div>
<div class="line">            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (par1 == <span class="stringliteral">&quot;b&quot;</span>) {</div>
<div class="line">                sequencer.SetPlayMode(<a id="a10" name="a10"></a><a class="code hl_enumvalue" href="class_m_i_d_i_sequencer.html#a27a42c2b51d2e1024796734c09eeb336a6d742365d6cbe81cb5027e8068207a98">MIDISequencer::PLAY_BOUNDED</a>);</div>
<div class="line">                cout &lt;&lt; <span class="stringliteral">&quot;Set sequencer play mode to BOUNDED&quot;</span> &lt;&lt; endl;</div>
<div class="line">            }</div>
<div class="line">            <span class="keywordflow">else</span></div>
<div class="line">                cout &lt;&lt; <span class="stringliteral">&quot;Invalid parameter&quot;</span> &lt;&lt; endl;</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (command == <span class="stringliteral">&quot;dump&quot;</span>) {               <span class="comment">// prints a dump of the sequencer contents</span></div>
<div class="line">            <span class="keywordflow">if</span> (par1.size() == 0)</div>
<div class="line">                DumpMIDIMultiTrackWithPauses(&amp;multitrack);</div>
<div class="line">            <span class="keywordflow">else</span> {</div>
<div class="line">                <span class="keywordtype">int</span> trk_num = atoi(par1.c_str());</div>
<div class="line">                <span class="keywordflow">if</span> (multitrack.<a id="a11" name="a11"></a><a class="code hl_function" href="class_m_i_d_i_multi_track.html#a03cb82dfb21c84a8637516be94939090">IsValidTrackNumber</a>(trk_num)) {</div>
<div class="line">                    <a id="_a12" name="_a12"></a><a class="code hl_class" href="class_m_i_d_i_track.html">MIDITrack</a>* trk = multitrack.<a id="a13" name="a13"></a><a class="code hl_function" href="class_m_i_d_i_multi_track.html#a2cbbd72e17a18fff11087a8502e97500">GetTrack</a>(trk_num);</div>
<div class="line">                    DumpMIDITrackWithPauses(trk, trk_num);</div>
<div class="line">                }</div>
<div class="line">                <span class="keywordflow">else</span></div>
<div class="line">                    cout &lt;&lt; <span class="stringliteral">&quot;Invalid track number&quot;</span> &lt;&lt; endl;</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (command == <span class="stringliteral">&quot;outport&quot;</span>) {            <span class="comment">// changes the midi out port</span></div>
<div class="line">            <span class="keywordtype">int</span> trk_num = atoi(par1.c_str());</div>
<div class="line">            <span class="keywordtype">int</span> port = atoi(par2.c_str());</div>
<div class="line">            <span class="keywordflow">if</span> (sequencer.SetTrackOutPort(trk_num, port))</div>
<div class="line">                cout &lt;&lt; <span class="stringliteral">&quot;Assigned out port n. &quot;</span> &lt;&lt; sequencer.GetTrackOutPort(trk_num)</div>
<div class="line">                     &lt;&lt; <span class="stringliteral">&quot; to track &quot;</span> &lt;&lt; trk_num &lt;&lt; endl;</div>
<div class="line">            <span class="keywordflow">else</span></div>
<div class="line">                cout &lt;&lt; <span class="stringliteral">&quot;Invalid parameters&quot;</span> &lt;&lt; endl;</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (command == <span class="stringliteral">&quot;tscale&quot;</span>) {             <span class="comment">// scales playback tempo</span></div>
<div class="line">            <span class="keywordtype">int</span> scale = atoi(par1.c_str());</div>
<div class="line">            sequencer.SetTempoScale(scale);</div>
<div class="line">            cout &lt;&lt; <span class="stringliteral">&quot;Tempo scale : &quot;</span> &lt;&lt; scale &lt;&lt; <span class="stringliteral">&quot;%  &quot;</span> &lt;&lt;</div>
<div class="line">                    <span class="stringliteral">&quot; Effective tempo: &quot;</span> &lt;&lt; sequencer.GetTempoWithScale() &lt;&lt; <span class="stringliteral">&quot; bpm&quot;</span> &lt;&lt; endl;</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (command == <span class="stringliteral">&quot;tshift&quot;</span>) {             <span class="comment">// sets the time shift (in ticks) of a track</span></div>
<div class="line">            <span class="keywordtype">int</span> trk_num = atoi(par1.c_str());</div>
<div class="line">            <span class="keywordtype">int</span> amount = atoi(par2.c_str());</div>
<div class="line">            sequencer.SetTrackTimeShift(trk_num, amount);</div>
<div class="line">            cout &lt;&lt; <span class="stringliteral">&quot;Track &quot;</span> &lt;&lt; trk_num &lt;&lt; <span class="stringliteral">&quot; time shifted by &quot;</span> &lt;&lt; amount &lt;&lt; <span class="stringliteral">&quot; MIDI ticks&quot;</span> &lt;&lt; endl;</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (command == <span class="stringliteral">&quot;trackinfo&quot;</span>) {          <span class="comment">// prints info about tracks</span></div>
<div class="line">            <span class="keywordtype">bool</span> verbose = (par1 == <span class="stringliteral">&quot;v&quot;</span>);</div>
<div class="line">            DumpAllTracksAttr(&amp;multitrack, verbose);</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (command == <span class="stringliteral">&quot;notify&quot;</span>) {</div>
<div class="line">            <span class="keywordflow">if</span> (par1 == <span class="stringliteral">&quot;on&quot;</span>) {</div>
<div class="line">                notifier.<a class="code hl_function" href="class_m_i_d_i_sequencer_g_u_i_notifier.html#a01c6a78586524abb599fe1ed9d41ac59">SetEnable</a>(<span class="keyword">true</span>);</div>
<div class="line">                cout &lt;&lt; <span class="stringliteral">&quot;Notifier on&quot;</span> &lt;&lt; endl;</div>
<div class="line">            }</div>
<div class="line">            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (par1 == <span class="stringliteral">&quot;off&quot;</span>) {</div>
<div class="line">                notifier.<a class="code hl_function" href="class_m_i_d_i_sequencer_g_u_i_notifier.html#a01c6a78586524abb599fe1ed9d41ac59">SetEnable</a>(<span class="keyword">false</span>);</div>
<div class="line">                cout &lt;&lt; <span class="stringliteral">&quot;Notifier off&quot;</span> &lt;&lt; endl;</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (command == <span class="stringliteral">&quot;b&quot;</span>) {                  <span class="comment">// goes a measure backward</span></div>
<div class="line">            <span class="keywordtype">int</span> meas = sequencer.GetCurrentMeasure();</div>
<div class="line">            <span class="keywordflow">if</span> (sequencer.GoToMeasure(--meas))</div>
<div class="line">                cout &lt;&lt; <span class="stringliteral">&quot;Actual position: &quot;</span> &lt;&lt; sequencer.GetCurrentMeasure() &lt;&lt; <span class="stringliteral">&quot;:&quot;</span></div>
<div class="line">                     &lt;&lt; sequencer.GetCurrentBeat() &lt;&lt; endl;</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (command == <span class="stringliteral">&quot;f&quot;</span>) {                  <span class="comment">// goes a measure forward</span></div>
<div class="line">            <span class="keywordtype">int</span> meas = sequencer.GetCurrentMeasure();</div>
<div class="line">            <span class="keywordflow">if</span> (sequencer.GoToMeasure(++meas))</div>
<div class="line">                cout &lt;&lt; <span class="stringliteral">&quot;Actual position: &quot;</span> &lt;&lt; sequencer.GetCurrentMeasure() &lt;&lt; <span class="stringliteral">&quot;:&quot;</span></div>
<div class="line">                     &lt;&lt; sequencer.GetCurrentBeat() &lt;&lt; endl;</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (command == <span class="stringliteral">&quot;help&quot;</span>)                 <span class="comment">// prints help screen</span></div>
<div class="line">            cout &lt;&lt; helpstring;</div>
<div class="line">        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (command != <span class="stringliteral">&quot;quit&quot;</span>)</div>
<div class="line">            cout &lt;&lt; <span class="stringliteral">&quot;Unrecognized command&quot;</span> &lt;&lt; endl;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">return</span> EXIT_SUCCESS;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="ttc" id="aclass_m_i_d_i_manager_html_a330e53d746e07835d7e7bd7358825835"><div class="ttname"><a href="class_m_i_d_i_manager.html#a330e53d746e07835d7e7bd7358825835">MIDIManager::GetNumMIDIOuts</a></div><div class="ttdeci">static unsigned int GetNumMIDIOuts()</div><div class="ttdoc">Returns the number of MIDI out ports in the system.</div></div>
<div class="ttc" id="aclass_m_i_d_i_manager_html_a919ef6ffc4b3183102f28aa00b36ef43"><div class="ttname"><a href="class_m_i_d_i_manager.html#a919ef6ffc4b3183102f28aa00b36ef43">MIDIManager::GetMIDIInName</a></div><div class="ttdeci">static const std::string &amp; GetMIDIInName(unsigned int n)</div><div class="ttdoc">Returns the system name of the given MIDI in port.</div></div>
<div class="ttc" id="aclass_m_i_d_i_manager_html_ac5fbf7c0255b7bdecc32a5b06b65cb0b"><div class="ttname"><a href="class_m_i_d_i_manager.html#ac5fbf7c0255b7bdecc32a5b06b65cb0b">MIDIManager::GetNumMIDIIns</a></div><div class="ttdeci">static unsigned int GetNumMIDIIns()</div><div class="ttdoc">Returns the number of MIDI in ports in the system.</div></div>
<div class="ttc" id="aclass_m_i_d_i_manager_html_aeebfa44a8493628e34a8822cd5339452"><div class="ttname"><a href="class_m_i_d_i_manager.html#aeebfa44a8493628e34a8822cd5339452">MIDIManager::GetMIDIOutName</a></div><div class="ttdeci">static const std::string &amp; GetMIDIOutName(unsigned int n)</div><div class="ttdoc">Returns the system name of the given MIDI out port.</div></div>
<div class="ttc" id="aclass_m_i_d_i_multi_track_html"><div class="ttname"><a href="class_m_i_d_i_multi_track.html">MIDIMultiTrack</a></div><div class="ttdoc">Holds an array of pointers to MIDITrack objects to be played simultaneously.</div><div class="ttdef"><b>Definition:</b> multitrack.h:50</div></div>
<div class="ttc" id="aclass_m_i_d_i_multi_track_html_a03cb82dfb21c84a8637516be94939090"><div class="ttname"><a href="class_m_i_d_i_multi_track.html#a03cb82dfb21c84a8637516be94939090">MIDIMultiTrack::IsValidTrackNumber</a></div><div class="ttdeci">bool IsValidTrackNumber(unsigned int trk_num) const</div><div class="ttdoc">Returns true if trk_num is in thee range 0 ... GetNumTracks() - 1.</div><div class="ttdef"><b>Definition:</b> multitrack.h:96</div></div>
<div class="ttc" id="aclass_m_i_d_i_multi_track_html_a2cbbd72e17a18fff11087a8502e97500"><div class="ttname"><a href="class_m_i_d_i_multi_track.html#a2cbbd72e17a18fff11087a8502e97500">MIDIMultiTrack::GetTrack</a></div><div class="ttdeci">MIDITrack * GetTrack(unsigned int trk_num)</div><div class="ttdoc">Returns the pointer to the track.</div><div class="ttdef"><b>Definition:</b> multitrack.h:79</div></div>
<div class="ttc" id="aclass_m_i_d_i_sequencer_g_u_i_notifier_html_a01c6a78586524abb599fe1ed9d41ac59"><div class="ttname"><a href="class_m_i_d_i_sequencer_g_u_i_notifier.html#a01c6a78586524abb599fe1ed9d41ac59">MIDISequencerGUINotifier::SetEnable</a></div><div class="ttdeci">virtual void SetEnable(bool f)</div><div class="ttdoc">Sets message sending on/off.</div><div class="ttdef"><b>Definition:</b> notifier.h:179</div></div>
<div class="ttc" id="aclass_m_i_d_i_sequencer_g_u_i_notifier_text_html"><div class="ttname"><a href="class_m_i_d_i_sequencer_g_u_i_notifier_text.html">MIDISequencerGUINotifierText</a></div><div class="ttdoc">A MIDISequencerGUINotifier which sends text messages to a std::ostream (std::cout as default).</div><div class="ttdef"><b>Definition:</b> notifier.h:191</div></div>
<div class="ttc" id="aclass_m_i_d_i_sequencer_html"><div class="ttname"><a href="class_m_i_d_i_sequencer.html">MIDISequencer</a></div><div class="ttdoc">A MIDITickComponent which implements a basic sequencer, able to play the MIDI events contained in a M...</div><div class="ttdef"><b>Definition:</b> sequencer.h:193</div></div>
<div class="ttc" id="aclass_m_i_d_i_sequencer_html_a27a42c2b51d2e1024796734c09eeb336a6d742365d6cbe81cb5027e8068207a98"><div class="ttname"><a href="class_m_i_d_i_sequencer.html#a27a42c2b51d2e1024796734c09eeb336a6d742365d6cbe81cb5027e8068207a98">MIDISequencer::PLAY_BOUNDED</a></div><div class="ttdeci">@ PLAY_BOUNDED</div><div class="ttdoc">See SetPlayMode()</div><div class="ttdef"><b>Definition:</b> sequencer.h:478</div></div>
<div class="ttc" id="aclass_m_i_d_i_sequencer_html_a27a42c2b51d2e1024796734c09eeb336a8b07ad2e2a8fb81ffa9d4915bb3787f7"><div class="ttname"><a href="class_m_i_d_i_sequencer.html#a27a42c2b51d2e1024796734c09eeb336a8b07ad2e2a8fb81ffa9d4915bb3787f7">MIDISequencer::PLAY_UNBOUNDED</a></div><div class="ttdeci">@ PLAY_UNBOUNDED</div><div class="ttdoc">See SetPlayMode()</div><div class="ttdef"><b>Definition:</b> sequencer.h:479</div></div>
<div class="ttc" id="aclass_m_i_d_i_track_html"><div class="ttname"><a href="class_m_i_d_i_track.html">MIDITrack</a></div><div class="ttdoc">Manages a std::vector of MIDITimedMessage objects storing MIDI events, with methods for editing them.</div><div class="ttdef"><b>Definition:</b> track.h:80</div></div>
<div class="ttc" id="agroup___g_l_o_b_a_l_s_html_ga2aeb658536e62963f91dafccdbdd78c2"><div class="ttname"><a href="group___g_l_o_b_a_l_s.html#ga2aeb658536e62963f91dafccdbdd78c2">LoadMIDIFile</a></div><div class="ttdeci">bool LoadMIDIFile(const char *filename, MIDIMultiTrack *tracks, MIDIFileHeader *const head=0)</div><div class="ttdoc">Loads a MIDI file into a MIDIMultiTrack object.</div></div>
</div><!-- fragment --> </div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.2 </li>
  </ul>
</div>
</body>
</html>
