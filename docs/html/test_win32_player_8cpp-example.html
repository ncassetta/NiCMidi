<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>NiCMidi: test_win32_player.cpp</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">NiCMidi<span id="projectnumber">&#160;1.1.0</span>
   </div>
   <div id="projectbrief">A MIDI library derived from J.D.Koftinoff jdksmidi</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.2 -->
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('test_win32_player_8cpp-example.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle"><div class="title">test_win32_player.cpp</div></div>
</div><!--header-->
<div class="contents">
<p >A MS Windows GUI example of the usage of the <a class="el" href="class_advanced_sequencer.html" title="An enhanced MIDISequencer, able to directly load and play MIDI files and many more.">AdvancedSequencer</a> class together with a <a class="el" href="class_m_i_d_i_sequencer_g_u_i_notifier_win32.html" title="A MIDISequencerGUINotifier which sends messages to a Win32 window using the Windows PostMessage() fun...">MIDISequencerGUINotifierWin32</a> and a <a class="el" href="class_s_m_p_t_e.html" title="Performs conversions between number of samples, milliseconds and smpte format (hours::minutes::second...">SMPTE</a>. It is a basic MIDI file player with a responsive GUI showing the file parameters while the song is playing. It uses standard Windows API for creating the GUI.</p>
<div class="fragment"><div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment"> *   Example file for NiCMidi - A C++ Class Library for MIDI</span></div>
<div class="line"><span class="comment"> *</span></div>
<div class="line"><span class="comment"> *   Copyright (C) 2021  Nicola Cassetta</span></div>
<div class="line"><span class="comment"> *   https://github.com/ncassetta/NiCMidi</span></div>
<div class="line"><span class="comment"> *</span></div>
<div class="line"><span class="comment"> *   This file is part of NiCMidi.</span></div>
<div class="line"><span class="comment"> *</span></div>
<div class="line"><span class="comment"> *   NiCMidi is free software: you can redistribute it and/or modify</span></div>
<div class="line"><span class="comment"> *   it under the terms of the GNU General Public License as published by</span></div>
<div class="line"><span class="comment"> *   the Free Software Foundation, either version 3 of the License, or</span></div>
<div class="line"><span class="comment"> *   (at your option) any later version.</span></div>
<div class="line"><span class="comment"> *</span></div>
<div class="line"><span class="comment"> *   NiCMidi is distributed in the hope that it will be useful,</span></div>
<div class="line"><span class="comment"> *   but WITHOUT ANY WARRANTY; without even the implied warranty of</span></div>
<div class="line"><span class="comment"> *   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span></div>
<div class="line"><span class="comment"> *   GNU General Public License for more details.</span></div>
<div class="line"><span class="comment"> *</span></div>
<div class="line"><span class="comment"> *   You should have received a copy of the GNU General Public License</span></div>
<div class="line"><span class="comment"> *   along with NiCMidi.  If not, see &lt;http://www.gnu.org/licenses/&gt;.</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment">  A MS Windows GUI example of the usage of the AdvancedSequencer</span></div>
<div class="line"><span class="comment">  class together with a MIDISequencerGUINotifierWin32 and a SMPTE.</span></div>
<div class="line"><span class="comment">  It is a basic MIDI file player with a responsive GUI showing the</span></div>
<div class="line"><span class="comment">  file parameters while the song is playing. It uses standard Windows</span></div>
<div class="line"><span class="comment">  API for creating the GUI.</span></div>
<div class="line"><span class="comment">*/</span></div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &lt;windows.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;cwchar&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &quot;../../include/advancedsequencer.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;../../include/smpte.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;../../include/midi.h&quot;</span></div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="comment">//  Declare functions</span></div>
<div class="line">LRESULT CALLBACK WindowProcedure (HWND, UINT, WPARAM, LPARAM);</div>
<div class="line">VOID ProcessNotifierMessage(<a id="_a0" name="_a0"></a><a class="code hl_class" href="class_m_i_d_i_sequencer_g_u_i_event.html">MIDISequencerGUIEvent</a> msg);</div>
<div class="line">VOID LoadFile();</div>
<div class="line">VOID SetControls();</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span>* GetSmpteString();</div>
<div class="line">VOID SetMIDIActivity();</div>
<div class="line">VOID ResetDelays();</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="comment">// Declare MIDI objects</span></div>
<div class="line"><a id="_a1" name="_a1"></a><a class="code hl_class" href="class_advanced_sequencer.html">AdvancedSequencer</a> *sequencer;       <span class="comment">// the sequencer</span></div>
<div class="line"><a id="_a2" name="_a2"></a><a class="code hl_class" href="class_s_m_p_t_e.html">SMPTE</a> smpte;                        <span class="comment">// milliseconds to smpte converter</span></div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="comment">// Declare handles to the window controls (In a real application you may want to subclass your</span></div>
<div class="line"><span class="comment">// window class and make them local)</span></div>
<div class="line"> </div>
<div class="line">HWND hMainWin;                      <span class="comment">// our main window</span></div>
<div class="line">HWND hFileName;                     <span class="comment">// filename box</span></div>
<div class="line">HWND hTime;                         <span class="comment">// time box</span></div>
<div class="line">HWND hKey;                          <span class="comment">// keysig box</span></div>
<div class="line">HWND hTempo;                        <span class="comment">// tempo box</span></div>
<div class="line">HWND hMeas;                         <span class="comment">// meas/beat box</span></div>
<div class="line">HWND hSmpte;                        <span class="comment">// smpte box</span></div>
<div class="line">HWND hMarker;                       <span class="comment">// marker box</span></div>
<div class="line">HWND hTrackNames[16];               <span class="comment">// array of boxes for track names</span></div>
<div class="line">HWND hTrackChans[16];               <span class="comment">// array of boxes for track channels</span></div>
<div class="line">HWND hTrackPrgrs[16];               <span class="comment">// array of boxes for track programs</span></div>
<div class="line">HWND hTrackVols[16];                <span class="comment">// array of boxes for track volumAes</span></div>
<div class="line">HWND hTrackActs[16];                <span class="comment">// array of boxes for track activity</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">// Declare other variables</span></div>
<div class="line">UINT NotifierMessage = 0;           <span class="comment">// the Windows message id to communicate between notifier and GUI</span></div>
<div class="line"><span class="keywordtype">int</span> MIDIActDelays[16];              <span class="comment">// array of integers for temporizing MIDI activity boxes</span></div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">int</span> ACT_DELAY = 4;</div>
<div class="line"> </div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="comment">// WinMain</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> WINAPI WinMain (HINSTANCE hThisInstance,</div>
<div class="line">                     HINSTANCE hPrevInstance,</div>
<div class="line">                     LPSTR lpszArgument,</div>
<div class="line">                     <span class="keywordtype">int</span> nCmdShow)</div>
<div class="line">{</div>
<div class="line">    MSG messages;            <span class="comment">// Here messages to the application are saved</span></div>
<div class="line">    WNDCLASSEX wincl;        <span class="comment">// Data structure for the windowclass</span></div>
<div class="line">    <span class="keywordtype">char</span> szClassName[ ] = <span class="stringliteral">&quot;Test AdvancedSequencer in WIN32&quot;</span>;    <span class="comment">// Class name</span></div>
<div class="line"> </div>
<div class="line">    <span class="comment">// The Window structure</span></div>
<div class="line">    wincl.hInstance = hThisInstance;</div>
<div class="line">    wincl.lpszClassName = szClassName;</div>
<div class="line">    wincl.lpfnWndProc = WindowProcedure;        <span class="comment">// This function is called by windows</span></div>
<div class="line">    wincl.style = CS_DBLCLKS;                   <span class="comment">// Catch double-clicks</span></div>
<div class="line">    wincl.cbSize = <span class="keyword">sizeof</span> (WNDCLASSEX);</div>
<div class="line">    wincl.hIcon = LoadIcon (NULL, IDI_APPLICATION);</div>
<div class="line">                                                <span class="comment">// Use default icon and mouse-pointer</span></div>
<div class="line">    wincl.hIconSm = LoadIcon (NULL, IDI_APPLICATION);</div>
<div class="line">    wincl.hCursor = LoadCursor (NULL, IDC_ARROW);</div>
<div class="line">    wincl.lpszMenuName = NULL;                  <span class="comment">// No menu</span></div>
<div class="line">    wincl.cbClsExtra = 0;                       <span class="comment">// No extra bytes after the window class</span></div>
<div class="line">    wincl.cbWndExtra = 0;                       <span class="comment">// Structure or the window instance</span></div>
<div class="line">    wincl.hbrBackground = (HBRUSH) COLOR_BACKGROUND;</div>
<div class="line">                                                <span class="comment">// Use Windows&#39;s default colour as the background of the window</span></div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Register the window class, and if it fails quit the program</span></div>
<div class="line">    <span class="keywordflow">if</span> (!RegisterClassEx (&amp;wincl))</div>
<div class="line">        <span class="keywordflow">return</span> 0;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// The class is registered, let&#39;s create the window</span></div>
<div class="line">    hMainWin = CreateWindowEx (</div>
<div class="line">           0,                                   <span class="comment">// Extended possibilites for variation</span></div>
<div class="line">           szClassName,                         <span class="comment">// Class name</span></div>
<div class="line">           <span class="stringliteral">&quot;test WIN32 (C) by N. Cassetta&quot;</span>,     <span class="comment">// Title Text</span></div>
<div class="line">           WS_OVERLAPPEDWINDOW,                 <span class="comment">// Default window</span></div>
<div class="line">           CW_USEDEFAULT,                       <span class="comment">// Windows decides the position</span></div>
<div class="line">           CW_USEDEFAULT,                       <span class="comment">// where the window ends up on the screen</span></div>
<div class="line">           800,                                 <span class="comment">// The window width</span></div>
<div class="line">           600,                                 <span class="comment">// and height in pixels</span></div>
<div class="line">           HWND_DESKTOP,                        <span class="comment">// The window is a child-window to desktop</span></div>
<div class="line">           NULL,                                <span class="comment">// No menu</span></div>
<div class="line">           hThisInstance,                       <span class="comment">// Program Instance handler</span></div>
<div class="line">           NULL                                 <span class="comment">// No Window Creation data</span></div>
<div class="line">           );</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Now create the MIDI objects: the GUI notifier and the sequencer (to send messages to the window</span></div>
<div class="line">    <span class="comment">// the notifier needs to know its handle and the message id)</span></div>
<div class="line">    <a id="_a3" name="_a3"></a><a class="code hl_class" href="class_m_i_d_i_sequencer_g_u_i_notifier_win32.html">MIDISequencerGUINotifierWin32</a> notifier (</div>
<div class="line">        hMainWin                        <span class="comment">// The window handle to which send messages</span></div>
<div class="line">        );</div>
<div class="line">    NotifierMessage = notifier.GetMsgId();  <span class="comment">// auto gets from Windows a safe message id number</span></div>
<div class="line">    sequencer = <span class="keyword">new</span> <a class="code hl_class" href="class_advanced_sequencer.html">AdvancedSequencer</a>( &amp;notifier );</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Make the window visible on the screen</span></div>
<div class="line">    ShowWindow (hMainWin, nCmdShow);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Run the message loop. It will run until GetMessage() returns 0</span></div>
<div class="line">    <span class="keywordflow">while</span> (GetMessage (&amp;messages, NULL, 0, 0))</div>
<div class="line">    {</div>
<div class="line">        <span class="comment">// Translate virtual-key messages into character messages</span></div>
<div class="line">        TranslateMessage(&amp;messages);</div>
<div class="line">        <span class="comment">// Send message to WindowProcedure</span></div>
<div class="line">        DispatchMessage(&amp;messages);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// The program return-value is 0 - The value that PostQuitMessage() gave</span></div>
<div class="line">    <span class="keywordflow">return</span> messages.wParam;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="comment">//  This function is called by the Windows function DispatchMessage()</span></div>
<div class="line"><span class="comment">//  hwnd is the window handle</span></div>
<div class="line"><span class="comment">//  message is the message id</span></div>
<div class="line"><span class="comment">//  other parameters are used for identifying the widget that sent the message</span></div>
<div class="line">LRESULT CALLBACK WindowProcedure (HWND hwnd, UINT message, WPARAM wParam, LPARAM lParam)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">if</span> (message == NotifierMessage)         <span class="comment">// If the message is originated from the sequencer notifier ...</span></div>
<div class="line">    {</div>
<div class="line">        ProcessNotifierMessage( (<a class="code hl_class" href="class_m_i_d_i_sequencer_g_u_i_event.html">MIDISequencerGUIEvent</a>)lParam );</div>
<div class="line">                                            <span class="comment">// ... process it with our dedicated function to upgrade the GUI</span></div>
<div class="line">        <span class="keywordflow">return</span> 0;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">switch</span> (message) {                      <span class="comment">// handle other messages (originated from Windows)</span></div>
<div class="line"> </div>
<div class="line">        <span class="comment">// The WM_CREATE message is sent by Windows at the creation of the main window.</span></div>
<div class="line">        <span class="comment">// Here it creates all its children widgets: this is only windows API stuff and you</span></div>
<div class="line">        <span class="comment">// probably may want to do it with a dedicated UI toolkit.</span></div>
<div class="line">        <span class="comment">// However here we create some buttons and static (i.e. text boxes) controls. The buttons have</span></div>
<div class="line">        <span class="comment">// a (HMENU) parameter that will be used in case WM_COMMAND for identifying the button which</span></div>
<div class="line">        <span class="comment">// sent the command.</span></div>
<div class="line">        <span class="comment">// No library related content in case WM_CREATE.</span></div>
<div class="line">         <span class="keywordflow">case</span> WM_CREATE:</div>
<div class="line"> </div>
<div class="line">            <span class="comment">// &quot;Load&quot; button</span></div>
<div class="line">            CreateWindowW(L<span class="stringliteral">&quot;button&quot;</span>,        <span class="comment">// Preregistered class (type) of window: in this case a button</span></div>
<div class="line">                          L<span class="stringliteral">&quot;Load&quot;</span>,          <span class="comment">// Button label</span></div>
<div class="line">                WS_VISIBLE | WS_CHILD ,     <span class="comment">// Attributes</span></div>
<div class="line">                10, 10, 50, 25,             <span class="comment">// x, y, w, h (in the parent window)</span></div>
<div class="line">                hwnd,                       <span class="comment">// Handle to the parent</span></div>
<div class="line">                (HMENU) 1,                  <span class="comment">// Parameter used for identifying the control</span></div>
<div class="line">                NULL, NULL);                <span class="comment">// Other unused parameters</span></div>
<div class="line"> </div>
<div class="line">            <span class="comment">// &quot;Rew&quot; button</span></div>
<div class="line">            CreateWindowW(L<span class="stringliteral">&quot;button&quot;</span>, L<span class="stringliteral">&quot;Rew&quot;</span>,<span class="comment">// Same</span></div>
<div class="line">                WS_VISIBLE | WS_CHILD ,</div>
<div class="line">                100, 10, 50, 25,</div>
<div class="line">                hwnd, (HMENU) 2, NULL, NULL);</div>
<div class="line"> </div>
<div class="line">            <span class="comment">// &quot;Play&quot; button</span></div>
<div class="line">            CreateWindowW(L<span class="stringliteral">&quot;button&quot;</span>, L<span class="stringliteral">&quot;Play&quot;</span>,</div>
<div class="line">                WS_VISIBLE | WS_CHILD ,</div>
<div class="line">                155, 10, 50, 25,</div>
<div class="line">                hwnd, (HMENU) 3, NULL, NULL);</div>
<div class="line"> </div>
<div class="line">            <span class="comment">// &quot;Stop&quot; button</span></div>
<div class="line">            CreateWindowW(L<span class="stringliteral">&quot;button&quot;</span>, L<span class="stringliteral">&quot;Stop&quot;</span>,</div>
<div class="line">                WS_VISIBLE | WS_CHILD ,</div>
<div class="line">                210, 10, 50, 25,</div>
<div class="line">                hwnd, (HMENU) 4, NULL, NULL);</div>
<div class="line"> </div>
<div class="line">            <span class="comment">// Back step button</span></div>
<div class="line">            CreateWindowW(L<span class="stringliteral">&quot;button&quot;</span>, L<span class="stringliteral">&quot;&lt;&lt;&quot;</span>,</div>
<div class="line">                WS_VISIBLE | WS_CHILD ,</div>
<div class="line">                265, 10, 50, 25,</div>
<div class="line">                hwnd, (HMENU) 5, NULL, NULL);</div>
<div class="line"> </div>
<div class="line">            <span class="comment">// Forward step button</span></div>
<div class="line">            CreateWindowW(L<span class="stringliteral">&quot;button&quot;</span>, L<span class="stringliteral">&quot;&gt;&gt;&quot;</span>,</div>
<div class="line">                WS_VISIBLE | WS_CHILD ,</div>
<div class="line">                320, 10, 50, 25,</div>
<div class="line">                hwnd, (HMENU) 6, NULL, NULL);</div>
<div class="line"> </div>
<div class="line">            <span class="comment">// Filename text box</span></div>
<div class="line">            hFileName = CreateWindowW(L<span class="stringliteral">&quot;static&quot;</span>, L<span class="stringliteral">&quot;UNLOADED&quot;</span>,</div>
<div class="line">                WS_VISIBLE | WS_CHILD | SS_LEFTNOWORDWRAP,</div>
<div class="line">                400, 10, 375, 25,</div>
<div class="line">                hwnd, (HMENU) 7, NULL, NULL);</div>
<div class="line"> </div>
<div class="line">            <span class="comment">// Timesig text box</span></div>
<div class="line">            hTime = CreateWindowW(L<span class="stringliteral">&quot;static&quot;</span>, NULL,</div>
<div class="line">                WS_VISIBLE | WS_CHILD | SS_CENTER,</div>
<div class="line">                100, 45, 50, 25,</div>
<div class="line">                hwnd, (HMENU) 8, NULL, NULL);</div>
<div class="line"> </div>
<div class="line">            <span class="comment">// Keysig text box</span></div>
<div class="line">            hKey = CreateWindowW(L<span class="stringliteral">&quot;static&quot;</span>, NULL,</div>
<div class="line">                WS_VISIBLE | WS_CHILD | SS_CENTER,</div>
<div class="line">                155, 45, 50, 25,</div>
<div class="line">                hwnd, (HMENU) 7, NULL, NULL);</div>
<div class="line"> </div>
<div class="line">            <span class="comment">// Tempo text box</span></div>
<div class="line">            hTempo = CreateWindowW(L<span class="stringliteral">&quot;static&quot;</span>, NULL,</div>
<div class="line">                WS_VISIBLE | WS_CHILD | SS_CENTER,</div>
<div class="line">                210, 45, 50, 25,</div>
<div class="line">                hwnd, (HMENU) 8, NULL, NULL);</div>
<div class="line"> </div>
<div class="line">            <span class="comment">// Meas - beat text box</span></div>
<div class="line">            hMeas = CreateWindowW(L<span class="stringliteral">&quot;static&quot;</span>, NULL,</div>
<div class="line">                WS_VISIBLE | WS_CHILD | SS_CENTER,</div>
<div class="line">                265, 45, 50, 25,</div>
<div class="line">                hwnd, (HMENU) 7, NULL, NULL);</div>
<div class="line"> </div>
<div class="line">            <span class="comment">// SMPTE text box</span></div>
<div class="line">            hSmpte = CreateWindowW(L<span class="stringliteral">&quot;static&quot;</span>, NULL,</div>
<div class="line">                WS_VISIBLE | WS_CHILD | SS_CENTER,</div>
<div class="line">                400, 45, 105, 25,</div>
<div class="line">                hwnd, (HMENU) 7, NULL, NULL);</div>
<div class="line"> </div>
<div class="line">            <span class="comment">// Marker text box</span></div>
<div class="line">            hMarker = CreateWindowW(L<span class="stringliteral">&quot;static&quot;</span>, NULL,</div>
<div class="line">                WS_VISIBLE | WS_CHILD | SS_LEFT,</div>
<div class="line">                510, 45, 265, 25,</div>
<div class="line">                hwnd, (HMENU) 7, NULL, NULL);</div>
<div class="line"> </div>
<div class="line">            <span class="comment">// For every track ...</span></div>
<div class="line">            <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; 16; i++) {</div>
<div class="line">                <span class="keywordtype">wchar_t</span> s[5];</div>
<div class="line">                _snwprintf(s, 5, L<span class="stringliteral">&quot;%d&quot;</span>, i+1);   <span class="comment">// ??? Should be swprintf, but MINGW says &quot;not defined&quot;</span></div>
<div class="line"> </div>
<div class="line">                <span class="comment">// Track number text box</span></div>
<div class="line">                CreateWindowW(L<span class="stringliteral">&quot;static&quot;</span>, s,</div>
<div class="line">                    WS_VISIBLE | WS_CHILD | SS_LEFT,</div>
<div class="line">                    10, 80+30*i, 30, 25,</div>
<div class="line">                    hwnd, NULL, NULL, NULL);</div>
<div class="line"> </div>
<div class="line">                <span class="comment">// Track name text box</span></div>
<div class="line">                hTrackNames[i] = CreateWindowW(L<span class="stringliteral">&quot;static&quot;</span>, NULL,</div>
<div class="line">                    WS_VISIBLE | WS_CHILD | SS_LEFT,</div>
<div class="line">                    45, 80+30*i, 180, 25,</div>
<div class="line">                    hwnd, NULL, NULL, NULL);</div>
<div class="line"> </div>
<div class="line">                <span class="comment">// Track channel text box</span></div>
<div class="line">                hTrackChans[i] = CreateWindowW(L<span class="stringliteral">&quot;static&quot;</span>, NULL,</div>
<div class="line">                    WS_VISIBLE | WS_CHILD | SS_LEFT,</div>
<div class="line">                    230, 80+30*i, 70, 25,</div>
<div class="line">                    hwnd, NULL, NULL, NULL);</div>
<div class="line"> </div>
<div class="line">                <span class="comment">// Track program (patch) text box</span></div>
<div class="line">                hTrackPrgrs[i] = CreateWindowW(L<span class="stringliteral">&quot;static&quot;</span>, NULL,</div>
<div class="line">                    WS_VISIBLE | WS_CHILD | SS_LEFT,</div>
<div class="line">                    305, 80+30*i, 180, 25,</div>
<div class="line">                    hwnd, NULL, NULL, NULL);</div>
<div class="line"> </div>
<div class="line">                <span class="comment">// Track volume text box</span></div>
<div class="line">                hTrackVols[i] = CreateWindowW(L<span class="stringliteral">&quot;static&quot;</span>, NULL,</div>
<div class="line">                    WS_VISIBLE | WS_CHILD | SS_LEFT,</div>
<div class="line">                    490, 80+30*i, 70, 25,</div>
<div class="line">                    hwnd, NULL, NULL, NULL);</div>
<div class="line"> </div>
<div class="line">                <span class="comment">// Track MIDI activity text box</span></div>
<div class="line">                hTrackActs[i] = CreateWindowW(L<span class="stringliteral">&quot;static&quot;</span>, NULL,</div>
<div class="line">                    WS_VISIBLE | WS_CHILD | SS_LEFT,</div>
<div class="line">                    565, 83+30*i, 19, 19,</div>
<div class="line">                    hwnd, NULL, NULL, NULL);</div>
<div class="line">            }</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// The WM_COMMAND message is sent by buttons: so we identify the button that sent the message</span></div>
<div class="line">        <span class="comment">// (LOWORD(wParam) is the MENU param in the corresponding CreateWindowW) and call the appropriate</span></div>
<div class="line">        <span class="comment">// AdvancedSequencer method</span></div>
<div class="line">        <span class="keywordflow">case</span> WM_COMMAND:</div>
<div class="line"> </div>
<div class="line">            <span class="keywordflow">if</span> (LOWORD(wParam) == 1) {      <span class="comment">// Load</span></div>
<div class="line">                <span class="comment">// load a file into the sequencer and reinitialize the GUI</span></div>
<div class="line">                LoadFile();</div>
<div class="line">            }</div>
<div class="line"> </div>
<div class="line">            <span class="keywordflow">if</span> (LOWORD(wParam) == 2) {      <span class="comment">// Rew</span></div>
<div class="line">                <span class="comment">// reset the MIDI activity boxes delay parameter</span></div>
<div class="line">                ResetDelays();</div>
<div class="line">                <span class="comment">// rewind the sequencer</span></div>
<div class="line">                sequencer-&gt;<a id="a4" name="a4"></a><a class="code hl_function" href="class_advanced_sequencer.html#a043b4a3c7f6af2eec5997103b58d8e2e">GoToZero</a>();</div>
<div class="line">            }</div>
<div class="line"> </div>
<div class="line">            <span class="keywordflow">if</span> (LOWORD(wParam) == 3) {      <span class="comment">// Play</span></div>
<div class="line">                ResetDelays();</div>
<div class="line">                <span class="comment">// start playing the file</span></div>
<div class="line">                sequencer-&gt;<a id="a5" name="a5"></a><a class="code hl_function" href="class_m_i_d_i_sequencer.html#a02771baa597331636944d40277ca9b29">Play</a>();</div>
<div class="line">                <span class="comment">// start a Windows timer for updating the smpte box: the timer</span></div>
<div class="line">                <span class="comment">// sends a WM_TIMER message to the main window every 1/20 second</span></div>
<div class="line">                SetTimer(hwnd,              <span class="comment">// window to which send WM_TIMER messages</span></div>
<div class="line">                         1,                 <span class="comment">// timer id</span></div>
<div class="line">                         50,                <span class="comment">// timer interval (50 msecs)</span></div>
<div class="line">                         NULL);             <span class="comment">// unused</span></div>
<div class="line">            }</div>
<div class="line"> </div>
<div class="line">            <span class="keywordflow">if</span> (LOWORD(wParam) == 4) {      <span class="comment">// Stop</span></div>
<div class="line">                <span class="comment">// stop playback</span></div>
<div class="line">                sequencer-&gt;<a id="a6" name="a6"></a><a class="code hl_function" href="class_advanced_sequencer.html#a03737ce6199aad3fa22415143e3dc923">Stop</a>();</div>
<div class="line">                <span class="comment">// stop the timer (1 is the timer id)</span></div>
<div class="line">                KillTimer(hMainWin, 1);</div>
<div class="line">                <span class="comment">// reset the track activity boxes</span></div>
<div class="line">                ResetDelays();</div>
<div class="line">                SetMIDIActivity();</div>
<div class="line">            }</div>
<div class="line"> </div>
<div class="line">            <span class="keywordflow">if</span> (LOWORD(wParam) == 5) {      <span class="comment">// Step backward</span></div>
<div class="line">                ResetDelays();</div>
<div class="line">                <span class="comment">// go to previous measure</span></div>
<div class="line">                sequencer-&gt;<a id="a7" name="a7"></a><a class="code hl_function" href="class_advanced_sequencer.html#a749448bc18bf009a95efee51efa92a37">GoToMeasure</a>(sequencer-&gt;<a id="a8" name="a8"></a><a class="code hl_function" href="class_advanced_sequencer.html#a93b86bf991c34b5cdd94811ec3d99c52">GetCurrentMeasure</a>() - 1);</div>
<div class="line">            }</div>
<div class="line"> </div>
<div class="line">            <span class="keywordflow">if</span> (LOWORD(wParam) == 6) {      <span class="comment">// Step forward</span></div>
<div class="line">                ResetDelays();</div>
<div class="line">                <span class="comment">// go to next measure</span></div>
<div class="line">                sequencer-&gt;<a class="code hl_function" href="class_advanced_sequencer.html#a749448bc18bf009a95efee51efa92a37">GoToMeasure</a>(sequencer-&gt;<a class="code hl_function" href="class_advanced_sequencer.html#a93b86bf991c34b5cdd94811ec3d99c52">GetCurrentMeasure</a>() + 1);</div>
<div class="line">            }</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// The WM_TIMER message is sent by the timer for updating the SMPTE box</span></div>
<div class="line">        <span class="comment">// and the track activity boxes</span></div>
<div class="line">        <span class="keywordflow">case</span> WM_TIMER:</div>
<div class="line"> </div>
<div class="line">            <span class="keywordflow">if</span> (LOWORD(wParam) == 1) {      <span class="comment">// timer id</span></div>
<div class="line">                <span class="comment">// update the Smpte box with the current SMPTE string</span></div>
<div class="line">                SetWindowText( hSmpte, GetSmpteString());</div>
<div class="line">                <span class="comment">// update the track activity boxes</span></div>
<div class="line">                SetMIDIActivity();</div>
<div class="line">            }</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// The WM_DESTROY message is sent by Windows when the program ends</span></div>
<div class="line">        <span class="keywordflow">case</span> WM_DESTROY:</div>
<div class="line">            PostQuitMessage (0);       <span class="comment">// send a WM_QUIT to the message queue</span></div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">default</span>:                      <span class="comment">// for messages that we don&#39;t deal with</span></div>
<div class="line">            <span class="keywordflow">return</span> DefWindowProc (hwnd, message, wParam, lParam);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="comment">// This function loads a file into the sequencer</span></div>
<div class="line">VOID LoadFile() {</div>
<div class="line">    OPENFILENAME ofn;                       <span class="comment">// A struct with appropriate values for the open file control</span></div>
<div class="line">    <span class="keywordtype">char</span> szFileName[MAX_PATH] = <span class="stringliteral">&quot;&quot;</span>;         <span class="comment">// This will hold the filename</span></div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Sets the correct values for the OPENFILENAME struct</span></div>
<div class="line">    ZeroMemory(&amp;ofn, <span class="keyword">sizeof</span>(ofn));</div>
<div class="line"> </div>
<div class="line">    ofn.lStructSize = <span class="keyword">sizeof</span>(ofn);</div>
<div class="line">    ofn.hwndOwner = NULL;</div>
<div class="line">    ofn.lpstrFilter = <span class="stringliteral">&quot;Midi Files (*.mid)\0*.mid\0\0&quot;</span>;  <span class="comment">// this is the filename filter</span></div>
<div class="line">    ofn.lpstrFile = szFileName;                         <span class="comment">// the string which will hold the filename</span></div>
<div class="line">    ofn.nMaxFile = MAX_PATH;</div>
<div class="line">    ofn.Flags = OFN_EXPLORER | OFN_FILEMUSTEXIST | OFN_HIDEREADONLY;</div>
<div class="line">    ofn.lpstrDefExt = <span class="stringliteral">&quot;mid&quot;</span>;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span>(GetOpenFileName(&amp;ofn)) {             <span class="comment">// Shows the open file control and waits until it is closed</span></div>
<div class="line">                                            <span class="comment">// returning the filename in szFileName</span></div>
<div class="line">        <span class="keywordflow">if</span> (!sequencer-&gt;<a id="a9" name="a9"></a><a class="code hl_function" href="class_advanced_sequencer.html#a43ca00f369a542d72bdb211b8dba681b">Load</a>(szFileName)) { <span class="comment">// Error: the sequencer could not load the file</span></div>
<div class="line">            MessageBox(</div>
<div class="line">                NULL,</div>
<div class="line">                (LPCSTR)<span class="stringliteral">&quot;File loading failed!&quot;</span>,</div>
<div class="line">                NULL,</div>
<div class="line">                MB_ICONEXCLAMATION</div>
<div class="line">            );</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">else</span> {                              <span class="comment">// File loading OK</span></div>
<div class="line">            <span class="keywordflow">if</span> (sequencer-&gt;<a id="a10" name="a10"></a><a class="code hl_function" href="class_m_i_d_i_sequencer.html#a84ae107786f698b599f2ff639059962c">GetNumTracks</a>() &gt; 17) {</div>
<div class="line">                MessageBox(                 <span class="comment">// Too many tracks! We have room only for 1 - 17</span></div>
<div class="line">                    NULL,</div>
<div class="line">                    (LPCSTR)<span class="stringliteral">&quot;This file has more than 17 tracks!\nSome tracks won&#39;t be displayed&quot;</span>,</div>
<div class="line">                    (LPCSTR)<span class="stringliteral">&quot;Warning!&quot;</span>,</div>
<div class="line">                    MB_ICONWARNING</div>
<div class="line">                );</div>
<div class="line">            }</div>
<div class="line"> </div>
<div class="line">            <span class="comment">// update the filename textbox</span></div>
<div class="line">            SetWindowText( hFileName, szFileName );</div>
<div class="line"> </div>
<div class="line">            <span class="comment">// set the correct format and time offset for SMPTE</span></div>
<div class="line">            sequencer-&gt;<a id="a11" name="a11"></a><a class="code hl_function" href="class_advanced_sequencer.html#ae08c2a2e96d5cdacc0324c0bc05a7266">SetSMPTE</a>(&amp;smpte);</div>
<div class="line"> </div>
<div class="line">            <span class="comment">// update the timesig, tempo ... controls</span></div>
<div class="line">            SetControls();</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="comment">// This function updates all the sequencer related textboxes: it is called when a file is loaded and when</span></div>
<div class="line"><span class="comment">// the GUI receives from the notifier a GROUP_ALL (reset) message (for example rewind or step action)</span></div>
<div class="line">VOID SetControls() {</div>
<div class="line">    <span class="keywordtype">char</span> s[300];</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// update the timesig, tempo, meas-beat, smpte, marker boxes</span></div>
<div class="line">    sprintf (s, <span class="stringliteral">&quot;%d/%d&quot;</span>, sequencer-&gt;<a id="a12" name="a12"></a><a class="code hl_function" href="class_advanced_sequencer.html#a9333501791145f3972d5cb88131ddeea">GetTimeSigNumerator</a>(), sequencer-&gt;<a id="a13" name="a13"></a><a class="code hl_function" href="class_advanced_sequencer.html#a76b2f7b876472b13190e3984468ed5c1">GetTimeSigDenominator</a>());</div>
<div class="line">    SetWindowText(hTime, s);</div>
<div class="line">    SetWindowText(hKey, <a id="a14" name="a14"></a><a class="code hl_function" href="group___g_l_o_b_a_l_s.html#gae1b0db642ea9cd8faaa70761a37b7fb6">KeyName</a>(sequencer-&gt;<a id="a15" name="a15"></a><a class="code hl_function" href="class_advanced_sequencer.html#a2c35ed918fe4cde537f6b280f0b67021">GetKeySigSharpsFlats</a>(), sequencer-&gt;<a id="a16" name="a16"></a><a class="code hl_function" href="class_advanced_sequencer.html#ab17fdddc2c8f8b6ce75bad0a42a6f741">GetKeySigMode</a>()));</div>
<div class="line">    sprintf (s, <span class="stringliteral">&quot;%3.2f&quot;</span>, sequencer-&gt;<a id="a17" name="a17"></a><a class="code hl_function" href="class_m_i_d_i_sequencer.html#ac98258f043dcfd7c203a90c111564681">GetTempoWithoutScale</a>());</div>
<div class="line">    SetWindowText (hTempo, s);</div>
<div class="line">    sprintf (s, <span class="stringliteral">&quot;%d:%d&quot;</span>, sequencer-&gt;<a class="code hl_function" href="class_advanced_sequencer.html#a93b86bf991c34b5cdd94811ec3d99c52">GetCurrentMeasure</a>() + 1, sequencer-&gt;<a id="a18" name="a18"></a><a class="code hl_function" href="class_advanced_sequencer.html#a48e83ff1059f9f6db1dc57e7c7ab690a">GetCurrentBeat</a>() + 1);</div>
<div class="line">    SetWindowText (hMeas, s);</div>
<div class="line">    SetWindowText (hSmpte, GetSmpteString());</div>
<div class="line">    <span class="keywordflow">if</span> (sequencer-&gt;<a id="a19" name="a19"></a><a class="code hl_function" href="class_advanced_sequencer.html#a74e898a95ca0c58ffeed757a228c3c1f">GetCurrentMarker</a>().length() == 0)</div>
<div class="line">        SetWindowText (hMarker, <span class="stringliteral">&quot;---&quot;</span>);</div>
<div class="line">    <span class="keywordflow">else</span></div>
<div class="line">        SetWindowText (hMarker, sequencer-&gt;<a class="code hl_function" href="class_advanced_sequencer.html#a74e898a95ca0c58ffeed757a228c3c1f">GetCurrentMarker</a>().c_str());</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// for every track, update the name, channel, program, volume boxes</span></div>
<div class="line">    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 1;</div>
<div class="line">    <span class="keywordflow">for</span> (; i &lt; std::min (sequencer-&gt;<a class="code hl_function" href="class_m_i_d_i_sequencer.html#a84ae107786f698b599f2ff639059962c">GetNumTracks</a>(), 17u); i++) {</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (sequencer-&gt;<a id="a20" name="a20"></a><a class="code hl_function" href="class_advanced_sequencer.html#a02c61955046f7bf869cba7ab3572f0bb">GetTrackName</a>(i).length())</div>
<div class="line">            SetWindowText (hTrackNames[i - 1], sequencer-&gt;<a class="code hl_function" href="class_advanced_sequencer.html#a02c61955046f7bf869cba7ab3572f0bb">GetTrackName</a> (i).c_str());</div>
<div class="line">        <span class="keywordflow">else</span> {</div>
<div class="line">            sprintf(s, <span class="stringliteral">&quot;(track %d)&quot;</span>, i);</div>
<div class="line">            SetWindowText (hTrackNames[i - 1], s);</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (sequencer-&gt;<a id="a21" name="a21"></a><a class="code hl_function" href="class_advanced_sequencer.html#adc5e10000e5237a16817cb8499885594">GetTrackChannel</a>(i) == -1)        <span class="comment">// there aren&#39;t channel events or the track is empty</span></div>
<div class="line">            SetWindowText (hTrackChans[i - 1], <span class="stringliteral">&quot;---&quot;</span> );</div>
<div class="line">        <span class="keywordflow">else</span> {</div>
<div class="line">            sprintf(s, <span class="stringliteral">&quot;ch: %d&quot;</span>, sequencer-&gt;<a class="code hl_function" href="class_advanced_sequencer.html#adc5e10000e5237a16817cb8499885594">GetTrackChannel</a>(i) + 1);</div>
<div class="line">            SetWindowText(hTrackChans[i - 1], s);</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (sequencer-&gt;<a id="a22" name="a22"></a><a class="code hl_function" href="class_advanced_sequencer.html#a5494db52a1f10042904d12d7ea08be24">GetTrackProgram</a>(i) == -1)</div>
<div class="line">            SetWindowText(hTrackPrgrs[i - 1], <span class="stringliteral">&quot;---&quot;</span>);</div>
<div class="line">        <span class="keywordflow">else</span> {</div>
<div class="line">            <span class="keywordflow">if</span> (sequencer-&gt;<a class="code hl_function" href="class_advanced_sequencer.html#adc5e10000e5237a16817cb8499885594">GetTrackChannel</a>(i) == 9)     <span class="comment">// channel 10</span></div>
<div class="line">                SetWindowText(hTrackPrgrs[i - 1], <a id="a23" name="a23"></a><a class="code hl_function" href="group___g_l_o_b_a_l_s.html#ga54104810bff7aed5999f7760c6f02bfb">GetGMDrumkitName</a>((<span class="keywordtype">int</span>)sequencer-&gt;<a class="code hl_function" href="class_advanced_sequencer.html#a5494db52a1f10042904d12d7ea08be24">GetTrackProgram</a>(i), 1));</div>
<div class="line">            <span class="keywordflow">else</span></div>
<div class="line">                SetWindowText(hTrackPrgrs[i - 1], <a id="a24" name="a24"></a><a class="code hl_function" href="group___g_l_o_b_a_l_s.html#gaf67129a09f3cfe53120570ae984c3ed4">GetGMProgramName</a>((<span class="keywordtype">int</span>)sequencer-&gt;<a class="code hl_function" href="class_advanced_sequencer.html#a5494db52a1f10042904d12d7ea08be24">GetTrackProgram</a>(i), 1));</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">if</span> (sequencer-&gt;<a id="a25" name="a25"></a><a class="code hl_function" href="class_advanced_sequencer.html#ac2d59757fa501d81dd32d667e0a1dab3">GetTrackVolume</a>(i) == -1)</div>
<div class="line">            SetWindowText(hTrackVols[i - 1], <span class="stringliteral">&quot;vol: ---&quot;</span>);</div>
<div class="line">        <span class="keywordflow">else</span> {</div>
<div class="line">            sprintf (s, <span class="stringliteral">&quot;vol: %d&quot;</span>, sequencer-&gt;<a class="code hl_function" href="class_advanced_sequencer.html#ac2d59757fa501d81dd32d667e0a1dab3">GetTrackVolume</a>(i));</div>
<div class="line">            SetWindowText(hTrackVols[i -1], s);</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// make blank unused widgets</span></div>
<div class="line">    <span class="keywordflow">for</span> ( ; i &lt; 17; i++) {</div>
<div class="line">        SetWindowText (hTrackNames[i - 1], <span class="stringliteral">&quot;&quot;</span>);</div>
<div class="line">        SetWindowText (hTrackChans[i - 1], <span class="stringliteral">&quot;&quot;</span>);</div>
<div class="line">        SetWindowText (hTrackPrgrs[i - 1], <span class="stringliteral">&quot;&quot;</span>);</div>
<div class="line">        SetWindowText (hTrackVols[i - 1], <span class="stringliteral">&quot;&quot;</span>);</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">// This function returns a text string in the SMPTE format h:mm:ss:ff corresponding to</span></div>
<div class="line"><span class="comment">//the current sequencer time</span></div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span>* GetSmpteString() {</div>
<div class="line">    <span class="keyword">static</span> <span class="keywordtype">char</span> s[100];</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Get from the sequencer the current time in msecs</span></div>
<div class="line">    <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> msecs = sequencer-&gt;<a id="a26" name="a26"></a><a class="code hl_function" href="class_m_i_d_i_sequencer.html#a45e72e67f1ed284ec5b7299a1915d482">GetCurrentTimeMs</a>();</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Feed the smpte with msecs</span></div>
<div class="line">    smpte.<a id="a27" name="a27"></a><a class="code hl_function" href="class_s_m_p_t_e.html#a96c08c9e2c3ab7ad03dd6fcd29dcfbd3">SetMilliSeconds</a>(msecs);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Now it qives us the hours, minutes, secs and frames corresponding to our msecs</span></div>
<div class="line">    sprintf (s, <span class="stringliteral">&quot;%d:%02d:%02d:%02d&quot;</span>, smpte.<a id="a28" name="a28"></a><a class="code hl_function" href="class_s_m_p_t_e.html#a4a5d3501d7b4a0cdee1a0fcd837e2e09">GetHours</a>(), smpte.<a id="a29" name="a29"></a><a class="code hl_function" href="class_s_m_p_t_e.html#a37137632dea59d1c8e204317d10997ba">GetMinutes</a>(),</div>
<div class="line">                smpte.<a id="a30" name="a30"></a><a class="code hl_function" href="class_s_m_p_t_e.html#a3d32fc85df132aa8d605bb15637ef268">GetSeconds</a>(), smpte.<a id="a31" name="a31"></a><a class="code hl_function" href="class_s_m_p_t_e.html#a5cfe76073fc4071917a18ad7b04d5032">GetFrames</a>());</div>
<div class="line">    <span class="keywordflow">return</span> s;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="comment">// This function is called by WindowProcedure when it receives a notifier message: it does essentially</span></div>
<div class="line"><span class="comment">// the same things that SetControls does, but updates only the appropriate control based on the param</span></div>
<div class="line"><span class="comment">// ev (the notifier event)</span></div>
<div class="line"> VOID ProcessNotifierMessage(<a class="code hl_class" href="class_m_i_d_i_sequencer_g_u_i_event.html">MIDISequencerGUIEvent</a> ev) {</div>
<div class="line"><span class="comment">// the param ev is a MIDISequencerGUIEvent object (see the file notifier.h)</span></div>
<div class="line">    <span class="keywordtype">char</span> s[300];</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Get the group (general type) of the event</span></div>
<div class="line">    <span class="keywordflow">switch</span> (ev.<a id="a32" name="a32"></a><a class="code hl_function" href="class_m_i_d_i_sequencer_g_u_i_event.html#a3fa820a0bbd6b991d88206f59a9c88c7">GetGroup</a>()) {</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// This is a general GUI reset event: update all textboxes</span></div>
<div class="line">        <span class="keywordflow">case</span> <a id="a33" name="a33"></a><a class="code hl_enumvalue" href="class_m_i_d_i_sequencer_g_u_i_event.html#ab5fa5f0e49952c626a52256be4f4046babff3fa2f9969989c6a4a5fe7d984db57">MIDISequencerGUIEvent::GROUP_ALL</a>:</div>
<div class="line">            SetControls();</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// This is an event regarding conductor track: find the type and update appropriate textbox</span></div>
<div class="line">        <span class="keywordflow">case</span> <a id="a34" name="a34"></a><a class="code hl_enumvalue" href="class_m_i_d_i_sequencer_g_u_i_event.html#ab5fa5f0e49952c626a52256be4f4046bae25cb82717820b62d25caa2da1c040eb">MIDISequencerGUIEvent::GROUP_CONDUCTOR</a>:</div>
<div class="line">            <span class="keywordflow">switch</span> (ev.<a id="a35" name="a35"></a><a class="code hl_function" href="class_m_i_d_i_sequencer_g_u_i_event.html#a4257dbe27fe3bee2bdf9535ce92621ed">GetItem</a>()) {</div>
<div class="line">                <span class="comment">// Tempo (bpm) is changed</span></div>
<div class="line">                <span class="keywordflow">case</span> <a id="a36" name="a36"></a><a class="code hl_enumvalue" href="class_m_i_d_i_sequencer_g_u_i_event.html#a7fcebce8bd576dae69af6eea66829af1a3d88b877bccb29dfbb6ef58ffd0e8d88">MIDISequencerGUIEvent::GROUP_CONDUCTOR_TEMPO</a>:</div>
<div class="line">                    sprintf (s, <span class="stringliteral">&quot;%3.2f&quot;</span>, sequencer-&gt;<a class="code hl_function" href="class_m_i_d_i_sequencer.html#ac98258f043dcfd7c203a90c111564681">GetTempoWithoutScale</a>());</div>
<div class="line">                    SetWindowText ( hTempo, s );</div>
<div class="line">                    <span class="keywordflow">break</span>;</div>
<div class="line">                <span class="comment">// Timesig is changed</span></div>
<div class="line">                <span class="keywordflow">case</span> <a id="a37" name="a37"></a><a class="code hl_enumvalue" href="class_m_i_d_i_sequencer_g_u_i_event.html#a7fcebce8bd576dae69af6eea66829af1a68a9a52ad19771e5dbe49b44ea10ff14">MIDISequencerGUIEvent::GROUP_CONDUCTOR_TIMESIG</a>:</div>
<div class="line">                    sprintf (s, <span class="stringliteral">&quot;%d/%d&quot;</span>, sequencer-&gt;<a class="code hl_function" href="class_advanced_sequencer.html#a9333501791145f3972d5cb88131ddeea">GetTimeSigNumerator</a>(), sequencer-&gt;<a class="code hl_function" href="class_advanced_sequencer.html#a76b2f7b876472b13190e3984468ed5c1">GetTimeSigDenominator</a>());</div>
<div class="line">                    SetWindowText( hTime, s );</div>
<div class="line">                    <span class="keywordflow">break</span>;</div>
<div class="line">                <span class="comment">/* TODO: */</span></div>
<div class="line">                <span class="keywordflow">case</span> <a id="a38" name="a38"></a><a class="code hl_enumvalue" href="class_m_i_d_i_sequencer_g_u_i_event.html#a7fcebce8bd576dae69af6eea66829af1a688de213c8da4bb424ca4dd39e7f921a">MIDISequencerGUIEvent::GROUP_CONDUCTOR_KEYSIG</a>:</div>
<div class="line">                    SetWindowText( hKey, <a class="code hl_function" href="group___g_l_o_b_a_l_s.html#gae1b0db642ea9cd8faaa70761a37b7fb6">KeyName</a>(sequencer-&gt;<a id="a39" name="a39"></a><a class="code hl_function" href="class_m_i_d_i_sequencer.html#a6df1d00edce5769c9d19e75bc7e84e37">GetState</a>()-&gt;<a id="a40" name="a40"></a><a class="code hl_variable" href="class_m_i_d_i_sequencer_state.html#a50ca0cd809e0ce28260cc7823d17b1e9">keysig_sharpflat</a>,</div>
<div class="line">                                                 sequencer-&gt;<a class="code hl_function" href="class_m_i_d_i_sequencer.html#a6df1d00edce5769c9d19e75bc7e84e37">GetState</a>()-&gt;<a id="a41" name="a41"></a><a class="code hl_variable" href="class_m_i_d_i_sequencer_state.html#a777f0c2aaafcee4748842ab9a8087221">keysig_mode</a>) );</div>
<div class="line">                    <span class="keywordflow">break</span>;</div>
<div class="line">                <span class="comment">// Marker is changed</span></div>
<div class="line">                <span class="keywordflow">case</span> <a id="a42" name="a42"></a><a class="code hl_enumvalue" href="class_m_i_d_i_sequencer_g_u_i_event.html#a7fcebce8bd576dae69af6eea66829af1aead78c04d9dae67a6a3c0e578a571174">MIDISequencerGUIEvent::GROUP_CONDUCTOR_MARKER</a>:</div>
<div class="line">                    SetWindowText (hMarker, sequencer-&gt;<a class="code hl_function" href="class_advanced_sequencer.html#a74e898a95ca0c58ffeed757a228c3c1f">GetCurrentMarker</a>().c_str());</div>
<div class="line">                    <span class="keywordflow">break</span>;</div>
<div class="line">            }</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// This is an event regarding transport (start, stop, etc): we monitor only</span></div>
<div class="line">        <span class="comment">// beat events to update the meas - beat box</span></div>
<div class="line">        <span class="keywordflow">case</span> <a id="a43" name="a43"></a><a class="code hl_enumvalue" href="class_m_i_d_i_sequencer_g_u_i_event.html#ab5fa5f0e49952c626a52256be4f4046ba775f5ad82bd9619f6ead0395f582fc46">MIDISequencerGUIEvent::GROUP_TRANSPORT</a>:</div>
<div class="line">            <span class="keywordflow">if</span> (ev.<a class="code hl_function" href="class_m_i_d_i_sequencer_g_u_i_event.html#a4257dbe27fe3bee2bdf9535ce92621ed">GetItem</a>() == <a id="a44" name="a44"></a><a class="code hl_enumvalue" href="class_m_i_d_i_sequencer_g_u_i_event.html#a47a28b8312694f0896d956796af28b3dab14fb95ac30a2a4342557197569d0e55">MIDISequencerGUIEvent::GROUP_TRANSPORT_BEAT</a>) {</div>
<div class="line">                sprintf (s, <span class="stringliteral">&quot;%d:%d&quot;</span>, sequencer-&gt;<a class="code hl_function" href="class_advanced_sequencer.html#a93b86bf991c34b5cdd94811ec3d99c52">GetCurrentMeasure</a>() + 1, sequencer-&gt;<a class="code hl_function" href="class_advanced_sequencer.html#a48e83ff1059f9f6db1dc57e7c7ab690a">GetCurrentBeat</a>() + 1);</div>
<div class="line">                SetWindowText ( hMeas, s );</div>
<div class="line">            }</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// This is a track event: find the track (GetEventSubGroup) and the type (GetEventItem) and proceed</span></div>
<div class="line">        <span class="keywordflow">case</span> <a id="a45" name="a45"></a><a class="code hl_enumvalue" href="class_m_i_d_i_sequencer_g_u_i_event.html#ab5fa5f0e49952c626a52256be4f4046bac5cb8cdd176707d0a4fdd38a62e6b57b">MIDISequencerGUIEvent::GROUP_TRACK</a>: {</div>
<div class="line">            <span class="keywordtype">int</span> track = ev.<a id="a46" name="a46"></a><a class="code hl_function" href="class_m_i_d_i_sequencer_g_u_i_event.html#a68501a04d503c33b892735f24d845208">GetSubGroup</a>();</div>
<div class="line">            <span class="comment">// do nothing if track is the master track or is not shown (we can show only 0 ... 17)</span></div>
<div class="line">            <span class="keywordflow">if</span> (track == 0 || track &gt;= 17)</div>
<div class="line">                <span class="keywordflow">break</span>;</div>
<div class="line">            <span class="comment">// Program (patch) is changed: we must distinguish between channel 10 (drums) and other channels</span></div>
<div class="line">            <span class="keywordflow">if</span> (ev.<a class="code hl_function" href="class_m_i_d_i_sequencer_g_u_i_event.html#a4257dbe27fe3bee2bdf9535ce92621ed">GetItem</a>() == <a id="a47" name="a47"></a><a class="code hl_enumvalue" href="class_m_i_d_i_sequencer_g_u_i_event.html#a1b34906773ed466eae0a3bb60c4c6948a9c9416ef2fbabf45e0f9f8f10f4644e1">MIDISequencerGUIEvent::GROUP_TRACK_PROGRAM</a>) {</div>
<div class="line">                <span class="keywordflow">if</span> (sequencer-&gt;<a class="code hl_function" href="class_advanced_sequencer.html#adc5e10000e5237a16817cb8499885594">GetTrackChannel</a>(track) == 9)     <span class="comment">// channel 10</span></div>
<div class="line">                    SetWindowText(hTrackPrgrs[track - 1], <a class="code hl_function" href="group___g_l_o_b_a_l_s.html#ga54104810bff7aed5999f7760c6f02bfb">GetGMDrumkitName</a>((<span class="keywordtype">int</span>)sequencer-&gt;<a class="code hl_function" href="class_advanced_sequencer.html#a5494db52a1f10042904d12d7ea08be24">GetTrackProgram</a>(track), 1) );</div>
<div class="line">                <span class="keywordflow">else</span></div>
<div class="line">                    SetWindowText ( hTrackPrgrs[track - 1], <a class="code hl_function" href="group___g_l_o_b_a_l_s.html#gaf67129a09f3cfe53120570ae984c3ed4">GetGMProgramName</a>((<span class="keywordtype">int</span>)sequencer-&gt;<a class="code hl_function" href="class_advanced_sequencer.html#a5494db52a1f10042904d12d7ea08be24">GetTrackProgram</a>(track), 1) );</div>
<div class="line">            }</div>
<div class="line">            <span class="comment">// Volume is changed</span></div>
<div class="line">            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (ev.<a class="code hl_function" href="class_m_i_d_i_sequencer_g_u_i_event.html#a4257dbe27fe3bee2bdf9535ce92621ed">GetItem</a>() == <a id="a48" name="a48"></a><a class="code hl_enumvalue" href="class_m_i_d_i_sequencer_g_u_i_event.html#a1b34906773ed466eae0a3bb60c4c6948a000515fd7a79de67c0ab8123fa8f938d">MIDISequencerGUIEvent::GROUP_TRACK_VOLUME</a>) {</div>
<div class="line">                sprintf (s, <span class="stringliteral">&quot;vol: %d&quot;</span>, sequencer-&gt;<a class="code hl_function" href="class_advanced_sequencer.html#ac2d59757fa501d81dd32d667e0a1dab3">GetTrackVolume</a>(track) );</div>
<div class="line">                SetWindowText (hTrackVols[track - 1], s);</div>
<div class="line">                <span class="comment">// This is a MIDI activity: set the corresponding flag for this track</span></div>
<div class="line">                MIDIActDelays[track - 1] = ACT_DELAY;</div>
<div class="line">                <span class="keywordflow">break</span>;</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="comment">// This function is called by the timer every 1/50 sec and controls the MIDI activity boxes.</span></div>
<div class="line">VOID SetMIDIActivity() {</div>
<div class="line">    <span class="keywordtype">char</span> s[10];</div>
<div class="line">    <span class="comment">// find the number of tracks which we must monitor</span></div>
<div class="line">    <span class="keywordtype">int</span> active_tracks = (sequencer-&gt;<a class="code hl_function" href="class_m_i_d_i_sequencer.html#a84ae107786f698b599f2ff639059962c">GetNumTracks</a>() &lt;= 17 ? sequencer-&gt;<a class="code hl_function" href="class_m_i_d_i_sequencer.html#a84ae107786f698b599f2ff639059962c">GetNumTracks</a>() : 17);</div>
<div class="line">    <span class="comment">// for every sequencer track ...</span></div>
<div class="line">    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 1; i &lt; active_tracks; i++) {</div>
<div class="line">        <span class="comment">// if any note is sounding in the track ...</span></div>
<div class="line">        <span class="keywordflow">if</span> (sequencer-&gt;<a id="a49" name="a49"></a><a class="code hl_function" href="class_advanced_sequencer.html#accdfac8e0bba5a4b8e12166805fc5d05">GetTrackNoteCount</a>(i))</div>
<div class="line">            <span class="comment">// ... set the track MIDI activity flag to its initial value</span></div>
<div class="line">            MIDIActDelays[i - 1] = ACT_DELAY;       <span class="comment">// ACT_DELAY currently 4 (200 msec delay after the activity)</span></div>
<div class="line">        <span class="comment">// no actual MIDI activity but delay still active</span></div>
<div class="line">        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (MIDIActDelays[i - 1] &gt; 0)</div>
<div class="line">            <span class="comment">// decrement the delay flag</span></div>
<div class="line">            MIDIActDelays[i - 1]--;</div>
<div class="line">        <span class="comment">// set the MIDI activity box on/off according to the activity flag</span></div>
<div class="line">        <span class="keywordflow">if</span> (MIDIActDelays[i - 1] &gt; 0)</div>
<div class="line">            sprintf (s, <span class="stringliteral">&quot;X&quot;</span>);</div>
<div class="line">        <span class="keywordflow">else</span></div>
<div class="line">            sprintf (s, <span class="stringliteral">&quot;  &quot;</span>);</div>
<div class="line">        SetWindowText ( hTrackActs[i - 1], s );</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="comment">// Reset all the Midi activity flags to 0 (no MIDI activity)</span></div>
<div class="line">VOID ResetDelays() {</div>
<div class="line">    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; 17; i++)</div>
<div class="line">        MIDIActDelays[i] = 0;</div>
<div class="line">}</div>
<div class="ttc" id="aclass_advanced_sequencer_html"><div class="ttname"><a href="class_advanced_sequencer.html">AdvancedSequencer</a></div><div class="ttdoc">An enhanced MIDISequencer, able to directly load and play MIDI files and many more.</div><div class="ttdef"><b>Definition:</b> advancedsequencer.h:93</div></div>
<div class="ttc" id="aclass_advanced_sequencer_html_a02c61955046f7bf869cba7ab3572f0bb"><div class="ttname"><a href="class_advanced_sequencer.html#a02c61955046f7bf869cba7ab3572f0bb">AdvancedSequencer::GetTrackName</a></div><div class="ttdeci">std::string GetTrackName(unsigned int trk_num) const</div><div class="ttdoc">Returns the name of the given track.</div></div>
<div class="ttc" id="aclass_advanced_sequencer_html_a03737ce6199aad3fa22415143e3dc923"><div class="ttname"><a href="class_advanced_sequencer.html#a03737ce6199aad3fa22415143e3dc923">AdvancedSequencer::Stop</a></div><div class="ttdeci">virtual void Stop()</div><div class="ttdoc">Stops the sequencer playing.</div></div>
<div class="ttc" id="aclass_advanced_sequencer_html_a043b4a3c7f6af2eec5997103b58d8e2e"><div class="ttname"><a href="class_advanced_sequencer.html#a043b4a3c7f6af2eec5997103b58d8e2e">AdvancedSequencer::GoToZero</a></div><div class="ttdeci">virtual void GoToZero()</div><div class="ttdoc">Sets the current time to the beginning of the song.</div><div class="ttdef"><b>Definition:</b> advancedsequencer.h:255</div></div>
<div class="ttc" id="aclass_advanced_sequencer_html_a2c35ed918fe4cde537f6b280f0b67021"><div class="ttname"><a href="class_advanced_sequencer.html#a2c35ed918fe4cde537f6b280f0b67021">AdvancedSequencer::GetKeySigSharpsFlats</a></div><div class="ttdeci">int GetKeySigSharpsFlats() const</div><div class="ttdoc">Return the number of sharps or flats of the current key signature.</div></div>
<div class="ttc" id="aclass_advanced_sequencer_html_a43ca00f369a542d72bdb211b8dba681b"><div class="ttname"><a href="class_advanced_sequencer.html#a43ca00f369a542d72bdb211b8dba681b">AdvancedSequencer::Load</a></div><div class="ttdeci">virtual bool Load(const char *fname)</div><div class="ttdoc">Loads a MIDIFile into the internal MIDIMultiTrack.</div></div>
<div class="ttc" id="aclass_advanced_sequencer_html_a48e83ff1059f9f6db1dc57e7c7ab690a"><div class="ttname"><a href="class_advanced_sequencer.html#a48e83ff1059f9f6db1dc57e7c7ab690a">AdvancedSequencer::GetCurrentBeat</a></div><div class="ttdeci">unsigned int GetCurrentBeat() const</div><div class="ttdoc">Returns the number of current beat (first is 0).</div></div>
<div class="ttc" id="aclass_advanced_sequencer_html_a5494db52a1f10042904d12d7ea08be24"><div class="ttname"><a href="class_advanced_sequencer.html#a5494db52a1f10042904d12d7ea08be24">AdvancedSequencer::GetTrackProgram</a></div><div class="ttdeci">int GetTrackProgram(unsigned int trk_num) const</div><div class="ttdoc">Returns the current MIDI program (patch) for the given track (-1 if the program wasn't set at time 0)...</div></div>
<div class="ttc" id="aclass_advanced_sequencer_html_a749448bc18bf009a95efee51efa92a37"><div class="ttname"><a href="class_advanced_sequencer.html#a749448bc18bf009a95efee51efa92a37">AdvancedSequencer::GoToMeasure</a></div><div class="ttdeci">virtual bool GoToMeasure(int measure, int beat=0)</div><div class="ttdoc">Sets the current time to the given measure and beat.</div></div>
<div class="ttc" id="aclass_advanced_sequencer_html_a74e898a95ca0c58ffeed757a228c3c1f"><div class="ttname"><a href="class_advanced_sequencer.html#a74e898a95ca0c58ffeed757a228c3c1f">AdvancedSequencer::GetCurrentMarker</a></div><div class="ttdeci">std::string GetCurrentMarker() const</div><div class="ttdoc">Returns the current marker text.</div></div>
<div class="ttc" id="aclass_advanced_sequencer_html_a76b2f7b876472b13190e3984468ed5c1"><div class="ttname"><a href="class_advanced_sequencer.html#a76b2f7b876472b13190e3984468ed5c1">AdvancedSequencer::GetTimeSigDenominator</a></div><div class="ttdeci">int GetTimeSigDenominator() const</div><div class="ttdoc">Returns the denominator of current time signature.</div></div>
<div class="ttc" id="aclass_advanced_sequencer_html_a9333501791145f3972d5cb88131ddeea"><div class="ttname"><a href="class_advanced_sequencer.html#a9333501791145f3972d5cb88131ddeea">AdvancedSequencer::GetTimeSigNumerator</a></div><div class="ttdeci">int GetTimeSigNumerator() const</div><div class="ttdoc">Returns the numerator of current time signature.</div></div>
<div class="ttc" id="aclass_advanced_sequencer_html_a93b86bf991c34b5cdd94811ec3d99c52"><div class="ttname"><a href="class_advanced_sequencer.html#a93b86bf991c34b5cdd94811ec3d99c52">AdvancedSequencer::GetCurrentMeasure</a></div><div class="ttdeci">unsigned int GetCurrentMeasure() const</div><div class="ttdoc">Returns the current measure number (first is 0).</div></div>
<div class="ttc" id="aclass_advanced_sequencer_html_ab17fdddc2c8f8b6ce75bad0a42a6f741"><div class="ttname"><a href="class_advanced_sequencer.html#ab17fdddc2c8f8b6ce75bad0a42a6f741">AdvancedSequencer::GetKeySigMode</a></div><div class="ttdeci">int GetKeySigMode() const</div><div class="ttdoc">Returns the mode (major/minor) of the he current key signature.</div></div>
<div class="ttc" id="aclass_advanced_sequencer_html_ac2d59757fa501d81dd32d667e0a1dab3"><div class="ttname"><a href="class_advanced_sequencer.html#ac2d59757fa501d81dd32d667e0a1dab3">AdvancedSequencer::GetTrackVolume</a></div><div class="ttdeci">int GetTrackVolume(unsigned int trk_num) const</div><div class="ttdoc">Returns the current MIDI volume for the given track (-1 if volume wasn't set at time 0).</div></div>
<div class="ttc" id="aclass_advanced_sequencer_html_accdfac8e0bba5a4b8e12166805fc5d05"><div class="ttname"><a href="class_advanced_sequencer.html#accdfac8e0bba5a4b8e12166805fc5d05">AdvancedSequencer::GetTrackNoteCount</a></div><div class="ttdeci">int GetTrackNoteCount(unsigned int trk_num) const</div><div class="ttdoc">Returns the number of notes currently sounding on the given track (0 if the sequencer is not playing)...</div></div>
<div class="ttc" id="aclass_advanced_sequencer_html_adc5e10000e5237a16817cb8499885594"><div class="ttname"><a href="class_advanced_sequencer.html#adc5e10000e5237a16817cb8499885594">AdvancedSequencer::GetTrackChannel</a></div><div class="ttdeci">int GetTrackChannel(unsigned int trk_num)</div><div class="ttdoc">If the track has channel messages all with same channel returns the channel, otherwise -1.</div></div>
<div class="ttc" id="aclass_advanced_sequencer_html_ae08c2a2e96d5cdacc0324c0bc05a7266"><div class="ttname"><a href="class_advanced_sequencer.html#ae08c2a2e96d5cdacc0324c0bc05a7266">AdvancedSequencer::SetSMPTE</a></div><div class="ttdeci">bool SetSMPTE(SMPTE *s)</div><div class="ttdoc">Sets the parameters of the given SMPTE according to the loaded content.</div></div>
<div class="ttc" id="aclass_m_i_d_i_sequencer_g_u_i_event_html"><div class="ttname"><a href="class_m_i_d_i_sequencer_g_u_i_event.html">MIDISequencerGUIEvent</a></div><div class="ttdoc">Holds data for a message that the sequencer can send to the GUI to warn it when something happens.</div><div class="ttdef"><b>Definition:</b> notifier.h:54</div></div>
<div class="ttc" id="aclass_m_i_d_i_sequencer_g_u_i_event_html_a1b34906773ed466eae0a3bb60c4c6948a000515fd7a79de67c0ab8123fa8f938d"><div class="ttname"><a href="class_m_i_d_i_sequencer_g_u_i_event.html#a1b34906773ed466eae0a3bb60c4c6948a000515fd7a79de67c0ab8123fa8f938d">MIDISequencerGUIEvent::GROUP_TRACK_VOLUME</a></div><div class="ttdeci">@ GROUP_TRACK_VOLUME</div><div class="ttdoc">Volume change.</div><div class="ttdef"><b>Definition:</b> notifier.h:113</div></div>
<div class="ttc" id="aclass_m_i_d_i_sequencer_g_u_i_event_html_a1b34906773ed466eae0a3bb60c4c6948a9c9416ef2fbabf45e0f9f8f10f4644e1"><div class="ttname"><a href="class_m_i_d_i_sequencer_g_u_i_event.html#a1b34906773ed466eae0a3bb60c4c6948a9c9416ef2fbabf45e0f9f8f10f4644e1">MIDISequencerGUIEvent::GROUP_TRACK_PROGRAM</a></div><div class="ttdeci">@ GROUP_TRACK_PROGRAM</div><div class="ttdoc">Program change.</div><div class="ttdef"><b>Definition:</b> notifier.h:111</div></div>
<div class="ttc" id="aclass_m_i_d_i_sequencer_g_u_i_event_html_a3fa820a0bbd6b991d88206f59a9c88c7"><div class="ttname"><a href="class_m_i_d_i_sequencer_g_u_i_event.html#a3fa820a0bbd6b991d88206f59a9c88c7">MIDISequencerGUIEvent::GetGroup</a></div><div class="ttdeci">int GetGroup() const</div><div class="ttdoc">Returns the event group.</div><div class="ttdef"><b>Definition:</b> notifier.h:69</div></div>
<div class="ttc" id="aclass_m_i_d_i_sequencer_g_u_i_event_html_a4257dbe27fe3bee2bdf9535ce92621ed"><div class="ttname"><a href="class_m_i_d_i_sequencer_g_u_i_event.html#a4257dbe27fe3bee2bdf9535ce92621ed">MIDISequencerGUIEvent::GetItem</a></div><div class="ttdeci">int GetItem() const</div><div class="ttdoc">Returns the event item (i.e. the kind of the event).</div><div class="ttdef"><b>Definition:</b> notifier.h:74</div></div>
<div class="ttc" id="aclass_m_i_d_i_sequencer_g_u_i_event_html_a47a28b8312694f0896d956796af28b3dab14fb95ac30a2a4342557197569d0e55"><div class="ttname"><a href="class_m_i_d_i_sequencer_g_u_i_event.html#a47a28b8312694f0896d956796af28b3dab14fb95ac30a2a4342557197569d0e55">MIDISequencerGUIEvent::GROUP_TRANSPORT_BEAT</a></div><div class="ttdeci">@ GROUP_TRANSPORT_BEAT</div><div class="ttdoc">Beat marker.</div><div class="ttdef"><b>Definition:</b> notifier.h:103</div></div>
<div class="ttc" id="aclass_m_i_d_i_sequencer_g_u_i_event_html_a68501a04d503c33b892735f24d845208"><div class="ttname"><a href="class_m_i_d_i_sequencer_g_u_i_event.html#a68501a04d503c33b892735f24d845208">MIDISequencerGUIEvent::GetSubGroup</a></div><div class="ttdeci">int GetSubGroup() const</div><div class="ttdoc">Returns the event subgroup (only effective for GROUP_TRACK events, where it is the track of the event...</div><div class="ttdef"><b>Definition:</b> notifier.h:72</div></div>
<div class="ttc" id="aclass_m_i_d_i_sequencer_g_u_i_event_html_a7fcebce8bd576dae69af6eea66829af1a3d88b877bccb29dfbb6ef58ffd0e8d88"><div class="ttname"><a href="class_m_i_d_i_sequencer_g_u_i_event.html#a7fcebce8bd576dae69af6eea66829af1a3d88b877bccb29dfbb6ef58ffd0e8d88">MIDISequencerGUIEvent::GROUP_CONDUCTOR_TEMPO</a></div><div class="ttdeci">@ GROUP_CONDUCTOR_TEMPO</div><div class="ttdoc">Tempo change.</div><div class="ttdef"><b>Definition:</b> notifier.h:91</div></div>
<div class="ttc" id="aclass_m_i_d_i_sequencer_g_u_i_event_html_a7fcebce8bd576dae69af6eea66829af1a688de213c8da4bb424ca4dd39e7f921a"><div class="ttname"><a href="class_m_i_d_i_sequencer_g_u_i_event.html#a7fcebce8bd576dae69af6eea66829af1a688de213c8da4bb424ca4dd39e7f921a">MIDISequencerGUIEvent::GROUP_CONDUCTOR_KEYSIG</a></div><div class="ttdeci">@ GROUP_CONDUCTOR_KEYSIG</div><div class="ttdoc">Keysig change.</div><div class="ttdef"><b>Definition:</b> notifier.h:93</div></div>
<div class="ttc" id="aclass_m_i_d_i_sequencer_g_u_i_event_html_a7fcebce8bd576dae69af6eea66829af1a68a9a52ad19771e5dbe49b44ea10ff14"><div class="ttname"><a href="class_m_i_d_i_sequencer_g_u_i_event.html#a7fcebce8bd576dae69af6eea66829af1a68a9a52ad19771e5dbe49b44ea10ff14">MIDISequencerGUIEvent::GROUP_CONDUCTOR_TIMESIG</a></div><div class="ttdeci">@ GROUP_CONDUCTOR_TIMESIG</div><div class="ttdoc">Timesig change.</div><div class="ttdef"><b>Definition:</b> notifier.h:92</div></div>
<div class="ttc" id="aclass_m_i_d_i_sequencer_g_u_i_event_html_a7fcebce8bd576dae69af6eea66829af1aead78c04d9dae67a6a3c0e578a571174"><div class="ttname"><a href="class_m_i_d_i_sequencer_g_u_i_event.html#a7fcebce8bd576dae69af6eea66829af1aead78c04d9dae67a6a3c0e578a571174">MIDISequencerGUIEvent::GROUP_CONDUCTOR_MARKER</a></div><div class="ttdeci">@ GROUP_CONDUCTOR_MARKER</div><div class="ttdoc">Marker.</div><div class="ttdef"><b>Definition:</b> notifier.h:94</div></div>
<div class="ttc" id="aclass_m_i_d_i_sequencer_g_u_i_event_html_ab5fa5f0e49952c626a52256be4f4046ba775f5ad82bd9619f6ead0395f582fc46"><div class="ttname"><a href="class_m_i_d_i_sequencer_g_u_i_event.html#ab5fa5f0e49952c626a52256be4f4046ba775f5ad82bd9619f6ead0395f582fc46">MIDISequencerGUIEvent::GROUP_TRANSPORT</a></div><div class="ttdeci">@ GROUP_TRANSPORT</div><div class="ttdoc">Transport events (start, stop, etc)</div><div class="ttdef"><b>Definition:</b> notifier.h:83</div></div>
<div class="ttc" id="aclass_m_i_d_i_sequencer_g_u_i_event_html_ab5fa5f0e49952c626a52256be4f4046babff3fa2f9969989c6a4a5fe7d984db57"><div class="ttname"><a href="class_m_i_d_i_sequencer_g_u_i_event.html#ab5fa5f0e49952c626a52256be4f4046babff3fa2f9969989c6a4a5fe7d984db57">MIDISequencerGUIEvent::GROUP_ALL</a></div><div class="ttdeci">@ GROUP_ALL</div><div class="ttdoc">Generic group: used by the MIDISequencer to request a full GUI reset.</div><div class="ttdef"><b>Definition:</b> notifier.h:81</div></div>
<div class="ttc" id="aclass_m_i_d_i_sequencer_g_u_i_event_html_ab5fa5f0e49952c626a52256be4f4046bac5cb8cdd176707d0a4fdd38a62e6b57b"><div class="ttname"><a href="class_m_i_d_i_sequencer_g_u_i_event.html#ab5fa5f0e49952c626a52256be4f4046bac5cb8cdd176707d0a4fdd38a62e6b57b">MIDISequencerGUIEvent::GROUP_TRACK</a></div><div class="ttdeci">@ GROUP_TRACK</div><div class="ttdoc">Track events (the subgroup is the track of the event)</div><div class="ttdef"><b>Definition:</b> notifier.h:84</div></div>
<div class="ttc" id="aclass_m_i_d_i_sequencer_g_u_i_event_html_ab5fa5f0e49952c626a52256be4f4046bae25cb82717820b62d25caa2da1c040eb"><div class="ttname"><a href="class_m_i_d_i_sequencer_g_u_i_event.html#ab5fa5f0e49952c626a52256be4f4046bae25cb82717820b62d25caa2da1c040eb">MIDISequencerGUIEvent::GROUP_CONDUCTOR</a></div><div class="ttdeci">@ GROUP_CONDUCTOR</div><div class="ttdoc">Conductor events (time, tempo, etc)</div><div class="ttdef"><b>Definition:</b> notifier.h:82</div></div>
<div class="ttc" id="aclass_m_i_d_i_sequencer_g_u_i_notifier_win32_html"><div class="ttname"><a href="class_m_i_d_i_sequencer_g_u_i_notifier_win32.html">MIDISequencerGUINotifierWin32</a></div><div class="ttdoc">A MIDISequencerGUINotifier which sends messages to a Win32 window using the Windows PostMessage() fun...</div><div class="ttdef"><b>Definition:</b> notifier.h:227</div></div>
<div class="ttc" id="aclass_m_i_d_i_sequencer_html_a02771baa597331636944d40277ca9b29"><div class="ttname"><a href="class_m_i_d_i_sequencer.html#a02771baa597331636944d40277ca9b29">MIDISequencer::Play</a></div><div class="ttdeci">virtual void Play()</div><div class="ttdoc">This is an alias of Start().</div><div class="ttdef"><b>Definition:</b> sequencer.h:458</div></div>
<div class="ttc" id="aclass_m_i_d_i_sequencer_html_a45e72e67f1ed284ec5b7299a1915d482"><div class="ttname"><a href="class_m_i_d_i_sequencer.html#a45e72e67f1ed284ec5b7299a1915d482">MIDISequencer::GetCurrentTimeMs</a></div><div class="ttdeci">float GetCurrentTimeMs() const</div><div class="ttdoc">Returns current time in milliseconds; it is effective even during playback.</div></div>
<div class="ttc" id="aclass_m_i_d_i_sequencer_html_a6df1d00edce5769c9d19e75bc7e84e37"><div class="ttname"><a href="class_m_i_d_i_sequencer.html#a6df1d00edce5769c9d19e75bc7e84e37">MIDISequencer::GetState</a></div><div class="ttdeci">MIDISequencerState * GetState()</div><div class="ttdoc">Returns a pointer to the current MIDISequencerState (i.e.</div><div class="ttdef"><b>Definition:</b> sequencer.h:270</div></div>
<div class="ttc" id="aclass_m_i_d_i_sequencer_html_a84ae107786f698b599f2ff639059962c"><div class="ttname"><a href="class_m_i_d_i_sequencer.html#a84ae107786f698b599f2ff639059962c">MIDISequencer::GetNumTracks</a></div><div class="ttdeci">unsigned int GetNumTracks() const</div><div class="ttdoc">Returns the number of tracks of the multitrack.</div><div class="ttdef"><b>Definition:</b> sequencer.h:242</div></div>
<div class="ttc" id="aclass_m_i_d_i_sequencer_html_ac98258f043dcfd7c203a90c111564681"><div class="ttname"><a href="class_m_i_d_i_sequencer.html#ac98258f043dcfd7c203a90c111564681">MIDISequencer::GetTempoWithoutScale</a></div><div class="ttdeci">float GetTempoWithoutScale() const</div><div class="ttdoc">Returns current tempo (BPM) without scaling.</div><div class="ttdef"><b>Definition:</b> sequencer.h:246</div></div>
<div class="ttc" id="aclass_m_i_d_i_sequencer_state_html_a50ca0cd809e0ce28260cc7823d17b1e9"><div class="ttname"><a href="class_m_i_d_i_sequencer_state.html#a50ca0cd809e0ce28260cc7823d17b1e9">MIDISequencerState::keysig_sharpflat</a></div><div class="ttdeci">signed char keysig_sharpflat</div><div class="ttdoc">The current key signature accidents (.</div><div class="ttdef"><b>Definition:</b> sequencer.h:153</div></div>
<div class="ttc" id="aclass_m_i_d_i_sequencer_state_html_a777f0c2aaafcee4748842ab9a8087221"><div class="ttname"><a href="class_m_i_d_i_sequencer_state.html#a777f0c2aaafcee4748842ab9a8087221">MIDISequencerState::keysig_mode</a></div><div class="ttdeci">unsigned char keysig_mode</div><div class="ttdoc">Major mode (0) or minor (1)</div><div class="ttdef"><b>Definition:</b> sequencer.h:154</div></div>
<div class="ttc" id="aclass_s_m_p_t_e_html"><div class="ttname"><a href="class_s_m_p_t_e.html">SMPTE</a></div><div class="ttdoc">Performs conversions between number of samples, milliseconds and smpte format (hours::minutes::second...</div><div class="ttdef"><b>Definition:</b> smpte.h:69</div></div>
<div class="ttc" id="aclass_s_m_p_t_e_html_a37137632dea59d1c8e204317d10997ba"><div class="ttname"><a href="class_s_m_p_t_e.html#a37137632dea59d1c8e204317d10997ba">SMPTE::GetMinutes</a></div><div class="ttdeci">unsigned char GetMinutes()</div><div class="ttdoc">Returns the smpte minutes.</div></div>
<div class="ttc" id="aclass_s_m_p_t_e_html_a3d32fc85df132aa8d605bb15637ef268"><div class="ttname"><a href="class_s_m_p_t_e.html#a3d32fc85df132aa8d605bb15637ef268">SMPTE::GetSeconds</a></div><div class="ttdeci">unsigned char GetSeconds()</div><div class="ttdoc">Returns the smpte seconds.</div></div>
<div class="ttc" id="aclass_s_m_p_t_e_html_a4a5d3501d7b4a0cdee1a0fcd837e2e09"><div class="ttname"><a href="class_s_m_p_t_e.html#a4a5d3501d7b4a0cdee1a0fcd837e2e09">SMPTE::GetHours</a></div><div class="ttdeci">unsigned char GetHours()</div><div class="ttdoc">Returns the smpte minutes.</div></div>
<div class="ttc" id="aclass_s_m_p_t_e_html_a5cfe76073fc4071917a18ad7b04d5032"><div class="ttname"><a href="class_s_m_p_t_e.html#a5cfe76073fc4071917a18ad7b04d5032">SMPTE::GetFrames</a></div><div class="ttdeci">unsigned char GetFrames()</div><div class="ttdoc">Returns the smpte frames.</div></div>
<div class="ttc" id="aclass_s_m_p_t_e_html_a96c08c9e2c3ab7ad03dd6fcd29dcfbd3"><div class="ttname"><a href="class_s_m_p_t_e.html#a96c08c9e2c3ab7ad03dd6fcd29dcfbd3">SMPTE::SetMilliSeconds</a></div><div class="ttdeci">void SetMilliSeconds(unsigned long msecs)</div><div class="ttdoc">Loads the SMPTE with the given time in milliseconds.</div></div>
<div class="ttc" id="agroup___g_l_o_b_a_l_s_html_ga54104810bff7aed5999f7760c6f02bfb"><div class="ttname"><a href="group___g_l_o_b_a_l_s.html#ga54104810bff7aed5999f7760c6f02bfb">GetGMDrumkitName</a></div><div class="ttdeci">const char * GetGMDrumkitName(unsigned char number, int format=0)</div><div class="ttdoc">Returns a readable name for a GM program number on channel 10 (drumkit).</div></div>
<div class="ttc" id="agroup___g_l_o_b_a_l_s_html_gae1b0db642ea9cd8faaa70761a37b7fb6"><div class="ttname"><a href="group___g_l_o_b_a_l_s.html#gae1b0db642ea9cd8faaa70761a37b7fb6">KeyName</a></div><div class="ttdeci">const char * KeyName(signed char sharp_flats, unsigned char major_minor, bool uppercase=true, bool space=false, bool use_Mm=true)</div><div class="ttdoc">Converts a MIDI key signature into a readable form.</div></div>
<div class="ttc" id="agroup___g_l_o_b_a_l_s_html_gaf67129a09f3cfe53120570ae984c3ed4"><div class="ttname"><a href="group___g_l_o_b_a_l_s.html#gaf67129a09f3cfe53120570ae984c3ed4">GetGMProgramName</a></div><div class="ttdeci">const char * GetGMProgramName(unsigned char number, int format=0)</div><div class="ttdoc">Returns a readable name for a GM program number.</div></div>
</div><!-- fragment --> </div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.2 </li>
  </ul>
</div>
</body>
</html>
