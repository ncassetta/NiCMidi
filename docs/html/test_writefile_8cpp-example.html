<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>NiCMidi: test_writefile.cpp</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">NiCMidi
   &#160;<span id="projectnumber">1.0</span>
   </div>
   <div id="projectbrief">A MIDI library derived from J.D.Koftinoff jdksmidi</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('test_writefile_8cpp-example.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<div class="title">test_writefile.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<p>A nice little example demonstrating how to edit the MIDIMultitrack embedded in an <a class="el" href="class_advanced_sequencer.html" title="An enhanced MIDISequencer, able to directly load and play MIDI files and many more.">AdvancedSequencer</a>, play its content and then save it in a MIDI file.</p>
<div class="fragment"><div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment"> *   Example file for NiCMidi - A C++ Class Library for MIDI</span></div>
<div class="line"><span class="comment"> *</span></div>
<div class="line"><span class="comment"> *   Copyright (C) 2020  Nicola Cassetta</span></div>
<div class="line"><span class="comment"> *   https://github.com/ncassetta/NiCMidi</span></div>
<div class="line"><span class="comment"> *</span></div>
<div class="line"><span class="comment"> *   This file is part of NiCMidi.</span></div>
<div class="line"><span class="comment"> *</span></div>
<div class="line"><span class="comment"> *   NiCMidi is free software: you can redistribute it and/or modify</span></div>
<div class="line"><span class="comment"> *   it under the terms of the GNU General Public License as published by</span></div>
<div class="line"><span class="comment"> *   the Free Software Foundation, either version 3 of the License, or</span></div>
<div class="line"><span class="comment"> *   (at your option) any later version.</span></div>
<div class="line"><span class="comment"> *</span></div>
<div class="line"><span class="comment"> *   NiCMidi is distributed in the hope that it will be useful,</span></div>
<div class="line"><span class="comment"> *   but WITHOUT ANY WARRANTY; without even the implied warranty of</span></div>
<div class="line"><span class="comment"> *   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span></div>
<div class="line"><span class="comment"> *   GNU General Public License for more details.</span></div>
<div class="line"><span class="comment"> *</span></div>
<div class="line"><span class="comment"> *   You should have received a copy of the GNU General Public License</span></div>
<div class="line"><span class="comment"> *   along with NiCMidi.  If not, see &lt;http://www.gnu.org/licenses/&gt;.</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment">  A nice little example demonstrating how to edit the MIDIMultitrack</span></div>
<div class="line"><span class="comment">  embedded in an AdvancedSequencer, play its content and then save</span></div>
<div class="line"><span class="comment">  it in a MIDI file.</span></div>
<div class="line"><span class="comment">*/</span></div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &lt;string&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &quot;../include/advancedsequencer.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;../include/filewritemultitrack.h&quot;</span>     <span class="comment">// for WriteMIDIFile() function</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">using namespace </span>std;</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="comment">// A struct holding data for a note</span></div>
<div class="line"><span class="keyword">struct </span>note_data {</div>
<div class="line">    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>   note;</div>
<div class="line">    <a class="code" href="group___g_l_o_b_a_l_s.html#ga1f54d7f8d2631dc21e78751494337221">MIDIClockTime</a>   length;</div>
<div class="line">    <a class="code" href="group___g_l_o_b_a_l_s.html#ga1f54d7f8d2631dc21e78751494337221">MIDIClockTime</a>   time;</div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="comment">//                        G L O B A L S                         //</span></div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">// The default ctor creates an AdvancedSequencer with 17 empty tracks (1 master + 16 channel)</span></div>
<div class="line"><a name="_a0"></a><a class="code" href="class_advanced_sequencer.html">AdvancedSequencer</a> sequencer;</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Shown on opening</span></div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> introstring[] =</div>
<div class="line"><span class="stringliteral">&quot;This example creates an AdvancedSequencer object, gets its MIDIMultiTrack and edits it\n\</span></div>
<div class="line"><span class="stringliteral">inserting notes and other MIDI messages.\n\</span></div>
<div class="line"><span class="stringliteral">Then saves the MIDIMultiTrack into a MIDIFile\n\n&quot;</span>;</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Data for &quot;Twinkle twinkle&quot;, track 1</span></div>
<div class="line"><span class="keywordtype">int</span> track1_len = 14;</div>
<div class="line">note_data track1[] = {</div>
<div class="line">    { 60, 110, 480 }, { 60, 110, 600 }, { 67, 110, 720 }, { 67, 110, 840 }, { 69, 110, 960 }, { 69, 110, 1080 },</div>
<div class="line">    { 67, 230, 1200 }, { 65, 110, 1440 }, { 65, 110, 1560 }, { 64, 110, 1680 }, { 64, 110, 1800 },</div>
<div class="line">    { 62, 110, 1920 }, { 62, 110, 2040 }, { 60, 210, 2160 }</div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Data for &quot;Twinkle twinkle&quot;, track 2</span></div>
<div class="line"><span class="keywordtype">int</span> track2_len = 10;</div>
<div class="line">note_data track2[] = {</div>
<div class="line">    { 48, 210, 480 }, { 48, 210, 720 }, { 53, 110, 960 }, { 53, 110, 1080 }, { 48, 210, 1200 }, { 50, 210, 1440 },</div>
<div class="line">    { 48, 210, 1680 }, { 43, 110, 1920 }, { 43, 110, 2040 }, { 48, 210, 2160 }</div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Data for &quot;Twinkle twinkle&quot;, track 3</span></div>
<div class="line"><span class="keywordtype">int</span> track3_len = 47;</div>
<div class="line">note_data track3[] = {</div>
<div class="line">    { 35, 15, 480 }, { 42, 15, 540 }, { 38, 15, 600 }, { 42, 15, 600 }, { 35, 15, 660 }, { 42, 15, 660 },</div>
<div class="line">    { 35, 15, 720 }, { 42, 15, 720}, { 42, 15, 780 }, { 38, 15, 840 }, { 42, 15, 840}, { 42, 15, 900 },</div>
<div class="line">    { 35, 15, 960 }, { 42, 15, 1020 }, { 38, 15, 1080 }, { 42, 15, 1080 }, { 35, 15, 1140 }, { 42, 15, 1140},</div>
<div class="line">    { 35, 15, 1200 }, { 42, 15, 1200}, { 42, 15, 1260 }, { 38, 15, 1320 }, { 42, 15, 1320 }, { 46, 15, 1380 },</div>
<div class="line">    { 35, 15, 1440 }, { 42, 15, 1500 }, { 38, 15, 1560 }, { 42, 15, 1560 }, { 35, 15, 1620 }, { 42, 15, 1620 },</div>
<div class="line">    { 35, 15, 1680 }, { 42, 15, 1680 }, { 42, 15, 1740 }, { 38, 15, 1800 }, { 42, 15, 1800 }, { 42, 15, 1860 },</div>
<div class="line">    { 35, 15, 1920 }, { 42, 15, 1980 }, { 38, 15, 2040 }, { 42, 15, 2040 }, { 35, 15, 2100 }, { 42, 15, 2100 },</div>
<div class="line">    { 35, 15, 2160 }, { 42, 15, 2160 }, { 42, 15, 2220 }, { 35, 15, 2280 }, { 49, 240, 2280 }</div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="comment">//                              M A I N                         //</span></div>
<div class="line"><span class="comment"></span> </div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> main( <span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> **argv ) {</div>
<div class="line">    <span class="comment">// gets the address of the sequencer MIDIMultiTrack, so we can edit it</span></div>
<div class="line">    <a name="_a1"></a><a class="code" href="class_m_i_d_i_multi_track.html">MIDIMultiTrack</a>* tracks = sequencer.<a name="a2"></a><a class="code" href="class_m_i_d_i_sequencer.html#abe062deffde109507213c91e42cb2b7f">GetMultiTrack</a>();</div>
<div class="line">    <a name="_a3"></a><a class="code" href="class_m_i_d_i_track.html">MIDITrack</a>* trk;</div>
<div class="line">    <span class="comment">// the constructor creates an undefined (NoOp) message with time 0</span></div>
<div class="line">    <a name="_a4"></a><a class="code" href="class_m_i_d_i_timed_message.html">MIDITimedMessage</a> msg;</div>
<div class="line"> </div>
<div class="line">    cout &lt;&lt; introstring;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// this is a joke: the multitrack is now empty</span></div>
<div class="line">    cout &lt;&lt; <span class="stringliteral">&quot;\n\nNow the MultiTrack is empty: press &lt;ENTER&gt; to play nothing :-) ...&quot;</span>;</div>
<div class="line">    cin.get();</div>
<div class="line">    cout &lt;&lt; <span class="stringliteral">&quot;Playing ...&quot;</span>;</div>
<div class="line">    sequencer.<a name="a5"></a><a class="code" href="class_m_i_d_i_sequencer.html#a02771baa597331636944d40277ca9b29">Play</a>();</div>
<div class="line">    <span class="keywordflow">while</span> (sequencer.<a name="a6"></a><a class="code" href="class_m_i_d_i_tick_component.html#a9456c1ce1d59df3b92b37e904babdb52">IsPlaying</a>())</div>
<div class="line">        <a name="a7"></a><a class="code" href="class_m_i_d_i_timer.html#adbf80f5b6708bf6f84b3d354aa006bae">MIDITimer::Wait</a>(50);</div>
<div class="line">    cout &lt;&lt; <span class="stringliteral">&quot;    Stop!\n&quot;</span>;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// now trk points to the master track (track 0 of the multitrack)</span></div>
<div class="line">    trk = tracks-&gt;<a name="a8"></a><a class="code" href="class_m_i_d_i_multi_track.html#aedb760b43a8134b20c8460f113e0289f">GetTrack</a>(0);</div>
<div class="line"> </div>
<div class="line">    msg.<a name="a9"></a><a class="code" href="class_m_i_d_i_message.html#a2c7185c1ebbe6294adb6b2d142696c51">SetTimeSig</a>(4, 4);           <span class="comment">// remember that the message time is 0</span></div>
<div class="line">    trk-&gt;<a name="a10"></a><a class="code" href="class_m_i_d_i_track.html#a5af064d70942ca6dce6a328242a92ffa">InsertEvent</a>(msg);          <span class="comment">// inserts the time signature (4/4)</span></div>
<div class="line">    msg.<a name="a11"></a><a class="code" href="class_m_i_d_i_message.html#ae2c33229914670d3320e9db69d26260a">SetKeySig</a>(0, 0);</div>
<div class="line">    trk-&gt;<a class="code" href="class_m_i_d_i_track.html#a5af064d70942ca6dce6a328242a92ffa">InsertEvent</a>(msg);          <span class="comment">// inserts the key signature (CM)</span></div>
<div class="line">    msg.<a name="a12"></a><a class="code" href="class_m_i_d_i_message.html#a74a6ec945d0ce938c1da2d2e36e196b4">SetTempo</a>(100.0);</div>
<div class="line">    trk-&gt;<a class="code" href="class_m_i_d_i_track.html#a5af064d70942ca6dce6a328242a92ffa">InsertEvent</a>(msg);          <span class="comment">// inserts the tempo</span></div>
<div class="line"> </div>
<div class="line">    <span class="comment">// now trk points to track 1, we&#39;ll use it for MIDI channel 1</span></div>
<div class="line">    trk = tracks-&gt;<a class="code" href="class_m_i_d_i_multi_track.html#aedb760b43a8134b20c8460f113e0289f">GetTrack</a>(1);</div>
<div class="line">    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> channel = 0;      <span class="comment">// MIDI channel 1</span></div>
<div class="line"> </div>
<div class="line">    msg.<a name="a13"></a><a class="code" href="class_m_i_d_i_message.html#a7edc0209b59a09b4d50d8dad9da89589">SetProgramChange</a>(channel, 11);</div>
<div class="line">    trk-&gt;<a class="code" href="class_m_i_d_i_track.html#a5af064d70942ca6dce6a328242a92ffa">InsertEvent</a>(msg);          <span class="comment">// inserts the program change at time 0</span></div>
<div class="line">    msg.<a name="a14"></a><a class="code" href="class_m_i_d_i_message.html#a1a8861486a6a902064b1295880c5eb55">SetVolumeChange</a>(channel, 110);</div>
<div class="line">    trk-&gt;<a class="code" href="class_m_i_d_i_track.html#a5af064d70942ca6dce6a328242a92ffa">InsertEvent</a>(msg);          <span class="comment">// inserts the track volume</span></div>
<div class="line">    <span class="comment">// and now inserts all the notes, taking them from our track1[] array</span></div>
<div class="line">    <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; track1_len; i++) {</div>
<div class="line">        msg.<a name="a15"></a><a class="code" href="class_m_i_d_i_message.html#aacdcc337086ad7f19b40b133021c73da">SetNoteOn</a>(channel, track1[i].note, 100);</div>
<div class="line">        msg.<a name="a16"></a><a class="code" href="class_m_i_d_i_timed_message.html#a8620466e69bd0a50b9dead94ec9f554f">SetTime</a>(track1[i].time);</div>
<div class="line">        trk-&gt;<a name="a17"></a><a class="code" href="class_m_i_d_i_track.html#a7eac7598842402e8b2dd900bb0e484ba">InsertNote</a>(msg, track1[i].length);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// When you edit the AdvancedSequencer multitrack you must update the</span></div>
<div class="line">    <span class="comment">// sequencer parameters before playing: this does the job</span></div>
<div class="line">    sequencer.<a name="a18"></a><a class="code" href="class_advanced_sequencer.html#ab1ddc408a7cd0205bf69d7f1cffb9d1e">UpdateStatus</a>();</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// now we can play track 1 only</span></div>
<div class="line">    cout &lt;&lt; <span class="stringliteral">&quot;\n\nNow track 1 has notes: press &lt;ENTER&gt; to play ...&quot;</span>;</div>
<div class="line">    cin.get();</div>
<div class="line">    cout &lt;&lt; <span class="stringliteral">&quot;Playing ...&quot;</span>;</div>
<div class="line">    sequencer.<a class="code" href="class_m_i_d_i_sequencer.html#a02771baa597331636944d40277ca9b29">Play</a>();</div>
<div class="line">    <span class="keywordflow">while</span> (sequencer.<a class="code" href="class_m_i_d_i_tick_component.html#a9456c1ce1d59df3b92b37e904babdb52">IsPlaying</a>())</div>
<div class="line">        <a class="code" href="class_m_i_d_i_timer.html#adbf80f5b6708bf6f84b3d354aa006bae">MIDITimer::Wait</a>(50);</div>
<div class="line">    cout &lt;&lt; <span class="stringliteral">&quot;    Stop!\n&quot;</span>;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// now do the same for track 2 (bass, channel 2)</span></div>
<div class="line">    trk = tracks-&gt;<a class="code" href="class_m_i_d_i_multi_track.html#aedb760b43a8134b20c8460f113e0289f">GetTrack</a>(2);</div>
<div class="line">    channel = 1;</div>
<div class="line"> </div>
<div class="line">    msg.<a name="a19"></a><a class="code" href="class_m_i_d_i_timed_message.html#a6019bd26ec3f8c0328fe4effdd4a763c">Clear</a>();                    <span class="comment">// resets the message</span></div>
<div class="line">    msg.<a class="code" href="class_m_i_d_i_message.html#a7edc0209b59a09b4d50d8dad9da89589">SetProgramChange</a>(channel, 33);</div>
<div class="line">    trk-&gt;<a class="code" href="class_m_i_d_i_track.html#a5af064d70942ca6dce6a328242a92ffa">InsertEvent</a>(msg);</div>
<div class="line">    msg.<a class="code" href="class_m_i_d_i_message.html#a1a8861486a6a902064b1295880c5eb55">SetVolumeChange</a>(channel, 90);</div>
<div class="line">    trk-&gt;<a class="code" href="class_m_i_d_i_track.html#a5af064d70942ca6dce6a328242a92ffa">InsertEvent</a>(msg);</div>
<div class="line">    <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; track2_len; i++) {</div>
<div class="line">        msg.<a class="code" href="class_m_i_d_i_message.html#aacdcc337086ad7f19b40b133021c73da">SetNoteOn</a>(channel, track2[i].note, 100);</div>
<div class="line">        msg.<a class="code" href="class_m_i_d_i_timed_message.html#a8620466e69bd0a50b9dead94ec9f554f">SetTime</a>(track2[i].time);</div>
<div class="line">        trk-&gt;<a class="code" href="class_m_i_d_i_track.html#a7eac7598842402e8b2dd900bb0e484ba">InsertNote</a>(msg, track2[i].length);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    sequencer.<a class="code" href="class_advanced_sequencer.html#ab1ddc408a7cd0205bf69d7f1cffb9d1e">UpdateStatus</a>();</div>
<div class="line">    sequencer.<a name="a20"></a><a class="code" href="class_advanced_sequencer.html#a043b4a3c7f6af2eec5997103b58d8e2e">GoToZero</a>();           <span class="comment">// rewinds the sequencer</span></div>
<div class="line"> </div>
<div class="line">    cout &lt;&lt; <span class="stringliteral">&quot;\n\nNow track 2 also has notes: press &lt;ENTER&gt; to play ...&quot;</span>;</div>
<div class="line">    cin.get();</div>
<div class="line">    cout &lt;&lt; <span class="stringliteral">&quot;Playing ...&quot;</span>;</div>
<div class="line">    sequencer.<a class="code" href="class_m_i_d_i_sequencer.html#a02771baa597331636944d40277ca9b29">Play</a>();</div>
<div class="line">    <span class="keywordflow">while</span> (sequencer.<a class="code" href="class_m_i_d_i_tick_component.html#a9456c1ce1d59df3b92b37e904babdb52">IsPlaying</a>())</div>
<div class="line">        <a class="code" href="class_m_i_d_i_timer.html#adbf80f5b6708bf6f84b3d354aa006bae">MIDITimer::Wait</a>(50);</div>
<div class="line">    cout &lt;&lt; <span class="stringliteral">&quot;    Stop!\n&quot;</span>;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// ... and 3 (percussion, channel 10)</span></div>
<div class="line">    trk = tracks-&gt;<a class="code" href="class_m_i_d_i_multi_track.html#aedb760b43a8134b20c8460f113e0289f">GetTrack</a>(3);</div>
<div class="line">    channel = 9;</div>
<div class="line"> </div>
<div class="line">    msg.<a class="code" href="class_m_i_d_i_timed_message.html#a6019bd26ec3f8c0328fe4effdd4a763c">Clear</a>();</div>
<div class="line">    <span class="comment">//msg.SetProgramChange(channel, 33);    // uncomment these if your device doesn&#39;t sets</span></div>
<div class="line">    <span class="comment">//trk-&gt;InsertEvent(msg);                // automatically the drums on channel 10</span></div>
<div class="line">    msg.<a class="code" href="class_m_i_d_i_message.html#a1a8861486a6a902064b1295880c5eb55">SetVolumeChange</a>(channel, 120);</div>
<div class="line">    trk-&gt;<a class="code" href="class_m_i_d_i_track.html#a5af064d70942ca6dce6a328242a92ffa">InsertEvent</a>(msg);</div>
<div class="line">    <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; track3_len; i++) {</div>
<div class="line">        msg.<a class="code" href="class_m_i_d_i_message.html#aacdcc337086ad7f19b40b133021c73da">SetNoteOn</a>(channel, track3[i].note, 100);</div>
<div class="line">        msg.<a class="code" href="class_m_i_d_i_timed_message.html#a8620466e69bd0a50b9dead94ec9f554f">SetTime</a>(track3[i].time);</div>
<div class="line">        trk-&gt;<a class="code" href="class_m_i_d_i_track.html#a7eac7598842402e8b2dd900bb0e484ba">InsertNote</a>(msg, track3[i].length);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    sequencer.<a class="code" href="class_advanced_sequencer.html#ab1ddc408a7cd0205bf69d7f1cffb9d1e">UpdateStatus</a>();</div>
<div class="line">    sequencer.<a class="code" href="class_advanced_sequencer.html#a043b4a3c7f6af2eec5997103b58d8e2e">GoToZero</a>();</div>
<div class="line"> </div>
<div class="line">    cout &lt;&lt; <span class="stringliteral">&quot;\n\nNow there is also the drumset: press &lt;ENTER&gt; to play ...&quot;</span>;</div>
<div class="line">    cin.get();</div>
<div class="line">    cout &lt;&lt; <span class="stringliteral">&quot;Playing ...&quot;</span>;</div>
<div class="line">    sequencer.<a class="code" href="class_m_i_d_i_sequencer.html#a02771baa597331636944d40277ca9b29">Play</a>();</div>
<div class="line">    <span class="keywordflow">while</span> (sequencer.<a class="code" href="class_m_i_d_i_tick_component.html#a9456c1ce1d59df3b92b37e904babdb52">IsPlaying</a>())</div>
<div class="line">        <a class="code" href="class_m_i_d_i_timer.html#adbf80f5b6708bf6f84b3d354aa006bae">MIDITimer::Wait</a>(50);</div>
<div class="line">    cout &lt;&lt; <span class="stringliteral">&quot;    Stop\n&quot;</span>;</div>
<div class="line"> </div>
<div class="line">    cout &lt;&lt; <span class="stringliteral">&quot;Enter \&quot;y\&quot; if you want to save the file, something else to exit&quot;</span>;</div>
<div class="line">    <span class="keywordtype">char</span> ch;</div>
<div class="line">    cin &gt;&gt; ch;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (tolower(ch) == <span class="charliteral">&#39;y&#39;</span>) {</div>
<div class="line">        cout &lt;&lt; <span class="stringliteral">&quot;\n\nNow choose the name of your MIDI file (type the .mid too) ...\n&quot;</span>;</div>
<div class="line">        <span class="keywordtype">char</span> filename[1024];</div>
<div class="line">        cin &gt;&gt; filename;</div>
<div class="line">        cout &lt;&lt; <span class="stringliteral">&quot;... and the MIDI file format (0 = All in one track, 1 = Separate tracks)\n&quot;</span>;</div>
<div class="line">        <span class="keywordtype">int</span> format;</div>
<div class="line">        cin &gt;&gt; format;</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// the last parameter strips out (in case of MIDI format 1) the unused tracks</span></div>
<div class="line">        <span class="keywordflow">if</span> (<a name="a21"></a><a class="code" href="group___g_l_o_b_a_l_s.html#ga5992348e94d8fd82fd19323f27e6172c">WriteMIDIFile</a>(filename, format, tracks, <span class="keyword">true</span>))</div>
<div class="line">            cout &lt;&lt; <span class="stringliteral">&quot;MIDI file &quot;</span> &lt;&lt; filename &lt;&lt; <span class="stringliteral">&quot; saved\n&quot;</span>;</div>
<div class="line">        <span class="keywordflow">else</span></div>
<div class="line">            cout &lt;&lt; <span class="stringliteral">&quot;Error writing the file\n&quot;</span>;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Try to load the file you have created into your favourite sequencer!</span></div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> EXIT_SUCCESS;</div>
<div class="line">}</div>
<div class="ttc" id="aclass_advanced_sequencer_html"><div class="ttname"><a href="class_advanced_sequencer.html">AdvancedSequencer</a></div><div class="ttdoc">An enhanced MIDISequencer, able to directly load and play MIDI files and many more.</div><div class="ttdef"><b>Definition:</b> advancedsequencer.h:93</div></div>
<div class="ttc" id="aclass_advanced_sequencer_html_a043b4a3c7f6af2eec5997103b58d8e2e"><div class="ttname"><a href="class_advanced_sequencer.html#a043b4a3c7f6af2eec5997103b58d8e2e">AdvancedSequencer::GoToZero</a></div><div class="ttdeci">virtual void GoToZero()</div><div class="ttdoc">Sets the current time to the beginning of the song.</div><div class="ttdef"><b>Definition:</b> advancedsequencer.h:254</div></div>
<div class="ttc" id="aclass_advanced_sequencer_html_ab1ddc408a7cd0205bf69d7f1cffb9d1e"><div class="ttname"><a href="class_advanced_sequencer.html#ab1ddc408a7cd0205bf69d7f1cffb9d1e">AdvancedSequencer::UpdateStatus</a></div><div class="ttdeci">virtual void UpdateStatus()</div><div class="ttdoc">This should be used to update the sequencer state after editing the multitrack.</div></div>
<div class="ttc" id="aclass_m_i_d_i_message_html_a1a8861486a6a902064b1295880c5eb55"><div class="ttname"><a href="class_m_i_d_i_message.html#a1a8861486a6a902064b1295880c5eb55">MIDIMessage::SetVolumeChange</a></div><div class="ttdeci">void SetVolumeChange(unsigned char chan, unsigned char val)</div><div class="ttdoc">Makes the message a volume change (control == 0x07) message with given channel and value.</div><div class="ttdef"><b>Definition:</b> msg.h:254</div></div>
<div class="ttc" id="aclass_m_i_d_i_message_html_a2c7185c1ebbe6294adb6b2d142696c51"><div class="ttname"><a href="class_m_i_d_i_message.html#a2c7185c1ebbe6294adb6b2d142696c51">MIDIMessage::SetTimeSig</a></div><div class="ttdeci">void SetTimeSig(unsigned char num, unsigned char den, unsigned char clocks_per_metronome=0, unsigned char num_32_per_quarter=8)</div><div class="ttdoc">Makes the message a time signature meta-message with given time (numerator and denominator).</div></div>
<div class="ttc" id="aclass_m_i_d_i_message_html_a74a6ec945d0ce938c1da2d2e36e196b4"><div class="ttname"><a href="class_m_i_d_i_message.html#a74a6ec945d0ce938c1da2d2e36e196b4">MIDIMessage::SetTempo</a></div><div class="ttdeci">void SetTempo(double tempo_bpm)</div><div class="ttdoc">Makes the message a tempo change meta-message with given tempo (in bpm).</div></div>
<div class="ttc" id="aclass_m_i_d_i_message_html_a7edc0209b59a09b4d50d8dad9da89589"><div class="ttname"><a href="class_m_i_d_i_message.html#a7edc0209b59a09b4d50d8dad9da89589">MIDIMessage::SetProgramChange</a></div><div class="ttdeci">void SetProgramChange(unsigned char chan, unsigned char prog)</div><div class="ttdoc">Makes the message a program change message with given channel and program.</div></div>
<div class="ttc" id="aclass_m_i_d_i_message_html_aacdcc337086ad7f19b40b133021c73da"><div class="ttname"><a href="class_m_i_d_i_message.html#aacdcc337086ad7f19b40b133021c73da">MIDIMessage::SetNoteOn</a></div><div class="ttdeci">void SetNoteOn(unsigned char chan, unsigned char note, unsigned char vel)</div><div class="ttdoc">Makes the message a note on message with given channel, note and velocity.</div></div>
<div class="ttc" id="aclass_m_i_d_i_message_html_ae2c33229914670d3320e9db69d26260a"><div class="ttname"><a href="class_m_i_d_i_message.html#ae2c33229914670d3320e9db69d26260a">MIDIMessage::SetKeySig</a></div><div class="ttdeci">void SetKeySig(signed char sharp_flats, unsigned char major_minor)</div><div class="ttdoc">Makes the message a key signature meta-message with given accidents and mode.</div><div class="ttdef"><b>Definition:</b> msg.h:323</div></div>
<div class="ttc" id="aclass_m_i_d_i_multi_track_html"><div class="ttname"><a href="class_m_i_d_i_multi_track.html">MIDIMultiTrack</a></div><div class="ttdoc">Holds an array of pointers to MIDITrack objects to be played simultaneously.</div><div class="ttdef"><b>Definition:</b> multitrack.h:50</div></div>
<div class="ttc" id="aclass_m_i_d_i_multi_track_html_aedb760b43a8134b20c8460f113e0289f"><div class="ttname"><a href="class_m_i_d_i_multi_track.html#aedb760b43a8134b20c8460f113e0289f">MIDIMultiTrack::GetTrack</a></div><div class="ttdeci">MIDITrack * GetTrack(int trk_num)</div><div class="ttdoc">Returns the pointer to the track.</div><div class="ttdef"><b>Definition:</b> multitrack.h:79</div></div>
<div class="ttc" id="aclass_m_i_d_i_sequencer_html_a02771baa597331636944d40277ca9b29"><div class="ttname"><a href="class_m_i_d_i_sequencer.html#a02771baa597331636944d40277ca9b29">MIDISequencer::Play</a></div><div class="ttdeci">virtual void Play()</div><div class="ttdoc">This is an alias of Start().</div><div class="ttdef"><b>Definition:</b> sequencer.h:451</div></div>
<div class="ttc" id="aclass_m_i_d_i_sequencer_html_abe062deffde109507213c91e42cb2b7f"><div class="ttname"><a href="class_m_i_d_i_sequencer.html#abe062deffde109507213c91e42cb2b7f">MIDISequencer::GetMultiTrack</a></div><div class="ttdeci">MIDIMultiTrack * GetMultiTrack()</div><div class="ttdoc">Returns a pointer to the internal MIDIMultiTrack.</div><div class="ttdef"><b>Definition:</b> sequencer.h:228</div></div>
<div class="ttc" id="aclass_m_i_d_i_tick_component_html_a9456c1ce1d59df3b92b37e904babdb52"><div class="ttname"><a href="class_m_i_d_i_tick_component.html#a9456c1ce1d59df3b92b37e904babdb52">MIDITickComponent::IsPlaying</a></div><div class="ttdeci">bool IsPlaying() const</div><div class="ttdoc">Returns true if the callback procedure is active.</div><div class="ttdef"><b>Definition:</b> tick.h:92</div></div>
<div class="ttc" id="aclass_m_i_d_i_timed_message_html"><div class="ttname"><a href="class_m_i_d_i_timed_message.html">MIDITimedMessage</a></div><div class="ttdoc">The MIDITimedMessage class inherits from the MIDIMessage and represents a message associated with a s...</div><div class="ttdef"><b>Definition:</b> msg.h:378</div></div>
<div class="ttc" id="aclass_m_i_d_i_timed_message_html_a6019bd26ec3f8c0328fe4effdd4a763c"><div class="ttname"><a href="class_m_i_d_i_timed_message.html#a6019bd26ec3f8c0328fe4effdd4a763c">MIDITimedMessage::Clear</a></div><div class="ttdeci">virtual void Clear()</div><div class="ttdoc">Resets the message, frees the MIDISystemExclusive pointer and sets the time to 0.</div></div>
<div class="ttc" id="aclass_m_i_d_i_timed_message_html_a8620466e69bd0a50b9dead94ec9f554f"><div class="ttname"><a href="class_m_i_d_i_timed_message.html#a8620466e69bd0a50b9dead94ec9f554f">MIDITimedMessage::SetTime</a></div><div class="ttdeci">void SetTime(MIDIClockTime t)</div><div class="ttdoc">Sets the MIDIClockTime associated with the message.</div><div class="ttdef"><b>Definition:</b> msg.h:406</div></div>
<div class="ttc" id="aclass_m_i_d_i_timer_html_adbf80f5b6708bf6f84b3d354aa006bae"><div class="ttname"><a href="class_m_i_d_i_timer.html#adbf80f5b6708bf6f84b3d354aa006bae">MIDITimer::Wait</a></div><div class="ttdeci">static void Wait(unsigned int msecs)</div><div class="ttdoc">Stops the calling thread for the given number of milliseconds.</div><div class="ttdef"><b>Definition:</b> timer.h:109</div></div>
<div class="ttc" id="aclass_m_i_d_i_track_html"><div class="ttname"><a href="class_m_i_d_i_track.html">MIDITrack</a></div><div class="ttdoc">Manages a std::vector of MIDITimedMessage objects storing MIDI events, with methods for editing them.</div><div class="ttdef"><b>Definition:</b> track.h:80</div></div>
<div class="ttc" id="aclass_m_i_d_i_track_html_a5af064d70942ca6dce6a328242a92ffa"><div class="ttname"><a href="class_m_i_d_i_track.html#a5af064d70942ca6dce6a328242a92ffa">MIDITrack::InsertEvent</a></div><div class="ttdeci">bool InsertEvent(const MIDITimedMessage &amp;msg, tInsMode mode=INSMODE_DEFAULT)</div><div class="ttdoc">Inserts a single event into the track.</div></div>
<div class="ttc" id="aclass_m_i_d_i_track_html_a7eac7598842402e8b2dd900bb0e484ba"><div class="ttname"><a href="class_m_i_d_i_track.html#a7eac7598842402e8b2dd900bb0e484ba">MIDITrack::InsertNote</a></div><div class="ttdeci">bool InsertNote(const MIDITimedMessage &amp;msg, MIDIClockTime len, tInsMode mode=INSMODE_DEFAULT)</div><div class="ttdoc">Inserts a Note On and a Note Off event into the track.</div></div>
<div class="ttc" id="agroup___g_l_o_b_a_l_s_html_ga1f54d7f8d2631dc21e78751494337221"><div class="ttname"><a href="group___g_l_o_b_a_l_s.html#ga1f54d7f8d2631dc21e78751494337221">MIDIClockTime</a></div><div class="ttdeci">unsigned long MIDIClockTime</div><div class="ttdoc">The type of a variable which can hold a time in MIDI ticks.</div><div class="ttdef"><b>Definition:</b> midi.h:40</div></div>
<div class="ttc" id="agroup___g_l_o_b_a_l_s_html_ga5992348e94d8fd82fd19323f27e6172c"><div class="ttname"><a href="group___g_l_o_b_a_l_s.html#ga5992348e94d8fd82fd19323f27e6172c">WriteMIDIFile</a></div><div class="ttdeci">bool WriteMIDIFile(const char *filename, int format, const MIDIMultiTrack *tracks, bool strip=false)</div><div class="ttdoc">Writes the given MIDIMultiTrack object into a MIDI file.</div></div>
</div><!-- fragment --> </div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
