<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>NiCMidi: test_stepsequencer.cpp</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">NiCMidi<span id="projectnumber">&#160;1.1.0</span>
   </div>
   <div id="projectbrief">A MIDI library derived from J.D.Koftinoff jdksmidi</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.2 -->
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('test_stepsequencer_8cpp-example.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle"><div class="title">test_stepsequencer.cpp</div></div>
</div><!--header-->
<div class="contents">
<p >A very basic, and not comfortable, command line step sequencer, made for demonstrating editing capabilities of the NiCMidi library. It creates an <a class="el" href="class_advanced_sequencer.html" title="An enhanced MIDISequencer, able to directly load and play MIDI files and many more.">AdvancedSequencer</a> class instance, gets it MultiTrack, and allows the user to edit it. You can load and save MIDI files, play them, view the file content, edit the file. You can insert, delete or change these MIDI events: note, control (in particular volume and pan), program and tempo. For changing an event, insert a new event (same note, control, program, tempo) at same time position.</p>
<p >Requires functions.cpp, which contains command line I/O functions.</p>
<div class="fragment"><div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment"> *   Example file for NiCMidi - A C++ Class Library for MIDI</span></div>
<div class="line"><span class="comment"> *</span></div>
<div class="line"><span class="comment"> *   Copyright (C) 2021  Nicola Cassetta</span></div>
<div class="line"><span class="comment"> *   https://github.com/ncassetta/NiCMidi</span></div>
<div class="line"><span class="comment"> *</span></div>
<div class="line"><span class="comment"> *   This file is part of NiCMidi.</span></div>
<div class="line"><span class="comment"> *</span></div>
<div class="line"><span class="comment"> *   NiCMidi is free software: you can redistribute it and/or modify</span></div>
<div class="line"><span class="comment"> *   it under the terms of the GNU General Public License as published by</span></div>
<div class="line"><span class="comment"> *   the Free Software Foundation, either version 3 of the License, or</span></div>
<div class="line"><span class="comment"> *   (at your option) any later version.</span></div>
<div class="line"><span class="comment"> *</span></div>
<div class="line"><span class="comment"> *   NiCMidi is distributed in the hope that it will be useful,</span></div>
<div class="line"><span class="comment"> *   but WITHOUT ANY WARRANTY; without even the implied warranty of</span></div>
<div class="line"><span class="comment"> *   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span></div>
<div class="line"><span class="comment"> *   GNU General Public License for more details.</span></div>
<div class="line"><span class="comment"> *</span></div>
<div class="line"><span class="comment"> *   You should have received a copy of the GNU General Public License</span></div>
<div class="line"><span class="comment"> *   along with NiCMidi.  If not, see &lt;http://www.gnu.org/licenses/&gt;.</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">/* A very basic, and not comfortable, command line step sequencer,</span></div>
<div class="line"><span class="comment">   made for demonstrating editing capabilities of the NiCMidi library.</span></div>
<div class="line"><span class="comment">   It creates an AdvancedSequencer class instance, gets it MultiTrack,</span></div>
<div class="line"><span class="comment">   and allows the user to edit it.</span></div>
<div class="line"><span class="comment">   You can load and save MIDI files, play them, view the file</span></div>
<div class="line"><span class="comment">   content, edit the file. You can insert, delete or change these</span></div>
<div class="line"><span class="comment">   MIDI events: note, control (in particular volume and pan),</span></div>
<div class="line"><span class="comment">   program and tempo. For changing an event, insert a new event</span></div>
<div class="line"><span class="comment">   (same note, control, program, tempo) at same time position.</span></div>
<div class="line"><span class="comment">   Requires functions.cpp, which contains command line I/O functions.</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &quot;test_stepsequencer.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;functions.h&quot;</span>                  <span class="comment">// helper functions for input parsing and output</span></div>
<div class="line"><span class="preprocessor">#include &quot;../include/advancedsequencer.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;../include/filewritemultitrack.h&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &lt;iostream&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">using namespace </span>std;</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="comment">//                        G L O B A L S                         //</span></div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><a id="_a0" name="_a0"></a><a class="code hl_class" href="class_m_i_d_i_sequencer_g_u_i_notifier_text.html">MIDISequencerGUINotifierText</a> notifier;              <span class="comment">// a text notifier: send messages to std::cout (default)</span></div>
<div class="line"><a id="_a1" name="_a1"></a><a class="code hl_class" href="class_advanced_sequencer.html">AdvancedSequencer</a> sequencer(&amp;notifier);             <span class="comment">// an AdvancedSequencer</span></div>
<div class="line"><a id="_a2" name="_a2"></a><a class="code hl_class" href="class_m_i_d_i_multi_track.html">MIDIMultiTrack</a>* multitrack = sequencer.GetMultiTrack();</div>
<div class="line">                                                    <span class="comment">// our multitrack which will be edited</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">extern</span> <span class="keywordtype">string</span> command, par1, par2, par3;            <span class="comment">// used by GetCommand() for parsing the user input</span></div>
<div class="line">position cur_pos(multitrack);                       <span class="comment">// the cursor position</span></div>
<div class="line">edit_block cur_block;                               <span class="comment">// used for cut, copy, paste</span></div>
<div class="line">MIDIEditMultiTrack edit_multitrack;                 <span class="comment">// used for cut, copy, paste</span></div>
<div class="line"><span class="keywordtype">char</span> filename[200];                                 <span class="comment">// our filename</span></div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> NameToValue(<span class="keywordtype">string</span> s) {</div>
<div class="line"><span class="comment">// Converts a string as &quot;C6&quot; or &quot;a#5&quot; into corresponding MIDI note value</span></div>
<div class="line"> </div>
<div class="line">    <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> noteoffsets[7] = { 9, 11, 0, 2, 4, 5, 7,};</div>
<div class="line"> </div>
<div class="line">    <span class="keywordtype">int</span> p = s.find_first_not_of(<span class="stringliteral">&quot; &quot;</span>);</div>
<div class="line">    <span class="keywordtype">char</span> ch = tolower(s[p]);</div>
<div class="line">    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> note;</div>
<div class="line">    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> octave;</div>
<div class="line">    <span class="keywordflow">if</span> (<span class="keywordtype">string</span>(<span class="stringliteral">&quot;abcdefg&quot;</span>).find(ch) == string::npos)</div>
<div class="line">        <span class="keywordflow">return</span> 0;</div>
<div class="line">    note = noteoffsets[ch - <span class="charliteral">&#39;a&#39;</span>];</div>
<div class="line">    p = s.find_first_not_of(<span class="stringliteral">&quot; &quot;</span>, p + 1);</div>
<div class="line">    <span class="keywordflow">if</span>( s[p] == <span class="charliteral">&#39;#&#39;</span>) {</div>
<div class="line">        note++;</div>
<div class="line">        p = s.find_first_not_of(<span class="stringliteral">&quot; &quot;</span>, p+1);</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (s[p] == <span class="charliteral">&#39;b&#39;</span>) {</div>
<div class="line">        note--;</div>
<div class="line">        p = s.find_first_not_of(<span class="stringliteral">&quot; &quot;</span>, p + 1);</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">if</span> (<span class="keywordtype">string</span>(<span class="stringliteral">&quot;0123456789&quot;</span>).find(s[p]) == string::npos)</div>
<div class="line">        <span class="keywordflow">return</span> 0;</div>
<div class="line">    octave = s[p] - <span class="charliteral">&#39;0&#39;</span>;</div>
<div class="line">    <span class="keywordflow">return</span> 12 * octave + note;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> PrintResolution() {</div>
<div class="line"><span class="comment">// prints info about multitrack and step size</span></div>
<div class="line">    cout &lt;&lt; <span class="stringliteral">&quot;MultiTrack resolution is &quot;</span> &lt;&lt; multitrack-&gt;<a id="a3" name="a3"></a><a class="code hl_function" href="class_m_i_d_i_multi_track.html#a4ce1a7e7edbe7e139d87346cec02681b">GetClksPerBeat</a>() &lt;&lt; <span class="stringliteral">&quot; clocks per beat&quot;</span> &lt;&lt; endl;</div>
<div class="line">    cout &lt;&lt; <span class="stringliteral">&quot;Current step size is &quot;</span> &lt;&lt; cur_pos.getstep() &lt;&lt; <span class="stringliteral">&quot; clocks&quot;</span> &lt;&lt; endl;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> PrintCurrentStatus() {</div>
<div class="line"><span class="comment">// prints info about current edited track and position</span></div>
<div class="line">    cout &lt;&lt; <span class="stringliteral">&quot;*** Current cursor pos: Track: &quot;</span> &lt;&lt; cur_pos.gettrack() &lt;&lt; <span class="stringliteral">&quot; Time: &quot;</span> &lt;&lt; cur_pos.gettime() &lt;&lt; <span class="stringliteral">&quot; (&quot;</span> &lt;&lt;</div>
<div class="line">        sequencer.GetCurrentMeasure() + 1 &lt;&lt;<span class="stringliteral">&quot;:&quot;</span> &lt;&lt; sequencer.GetCurrentBeat() + 1;</div>
<div class="line">    <span class="keywordflow">if</span> (sequencer.GetCurrentBeatOffset() &gt; 0)</div>
<div class="line">        cout &lt;&lt; <span class="stringliteral">&quot;:&quot;</span> &lt;&lt; sequencer.GetCurrentBeatOffset();</div>
<div class="line">    cout &lt;&lt; <span class="stringliteral">&quot;)&quot;</span> &lt;&lt; endl;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> main(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> **argv) {</div>
<div class="line">    <a id="_a4" name="_a4"></a><a class="code hl_class" href="class_m_i_d_i_timed_message.html">MIDITimedMessage</a> msg;</div>
<div class="line">    <a id="_a5" name="_a5"></a><a class="code hl_class" href="class_m_i_d_i_track.html">MIDITrack</a>* trk = multitrack-&gt;<a id="a6" name="a6"></a><a class="code hl_function" href="class_m_i_d_i_multi_track.html#ab2978512206b6ed87300daba6198684b">GetTrack</a>(cur_pos.gettrack());</div>
<div class="line">    <a class="code hl_typedef" href="group___g_l_o_b_a_l_s.html#ga1f54d7f8d2631dc21e78751494337221">MIDIClockTime</a> last_note_length = multitrack-&gt;<a class="code hl_function" href="class_m_i_d_i_multi_track.html#a4ce1a7e7edbe7e139d87346cec02681b">GetClksPerBeat</a>();</div>
<div class="line">    <span class="keywordtype">int</span> last_note_vel = 100;</div>
<div class="line">    <span class="keywordtype">int</span> event_num;</div>
<div class="line"> </div>
<div class="line">    *filename = 0;</div>
<div class="line">    cur_pos.setstep (multitrack-&gt;<a class="code hl_function" href="class_m_i_d_i_multi_track.html#a4ce1a7e7edbe7e139d87346cec02681b">GetClksPerBeat</a>());</div>
<div class="line">    cout &lt;&lt; <span class="stringliteral">&quot;Step sequencer example for NiCMidi library&quot;</span> &lt;&lt; endl &lt;&lt;</div>
<div class="line">            <span class="stringliteral">&quot;Copyright 2014 - 2021 Nicola Cassetta&quot;</span> &lt;&lt; endl &lt;&lt; endl;</div>
<div class="line">    PrintResolution();</div>
<div class="line">    cout &lt;&lt; endl &lt;&lt; <span class="stringliteral">&quot;TYPE help TO GET A LIST OF AVAILABLE COMMANDS&quot;</span> &lt;&lt; endl &lt;&lt; endl;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// The main loop gets a command from the user and then execute it by mean of the AdvancedSequencer and</span></div>
<div class="line">    <span class="comment">// MIDIMultiTrack methods</span></div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">while</span> (command != <span class="stringliteral">&quot;quit&quot;</span>) {                     <span class="comment">// main loop</span></div>
<div class="line">        PrintCurrentStatus();</div>
<div class="line">        GetCommand();                               <span class="comment">// gets user input and parse it</span></div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span>(command == <span class="stringliteral">&quot;&quot;</span>)                           <span class="comment">// empty command</span></div>
<div class="line">            <span class="keywordflow">continue</span>;</div>
<div class="line">        <span class="keywordflow">if</span>(command == <span class="stringliteral">&quot;load&quot;</span>) {                     <span class="comment">// loads a file</span></div>
<div class="line">            <span class="keywordflow">if</span> (sequencer.Load(par1.c_str())) {</div>
<div class="line">                cout &lt;&lt; <span class="stringliteral">&quot;Loaded file &quot;</span> &lt;&lt; par1 &lt;&lt; endl;</div>
<div class="line">                PrintResolution();</div>
<div class="line">                strcpy (filename, par1.c_str());</div>
<div class="line">            }</div>
<div class="line">            <span class="keywordflow">else</span></div>
<div class="line">                cout &lt;&lt; <span class="stringliteral">&quot;Error loading file&quot;</span> &lt;&lt; endl;</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">else</span> <span class="keywordflow">if</span>(command == <span class="stringliteral">&quot;save&quot;</span>) {                <span class="comment">// save the multitrack contents</span></div>
<div class="line">            <span class="keywordflow">if</span> (par1.size() &gt; 0)</div>
<div class="line">                strcpy (filename, par1.c_str());</div>
<div class="line">            <span class="keywordflow">if</span> (strlen(filename) &gt; 0) {</div>
<div class="line">                <span class="keywordflow">if</span> (<a id="a7" name="a7"></a><a class="code hl_function" href="group___g_l_o_b_a_l_s.html#ga5992348e94d8fd82fd19323f27e6172c">WriteMIDIFile</a>(filename, 1, multitrack))</div>
<div class="line">                    cout &lt;&lt; <span class="stringliteral">&quot;File saved&quot;</span> &lt;&lt; endl;</div>
<div class="line">                <span class="keywordflow">else</span></div>
<div class="line">                    cout &lt;&lt; <span class="stringliteral">&quot;Error writing file&quot;</span> &lt;&lt; endl;</div>
<div class="line">            }</div>
<div class="line">            <span class="keywordflow">else</span></div>
<div class="line">                cout &lt;&lt; <span class="stringliteral">&quot;File name not defined&quot;</span> &lt;&lt; endl;</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (command == <span class="stringliteral">&quot;play&quot;</span>) {               <span class="comment">// starts playback</span></div>
<div class="line">            <span class="keywordflow">if</span> (sequencer.IsLoaded())</div>
<div class="line">                sequencer.Play();</div>
<div class="line">            <span class="keywordflow">else</span></div>
<div class="line">                cout &lt;&lt; <span class="stringliteral">&quot;No content in the multitrack!&quot;</span> &lt;&lt; endl;</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (command == <span class="stringliteral">&quot;stop&quot;</span>)                 <span class="comment">// stops playback</span></div>
<div class="line">            sequencer.Stop();</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (command == <span class="stringliteral">&quot;rew&quot;</span>) {                <span class="comment">// rewind</span></div>
<div class="line">            cur_pos.rewind();</div>
<div class="line">            sequencer.GoToZero();</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (command == <span class="stringliteral">&quot;goto&quot;</span>) {               <span class="comment">// goes to meas and beat</span></div>
<div class="line">            <span class="keywordtype">int</span> meas = atoi(par1.c_str()) - 1;</div>
<div class="line">            <span class="keywordtype">int</span> beat = (par2.length() == 0 ? 0 : atoi(par2.c_str()) - 1);</div>
<div class="line">            <span class="keywordflow">if</span> (sequencer.GoToMeasure(meas, beat))</div>
<div class="line">                cur_pos.settime(sequencer.GetCurrentMIDIClockTime());</div>
<div class="line">            <span class="keywordflow">else</span></div>
<div class="line">                cout &lt;&lt; <span class="stringliteral">&quot;Invalid position&quot;</span> &lt;&lt; endl;</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (command == <span class="stringliteral">&quot;dump&quot;</span>) {               <span class="comment">// prints a dump of the sequencer contents</span></div>
<div class="line">            <span class="keywordflow">if</span> (par1.size() == 0)</div>
<div class="line">                DumpMIDIMultiTrackWithPauses(multitrack);</div>
<div class="line">            <span class="keywordflow">else</span> {</div>
<div class="line">                <span class="keywordtype">int</span> trk_num = atoi(par1.c_str());</div>
<div class="line">                <span class="keywordflow">if</span> (multitrack-&gt;<a id="a8" name="a8"></a><a class="code hl_function" href="class_m_i_d_i_multi_track.html#a66f5deba7b6f0ebda53452ec123a504d">IsValidTrackNumber</a>(trk_num)) {</div>
<div class="line">                    <a class="code hl_class" href="class_m_i_d_i_track.html">MIDITrack</a>* trk = sequencer.GetTrack(trk_num);</div>
<div class="line">                    DumpMIDITrackWithPauses(trk, trk_num);</div>
<div class="line">                }</div>
<div class="line">                <span class="keywordflow">else</span></div>
<div class="line">                    cout &lt;&lt; <span class="stringliteral">&quot;Invalid track number&quot;</span> &lt;&lt; endl;</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (command == <span class="stringliteral">&quot;notify&quot;</span>) {             <span class="comment">// sets notifier on/off</span></div>
<div class="line">            <span class="keywordflow">if</span> (par1 == <span class="stringliteral">&quot;on&quot;</span>)</div>
<div class="line">                notifier.<a id="a9" name="a9"></a><a class="code hl_function" href="class_m_i_d_i_sequencer_g_u_i_notifier.html#a01c6a78586524abb599fe1ed9d41ac59">SetEnable</a>(<span class="keyword">true</span>);</div>
<div class="line">            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (par1 == <span class="stringliteral">&quot;off&quot;</span>)</div>
<div class="line">                notifier.<a class="code hl_function" href="class_m_i_d_i_sequencer_g_u_i_notifier.html#a01c6a78586524abb599fe1ed9d41ac59">SetEnable</a>(<span class="keyword">false</span>);</div>
<div class="line">            <span class="keywordflow">else</span></div>
<div class="line">                cout &lt;&lt; <span class="stringliteral">&quot;You must specify on or off&quot;</span> &lt;&lt; endl;</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (command == <span class="stringliteral">&quot;&lt;&quot;</span>) {                  <span class="comment">// step backward</span></div>
<div class="line">            <span class="keywordtype">int</span> steps = (par1.length() == 0 ? 1 : atoi(par1.c_str()));</div>
<div class="line">            <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; steps; i++)</div>
<div class="line">                cur_pos.stepback();</div>
<div class="line">            sequencer.GoToTime(cur_pos.gettime());</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (command == <span class="stringliteral">&quot;&gt;&quot;</span>) {                  <span class="comment">// step forward</span></div>
<div class="line">            <span class="keywordtype">int</span> steps = (par1.length() == 0 ? 1 : atoi( par1.c_str()));</div>
<div class="line">            <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; steps; i++)</div>
<div class="line">                cur_pos.stepforward();</div>
<div class="line">            <a class="code hl_typedef" href="group___g_l_o_b_a_l_s.html#ga1f54d7f8d2631dc21e78751494337221">MIDIClockTime</a> cur_time = cur_pos.gettime();</div>
<div class="line">            <span class="keywordflow">if</span> (cur_time &gt; multitrack-&gt;<a id="a10" name="a10"></a><a class="code hl_function" href="class_m_i_d_i_multi_track.html#a7c3bb91a0b5737bb282c0f15b5fb3e07">GetEndTime</a>()) {</div>
<div class="line">                multitrack-&gt;<a id="a11" name="a11"></a><a class="code hl_function" href="class_m_i_d_i_multi_track.html#ae18c6f32dd5e47c7f236e310f88c329d">SetEndTime</a>(cur_time);</div>
<div class="line">                sequencer.UpdateStatus();</div>
<div class="line">            }</div>
<div class="line">            sequencer.GoToTime(cur_time);</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (command == <span class="stringliteral">&quot;t&lt;&quot;</span>) {                 <span class="comment">// previous track</span></div>
<div class="line">            cur_pos.previoustrack();</div>
<div class="line">            trk = multitrack-&gt;<a class="code hl_function" href="class_m_i_d_i_multi_track.html#ab2978512206b6ed87300daba6198684b">GetTrack</a>(cur_pos.gettrack());</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (command == <span class="stringliteral">&quot;t&gt;&quot;</span>) {                 <span class="comment">// next track</span></div>
<div class="line">            cur_pos.nexttrack();</div>
<div class="line">            trk = multitrack-&gt;<a class="code hl_function" href="class_m_i_d_i_multi_track.html#ab2978512206b6ed87300daba6198684b">GetTrack</a>(cur_pos.gettrack());</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (command == <span class="stringliteral">&quot;step&quot;</span>) {               <span class="comment">// sets the step size</span></div>
<div class="line">            cur_pos.setstep(atoi(par1.c_str()));</div>
<div class="line">            PrintResolution();</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (command == <span class="stringliteral">&quot;note&quot;</span>) {               <span class="comment">// inserts a note event</span></div>
<div class="line">            msg.<a id="a12" name="a12"></a><a class="code hl_function" href="class_m_i_d_i_timed_message.html#a8620466e69bd0a50b9dead94ec9f554f">SetTime</a>(cur_pos.gettime());</div>
<div class="line">            <span class="keywordflow">if</span> (par2 != <span class="stringliteral">&quot;*&quot;</span>) {</div>
<div class="line">                <a class="code hl_typedef" href="group___g_l_o_b_a_l_s.html#ga1f54d7f8d2631dc21e78751494337221">MIDIClockTime</a> len = (par2.length() == 0 ? last_note_length : atoi(par2.c_str()));</div>
<div class="line">                <span class="keywordtype">int</span> vel = (par3.length() == 0 ? last_note_vel : atoi(par3.c_str()));</div>
<div class="line">                msg.<a id="a13" name="a13"></a><a class="code hl_function" href="class_m_i_d_i_message.html#aacdcc337086ad7f19b40b133021c73da">SetNoteOn</a>(cur_pos.gettrack() - 1, NameToValue(par1), vel);</div>
<div class="line">                trk-&gt;<a id="a14" name="a14"></a><a class="code hl_function" href="class_m_i_d_i_track.html#a7eac7598842402e8b2dd900bb0e484ba">InsertNote</a> (msg, len);</div>
<div class="line">            }</div>
<div class="line">            <span class="keywordflow">else</span> {</div>
<div class="line">                msg.<a class="code hl_function" href="class_m_i_d_i_message.html#aacdcc337086ad7f19b40b133021c73da">SetNoteOn</a>(cur_pos.gettrack() - 1, NameToValue(par1), 100);</div>
<div class="line">                <span class="keywordflow">if</span> (!trk-&gt;<a id="a15" name="a15"></a><a class="code hl_function" href="class_m_i_d_i_track.html#afb3a453d6cd66ac4b8137e31a97f2983">FindEventNumber</a>(msg, &amp;event_num, <a id="a16" name="a16"></a><a class="code hl_enumvalue" href="group___g_l_o_b_a_l_s.html#gga80155586fa275b28773c9b203f52cabaa083d39b26bd9a8ca3e54d122fbba0def">COMPMODE_SAMEKIND</a>))</div>
<div class="line">                    cout &lt;&lt; <span class="stringliteral">&quot;Event not found&quot;</span> &lt;&lt; endl;</div>
<div class="line">                <span class="keywordflow">else</span> {</div>
<div class="line">                    msg = trk-&gt;<a id="a17" name="a17"></a><a class="code hl_function" href="class_m_i_d_i_track.html#af4385d451f08addbfe11440baeb49e68">GetEvent</a>(event_num);</div>
<div class="line">                    trk-&gt;<a id="a18" name="a18"></a><a class="code hl_function" href="class_m_i_d_i_track.html#ac7782fecb402fdd2d4e0df24fafc26d7">DeleteNote</a>(msg);</div>
<div class="line">                }</div>
<div class="line">            }</div>
<div class="line">            sequencer.UpdateStatus();</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (command == <span class="stringliteral">&quot;volume&quot;</span>) {             <span class="comment">// inserts a volume event</span></div>
<div class="line">            msg.<a class="code hl_function" href="class_m_i_d_i_timed_message.html#a8620466e69bd0a50b9dead94ec9f554f">SetTime</a>(cur_pos.gettime());</div>
<div class="line">            <span class="keywordflow">if</span> (par1 != <span class="stringliteral">&quot;*&quot;</span>) {</div>
<div class="line">                msg.<a id="a19" name="a19"></a><a class="code hl_function" href="class_m_i_d_i_message.html#a583867bb3401f7afe3b8698aaf83dfce">SetControlChange</a>(cur_pos.gettrack() - 1, <a id="a20" name="a20"></a><a class="code hl_enumvalue" href="group___m_i_d_i_e_n_u_m.html#gga0b4386aa3f982099692c169c65950188a8fba91fad9f7853a2e0b24c37e84a01e">C_MAIN_VOLUME</a>, atoi(par1.c_str()));</div>
<div class="line">                trk-&gt;<a id="a21" name="a21"></a><a class="code hl_function" href="class_m_i_d_i_track.html#a5af064d70942ca6dce6a328242a92ffa">InsertEvent</a> (msg);</div>
<div class="line">            }</div>
<div class="line">            <span class="keywordflow">else</span> {</div>
<div class="line">                msg.<a class="code hl_function" href="class_m_i_d_i_message.html#a583867bb3401f7afe3b8698aaf83dfce">SetControlChange</a>(cur_pos.gettrack() - 1, <a class="code hl_enumvalue" href="group___m_i_d_i_e_n_u_m.html#gga0b4386aa3f982099692c169c65950188a8fba91fad9f7853a2e0b24c37e84a01e">C_MAIN_VOLUME</a>, 0);</div>
<div class="line">                <span class="keywordflow">if</span> (!trk-&gt;<a class="code hl_function" href="class_m_i_d_i_track.html#afb3a453d6cd66ac4b8137e31a97f2983">FindEventNumber</a>(msg, &amp;event_num, <a class="code hl_enumvalue" href="group___g_l_o_b_a_l_s.html#gga80155586fa275b28773c9b203f52cabaa083d39b26bd9a8ca3e54d122fbba0def">COMPMODE_SAMEKIND</a>))</div>
<div class="line">                    cout &lt;&lt; <span class="stringliteral">&quot;Event not found&quot;</span> &lt;&lt; endl;</div>
<div class="line">                <span class="keywordflow">else</span> {</div>
<div class="line">                    msg = trk-&gt;<a class="code hl_function" href="class_m_i_d_i_track.html#af4385d451f08addbfe11440baeb49e68">GetEvent</a>(event_num);</div>
<div class="line">                    trk-&gt;<a id="a22" name="a22"></a><a class="code hl_function" href="class_m_i_d_i_track.html#a6ab6ac9674781f8fe1e0678748782c98">DeleteEvent</a>(msg);</div>
<div class="line">                }</div>
<div class="line">            }</div>
<div class="line">            sequencer.UpdateStatus();</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( command == <span class="stringliteral">&quot;pan&quot;</span>) {               <span class="comment">// inserts a pan event</span></div>
<div class="line">            msg.<a class="code hl_function" href="class_m_i_d_i_timed_message.html#a8620466e69bd0a50b9dead94ec9f554f">SetTime</a>(cur_pos.gettime());</div>
<div class="line">            <span class="keywordflow">if</span> (par1 != <span class="stringliteral">&quot;*&quot;</span>) {</div>
<div class="line">                msg.<a class="code hl_function" href="class_m_i_d_i_message.html#a583867bb3401f7afe3b8698aaf83dfce">SetControlChange</a>(cur_pos.gettrack() - 1, <a id="a23" name="a23"></a><a class="code hl_enumvalue" href="group___m_i_d_i_e_n_u_m.html#gga0b4386aa3f982099692c169c65950188ac4cd2a43f5367521bac8bd8550278820">C_PAN</a>, atoi(par1.c_str()));</div>
<div class="line">                trk-&gt;<a class="code hl_function" href="class_m_i_d_i_track.html#a5af064d70942ca6dce6a328242a92ffa">InsertEvent</a> (msg);</div>
<div class="line">            }</div>
<div class="line">            <span class="keywordflow">else</span> {</div>
<div class="line">                msg.<a class="code hl_function" href="class_m_i_d_i_message.html#a583867bb3401f7afe3b8698aaf83dfce">SetControlChange</a>(cur_pos.gettrack() - 1, <a class="code hl_enumvalue" href="group___m_i_d_i_e_n_u_m.html#gga0b4386aa3f982099692c169c65950188ac4cd2a43f5367521bac8bd8550278820">C_PAN</a>, 0);</div>
<div class="line">                <span class="keywordflow">if</span> (!trk-&gt;<a class="code hl_function" href="class_m_i_d_i_track.html#afb3a453d6cd66ac4b8137e31a97f2983">FindEventNumber</a>(msg, &amp;event_num, <a class="code hl_enumvalue" href="group___g_l_o_b_a_l_s.html#gga80155586fa275b28773c9b203f52cabaa083d39b26bd9a8ca3e54d122fbba0def">COMPMODE_SAMEKIND</a>))</div>
<div class="line">                    cout &lt;&lt; <span class="stringliteral">&quot;Event not found&quot;</span> &lt;&lt; endl;</div>
<div class="line">                <span class="keywordflow">else</span> {</div>
<div class="line">                    msg = trk-&gt;<a class="code hl_function" href="class_m_i_d_i_track.html#af4385d451f08addbfe11440baeb49e68">GetEvent</a>(event_num);</div>
<div class="line">                    trk-&gt;<a class="code hl_function" href="class_m_i_d_i_track.html#a6ab6ac9674781f8fe1e0678748782c98">DeleteEvent</a>(msg);</div>
<div class="line">                }</div>
<div class="line">            }</div>
<div class="line">            sequencer.UpdateStatus();</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (command == <span class="stringliteral">&quot;control&quot;</span>) {            <span class="comment">// inserts a generic control event</span></div>
<div class="line">            msg.<a class="code hl_function" href="class_m_i_d_i_timed_message.html#a8620466e69bd0a50b9dead94ec9f554f">SetTime</a>(cur_pos.gettime());</div>
<div class="line">            <span class="keywordflow">if</span> (par2 != <span class="stringliteral">&quot;*&quot;</span>) {</div>
<div class="line">                msg.<a class="code hl_function" href="class_m_i_d_i_message.html#a583867bb3401f7afe3b8698aaf83dfce">SetControlChange</a>(cur_pos.gettrack() - 1, atoi(par1.c_str()), atoi(par2.c_str()));</div>
<div class="line">                trk-&gt;<a class="code hl_function" href="class_m_i_d_i_track.html#a5af064d70942ca6dce6a328242a92ffa">InsertEvent</a> (msg);</div>
<div class="line">            }</div>
<div class="line">            <span class="keywordflow">else</span> {</div>
<div class="line">                msg.<a class="code hl_function" href="class_m_i_d_i_message.html#a583867bb3401f7afe3b8698aaf83dfce">SetControlChange</a>(cur_pos.gettrack() - 1, atoi(par1.c_str()), 0);</div>
<div class="line">                <span class="keywordflow">if</span> (!trk-&gt;<a class="code hl_function" href="class_m_i_d_i_track.html#afb3a453d6cd66ac4b8137e31a97f2983">FindEventNumber</a>(msg, &amp;event_num, <a class="code hl_enumvalue" href="group___g_l_o_b_a_l_s.html#gga80155586fa275b28773c9b203f52cabaa083d39b26bd9a8ca3e54d122fbba0def">COMPMODE_SAMEKIND</a>))</div>
<div class="line">                    cout &lt;&lt; <span class="stringliteral">&quot;Event not found&quot;</span> &lt;&lt; endl;</div>
<div class="line">                <span class="keywordflow">else</span> {</div>
<div class="line">                    msg = trk-&gt;<a class="code hl_function" href="class_m_i_d_i_track.html#af4385d451f08addbfe11440baeb49e68">GetEvent</a>(event_num);</div>
<div class="line">                    trk-&gt;<a class="code hl_function" href="class_m_i_d_i_track.html#a6ab6ac9674781f8fe1e0678748782c98">DeleteEvent</a>(msg);</div>
<div class="line">                }</div>
<div class="line">            }</div>
<div class="line">            sequencer.UpdateStatus();</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (command == <span class="stringliteral">&quot;program&quot;</span>) {            <span class="comment">// inserts a program event</span></div>
<div class="line">            msg.<a class="code hl_function" href="class_m_i_d_i_timed_message.html#a8620466e69bd0a50b9dead94ec9f554f">SetTime</a>(cur_pos.gettime());</div>
<div class="line">            <span class="keywordflow">if</span> (par1 != <span class="stringliteral">&quot;*&quot;</span>) {</div>
<div class="line">                msg.<a id="a24" name="a24"></a><a class="code hl_function" href="class_m_i_d_i_message.html#a7edc0209b59a09b4d50d8dad9da89589">SetProgramChange</a>(cur_pos.gettrack() - 1, atoi(par1.c_str()));</div>
<div class="line">                trk-&gt;<a class="code hl_function" href="class_m_i_d_i_track.html#a5af064d70942ca6dce6a328242a92ffa">InsertEvent</a>(msg);</div>
<div class="line">            }</div>
<div class="line">            <span class="keywordflow">else</span> {</div>
<div class="line">                msg.<a class="code hl_function" href="class_m_i_d_i_message.html#a7edc0209b59a09b4d50d8dad9da89589">SetProgramChange</a>(cur_pos.gettrack() - 1, 0);</div>
<div class="line">                <span class="keywordflow">if</span> (!trk-&gt;<a class="code hl_function" href="class_m_i_d_i_track.html#afb3a453d6cd66ac4b8137e31a97f2983">FindEventNumber</a>(msg, &amp;event_num, <a class="code hl_enumvalue" href="group___g_l_o_b_a_l_s.html#gga80155586fa275b28773c9b203f52cabaa083d39b26bd9a8ca3e54d122fbba0def">COMPMODE_SAMEKIND</a>))</div>
<div class="line">                    cout &lt;&lt; <span class="stringliteral">&quot;Event not found&quot;</span> &lt;&lt; endl;</div>
<div class="line">                <span class="keywordflow">else</span> {</div>
<div class="line">                    msg = trk-&gt;<a class="code hl_function" href="class_m_i_d_i_track.html#af4385d451f08addbfe11440baeb49e68">GetEvent</a>(event_num);</div>
<div class="line">                    trk-&gt;<a class="code hl_function" href="class_m_i_d_i_track.html#a6ab6ac9674781f8fe1e0678748782c98">DeleteEvent</a>(msg);</div>
<div class="line">                }</div>
<div class="line">            }</div>
<div class="line">            sequencer.UpdateStatus();</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (command == <span class="stringliteral">&quot;tempo&quot;</span>) {              <span class="comment">// inserts a tempo event in track 0</span></div>
<div class="line">            msg.<a class="code hl_function" href="class_m_i_d_i_timed_message.html#a8620466e69bd0a50b9dead94ec9f554f">SetTime</a> (cur_pos.gettime());</div>
<div class="line">            <span class="keywordflow">if</span> (par1 != <span class="stringliteral">&quot;*&quot;</span>) {</div>
<div class="line">                msg.<a id="a25" name="a25"></a><a class="code hl_function" href="class_m_i_d_i_message.html#a39391ced5f5f50cc4d3a314102c350a1">SetTempo</a>(atoi(par1.c_str()));</div>
<div class="line">                multitrack-&gt;<a class="code hl_function" href="class_m_i_d_i_multi_track.html#ab2978512206b6ed87300daba6198684b">GetTrack</a>(0)-&gt;<a class="code hl_function" href="class_m_i_d_i_track.html#a5af064d70942ca6dce6a328242a92ffa">InsertEvent</a>(msg);</div>
<div class="line">            }</div>
<div class="line">            <span class="keywordflow">else</span> {</div>
<div class="line">                msg.<a class="code hl_function" href="class_m_i_d_i_message.html#a39391ced5f5f50cc4d3a314102c350a1">SetTempo</a>(120);</div>
<div class="line">                <span class="keywordflow">if</span> (!multitrack-&gt;<a class="code hl_function" href="class_m_i_d_i_multi_track.html#ab2978512206b6ed87300daba6198684b">GetTrack</a>(0)-&gt;<a class="code hl_function" href="class_m_i_d_i_track.html#afb3a453d6cd66ac4b8137e31a97f2983">FindEventNumber</a> (msg, &amp;event_num, <a class="code hl_enumvalue" href="group___g_l_o_b_a_l_s.html#gga80155586fa275b28773c9b203f52cabaa083d39b26bd9a8ca3e54d122fbba0def">COMPMODE_SAMEKIND</a>))</div>
<div class="line">                    cout &lt;&lt; <span class="stringliteral">&quot;Event not found&quot;</span> &lt;&lt; endl;</div>
<div class="line">                <span class="keywordflow">else</span> {</div>
<div class="line">                    msg = multitrack-&gt;<a class="code hl_function" href="class_m_i_d_i_multi_track.html#ab2978512206b6ed87300daba6198684b">GetTrack</a>(0)-&gt;<a class="code hl_function" href="class_m_i_d_i_track.html#af4385d451f08addbfe11440baeb49e68">GetEvent</a>(event_num);</div>
<div class="line">                    trk-&gt;<a class="code hl_function" href="class_m_i_d_i_track.html#a6ab6ac9674781f8fe1e0678748782c98">DeleteEvent</a>(msg);</div>
<div class="line">                }</div>
<div class="line">            }</div>
<div class="line">            sequencer.UpdateStatus();</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (command == <span class="stringliteral">&quot;time&quot;</span>) {               <span class="comment">// inserts a time event in track 0</span></div>
<div class="line">            msg.<a class="code hl_function" href="class_m_i_d_i_timed_message.html#a8620466e69bd0a50b9dead94ec9f554f">SetTime</a> (cur_pos.gettime());</div>
<div class="line">            <span class="keywordflow">if</span> (par1 != <span class="stringliteral">&quot;*&quot;</span>) {</div>
<div class="line">                msg.<a id="a26" name="a26"></a><a class="code hl_function" href="class_m_i_d_i_message.html#a2c7185c1ebbe6294adb6b2d142696c51">SetTimeSig</a>(atoi(par1.c_str()), atoi(par2.c_str()));</div>
<div class="line">                multitrack-&gt;<a class="code hl_function" href="class_m_i_d_i_multi_track.html#ab2978512206b6ed87300daba6198684b">GetTrack</a>(0)-&gt;<a class="code hl_function" href="class_m_i_d_i_track.html#a5af064d70942ca6dce6a328242a92ffa">InsertEvent</a>(msg);</div>
<div class="line">            }</div>
<div class="line">            <span class="keywordflow">else</span> {</div>
<div class="line">                msg.<a class="code hl_function" href="class_m_i_d_i_message.html#a2c7185c1ebbe6294adb6b2d142696c51">SetTimeSig</a>(4, 4);</div>
<div class="line">                <span class="keywordflow">if</span> (!multitrack-&gt;<a class="code hl_function" href="class_m_i_d_i_multi_track.html#ab2978512206b6ed87300daba6198684b">GetTrack</a>(0)-&gt;<a class="code hl_function" href="class_m_i_d_i_track.html#afb3a453d6cd66ac4b8137e31a97f2983">FindEventNumber</a> (msg, &amp;event_num, <a class="code hl_enumvalue" href="group___g_l_o_b_a_l_s.html#gga80155586fa275b28773c9b203f52cabaa083d39b26bd9a8ca3e54d122fbba0def">COMPMODE_SAMEKIND</a>))</div>
<div class="line">                    cout &lt;&lt; <span class="stringliteral">&quot;Event not found&quot;</span> &lt;&lt; endl;</div>
<div class="line">                <span class="keywordflow">else</span> {</div>
<div class="line">                    msg = multitrack-&gt;<a class="code hl_function" href="class_m_i_d_i_multi_track.html#ab2978512206b6ed87300daba6198684b">GetTrack</a>(0)-&gt;<a class="code hl_function" href="class_m_i_d_i_track.html#af4385d451f08addbfe11440baeb49e68">GetEvent</a>(event_num);</div>
<div class="line">                    trk-&gt;<a class="code hl_function" href="class_m_i_d_i_track.html#a6ab6ac9674781f8fe1e0678748782c98">DeleteEvent</a>(msg);</div>
<div class="line">                }</div>
<div class="line">            }</div>
<div class="line">            sequencer.UpdateStatus();</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (command == <span class="stringliteral">&quot;bb&quot;</span>) {</div>
<div class="line">            cur_block.time_begin = cur_block.time_end = cur_pos.gettime();</div>
<div class="line">            <span class="keywordflow">if</span> (par1.size() == 0) {</div>
<div class="line">                cur_block.track_begin = 0;</div>
<div class="line">                cur_block.track_end = multitrack-&gt;<a id="a27" name="a27"></a><a class="code hl_function" href="class_m_i_d_i_multi_track.html#a4d6f3c55ed39d5d173c56d2379c76bf8">GetNumTracks</a>() - 1;</div>
<div class="line">            }</div>
<div class="line">            <span class="keywordflow">else</span></div>
<div class="line">                cur_block.track_begin = cur_block.track_end = atoi(par1.c_str());</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (command == <span class="stringliteral">&quot;be&quot;</span>) {</div>
<div class="line">            <span class="keywordflow">if</span> (cur_pos.gettime() &lt; cur_block.time_begin)</div>
<div class="line">                cout &lt;&lt; <span class="stringliteral">&quot;Selection error&quot;</span> &lt;&lt; endl;</div>
<div class="line">            <span class="keywordflow">else</span> {</div>
<div class="line">                cur_block.time_end = cur_pos.gettime();</div>
<div class="line">                cout &lt;&lt; <span class="stringliteral">&quot;Block selected: from &quot;</span> &lt;&lt; cur_block.time_begin &lt;&lt; <span class="stringliteral">&quot; to &quot;</span> &lt;&lt;</div>
<div class="line">                        cur_block.time_end &lt;&lt; <span class="stringliteral">&quot;; tracks &quot;</span> &lt;&lt; cur_block.track_begin &lt;&lt;</div>
<div class="line">                        <span class="stringliteral">&quot;-&quot;</span> &lt;&lt; cur_block.track_end &lt;&lt; endl;</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (command == <span class="stringliteral">&quot;bcopy&quot;</span>) {</div>
<div class="line">            multitrack-&gt;<a id="a28" name="a28"></a>EditCopy(cur_block.time_begin, cur_block.time_end,</div>
<div class="line">                                 cur_block.track_begin, cur_block.track_end, &amp;edit_multitrack);</div>
<div class="line">            sequencer.UpdateStatus();</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (command == <span class="stringliteral">&quot;bclear&quot;</span>) {</div>
<div class="line">            multitrack-&gt;<a id="a29" name="a29"></a>EditClear(cur_block.time_begin, cur_block.time_end,</div>
<div class="line">                                  cur_block.track_begin, cur_block.track_end);</div>
<div class="line">            sequencer.UpdateStatus();</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (command == <span class="stringliteral">&quot;bcut&quot;</span>) {</div>
<div class="line">            <span class="keywordflow">if</span> (cur_block.track_begin != 0 &amp;&amp; cur_block.track_end != multitrack-&gt;<a class="code hl_function" href="class_m_i_d_i_multi_track.html#a4d6f3c55ed39d5d173c56d2379c76bf8">GetNumTracks</a>() + 1)</div>
<div class="line">                cout &lt;&lt; <span class="stringliteral">&quot;You can&#39;t cut a number of tracks lesser than actual number&quot;</span> &lt;&lt; endl;</div>
<div class="line">            <span class="keywordflow">else</span> {</div>
<div class="line">                multitrack-&gt;<a id="a30" name="a30"></a>EditCut(cur_block.time_begin, cur_block.time_end, 0);</div>
<div class="line">                sequencer.UpdateStatus();</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (command == <span class="stringliteral">&quot;bpaste&quot;</span>) {</div>
<div class="line">            <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> tr_start = atoi(par1.c_str());</div>
<div class="line">            <span class="keywordflow">if</span> (par2.size() == 0) {</div>
<div class="line">                multitrack-&gt;<a id="a31" name="a31"></a>EditInsert(cur_pos.gettime(), tr_start, 1, &amp;edit_multitrack);</div>
<div class="line">                sequencer.UpdateStatus();</div>
<div class="line">            }</div>
<div class="line">            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (par2 == <span class="stringliteral">&quot;o&quot;</span>) {</div>
<div class="line">                multitrack-&gt;<a id="a32" name="a32"></a>EditReplace(cur_pos.gettime(), tr_start, 1, <span class="keyword">true</span>, &amp;edit_multitrack);</div>
<div class="line">                sequencer.UpdateStatus();</div>
<div class="line">            }</div>
<div class="line">            <span class="keywordflow">else</span></div>
<div class="line">                cout &lt;&lt; <span class="stringliteral">&quot;You must indicate initial track&quot;</span> &lt;&lt; endl;</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (command == <span class="stringliteral">&quot;help&quot;</span>) {                   <span class="comment">// prints help screen</span></div>
<div class="line">            cout &lt;&lt; helpstring1;</div>
<div class="line">            cout &lt;&lt; <span class="stringliteral">&quot;Press ENTER to continue&quot;</span>;</div>
<div class="line">            getchar();</div>
<div class="line">            cout &lt;&lt; helpstring2;</div>
<div class="line">            cout &lt;&lt; <span class="stringliteral">&quot;Press ENTER to continue&quot;</span>;</div>
<div class="line">            getchar();</div>
<div class="line">            cout &lt;&lt; helpstring3;</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (command != <span class="stringliteral">&quot;quit&quot;</span>)                     <span class="comment">// unrecognized</span></div>
<div class="line">            cout &lt;&lt; <span class="stringliteral">&quot;Unrecognized command&quot;</span> &lt;&lt; endl;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> EXIT_SUCCESS;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="ttc" id="aclass_advanced_sequencer_html"><div class="ttname"><a href="class_advanced_sequencer.html">AdvancedSequencer</a></div><div class="ttdoc">An enhanced MIDISequencer, able to directly load and play MIDI files and many more.</div><div class="ttdef"><b>Definition:</b> advancedsequencer.h:93</div></div>
<div class="ttc" id="aclass_m_i_d_i_message_html_a2c7185c1ebbe6294adb6b2d142696c51"><div class="ttname"><a href="class_m_i_d_i_message.html#a2c7185c1ebbe6294adb6b2d142696c51">MIDIMessage::SetTimeSig</a></div><div class="ttdeci">void SetTimeSig(unsigned char num, unsigned char den, unsigned char clocks_per_metronome=0, unsigned char num_32_per_quarter=8)</div><div class="ttdoc">Makes the message a time signature meta-message with given time (numerator and denominator).</div></div>
<div class="ttc" id="aclass_m_i_d_i_message_html_a39391ced5f5f50cc4d3a314102c350a1"><div class="ttname"><a href="class_m_i_d_i_message.html#a39391ced5f5f50cc4d3a314102c350a1">MIDIMessage::SetTempo</a></div><div class="ttdeci">void SetTempo(float tempo_bpm)</div><div class="ttdoc">Makes the message a tempo change meta-message with given tempo (in bpm).</div></div>
<div class="ttc" id="aclass_m_i_d_i_message_html_a583867bb3401f7afe3b8698aaf83dfce"><div class="ttname"><a href="class_m_i_d_i_message.html#a583867bb3401f7afe3b8698aaf83dfce">MIDIMessage::SetControlChange</a></div><div class="ttdeci">void SetControlChange(unsigned char chan, unsigned char ctrl, unsigned char val)</div><div class="ttdoc">Makes the message a control change message with given channel, controller and value.</div></div>
<div class="ttc" id="aclass_m_i_d_i_message_html_a7edc0209b59a09b4d50d8dad9da89589"><div class="ttname"><a href="class_m_i_d_i_message.html#a7edc0209b59a09b4d50d8dad9da89589">MIDIMessage::SetProgramChange</a></div><div class="ttdeci">void SetProgramChange(unsigned char chan, unsigned char prog)</div><div class="ttdoc">Makes the message a program change message with given channel and program.</div></div>
<div class="ttc" id="aclass_m_i_d_i_message_html_aacdcc337086ad7f19b40b133021c73da"><div class="ttname"><a href="class_m_i_d_i_message.html#aacdcc337086ad7f19b40b133021c73da">MIDIMessage::SetNoteOn</a></div><div class="ttdeci">void SetNoteOn(unsigned char chan, unsigned char note, unsigned char vel)</div><div class="ttdoc">Makes the message a note on message with given channel, note and velocity.</div></div>
<div class="ttc" id="aclass_m_i_d_i_multi_track_html"><div class="ttname"><a href="class_m_i_d_i_multi_track.html">MIDIMultiTrack</a></div><div class="ttdoc">Holds an array of pointers to MIDITrack objects to be played simultaneously.</div><div class="ttdef"><b>Definition:</b> multitrack.h:50</div></div>
<div class="ttc" id="aclass_m_i_d_i_multi_track_html_a4ce1a7e7edbe7e139d87346cec02681b"><div class="ttname"><a href="class_m_i_d_i_multi_track.html#a4ce1a7e7edbe7e139d87346cec02681b">MIDIMultiTrack::GetClksPerBeat</a></div><div class="ttdeci">unsigned int GetClksPerBeat() const</div><div class="ttdoc">Returns the MIDI clocks per beat of all tracks (i.e. the number of MIDI ticks in a quarter note).</div><div class="ttdef"><b>Definition:</b> multitrack.h:76</div></div>
<div class="ttc" id="aclass_m_i_d_i_multi_track_html_a4d6f3c55ed39d5d173c56d2379c76bf8"><div class="ttname"><a href="class_m_i_d_i_multi_track.html#a4d6f3c55ed39d5d173c56d2379c76bf8">MIDIMultiTrack::GetNumTracks</a></div><div class="ttdeci">unsigned int GetNumTracks() const</div><div class="ttdoc">Returns the number of allocated tracks.</div><div class="ttdef"><b>Definition:</b> multitrack.h:86</div></div>
<div class="ttc" id="aclass_m_i_d_i_multi_track_html_a66f5deba7b6f0ebda53452ec123a504d"><div class="ttname"><a href="class_m_i_d_i_multi_track.html#a66f5deba7b6f0ebda53452ec123a504d">MIDIMultiTrack::IsValidTrackNumber</a></div><div class="ttdeci">bool IsValidTrackNumber(int trk_num) const</div><div class="ttdoc">Returns true if trk_num is in thee range 0 ... GetNumTracks() - 1.</div><div class="ttdef"><b>Definition:</b> multitrack.h:95</div></div>
<div class="ttc" id="aclass_m_i_d_i_multi_track_html_a7c3bb91a0b5737bb282c0f15b5fb3e07"><div class="ttname"><a href="class_m_i_d_i_multi_track.html#a7c3bb91a0b5737bb282c0f15b5fb3e07">MIDIMultiTrack::GetEndTime</a></div><div class="ttdeci">MIDIClockTime GetEndTime() const</div><div class="ttdoc">Returns the end time of the longest track.</div></div>
<div class="ttc" id="aclass_m_i_d_i_multi_track_html_ab2978512206b6ed87300daba6198684b"><div class="ttname"><a href="class_m_i_d_i_multi_track.html#ab2978512206b6ed87300daba6198684b">MIDIMultiTrack::GetTrack</a></div><div class="ttdeci">MIDITrack * GetTrack(int trk_num)</div><div class="ttdoc">Returns the pointer to the track.</div><div class="ttdef"><b>Definition:</b> multitrack.h:79</div></div>
<div class="ttc" id="aclass_m_i_d_i_multi_track_html_ae18c6f32dd5e47c7f236e310f88c329d"><div class="ttname"><a href="class_m_i_d_i_multi_track.html#ae18c6f32dd5e47c7f236e310f88c329d">MIDIMultiTrack::SetEndTime</a></div><div class="ttdeci">bool SetEndTime(MIDIClockTime end_time)</div><div class="ttdoc">Sets the time of the data end event to end_time.</div></div>
<div class="ttc" id="aclass_m_i_d_i_sequencer_g_u_i_notifier_html_a01c6a78586524abb599fe1ed9d41ac59"><div class="ttname"><a href="class_m_i_d_i_sequencer_g_u_i_notifier.html#a01c6a78586524abb599fe1ed9d41ac59">MIDISequencerGUINotifier::SetEnable</a></div><div class="ttdeci">virtual void SetEnable(bool f)</div><div class="ttdoc">Sets message sending on/off.</div><div class="ttdef"><b>Definition:</b> notifier.h:180</div></div>
<div class="ttc" id="aclass_m_i_d_i_sequencer_g_u_i_notifier_text_html"><div class="ttname"><a href="class_m_i_d_i_sequencer_g_u_i_notifier_text.html">MIDISequencerGUINotifierText</a></div><div class="ttdoc">A MIDISequencerGUINotifier which sends text messages to a std::ostream (std::cout as default).</div><div class="ttdef"><b>Definition:</b> notifier.h:192</div></div>
<div class="ttc" id="aclass_m_i_d_i_timed_message_html"><div class="ttname"><a href="class_m_i_d_i_timed_message.html">MIDITimedMessage</a></div><div class="ttdoc">The MIDITimedMessage class inherits from the MIDIMessage and represents a message associated with a s...</div><div class="ttdef"><b>Definition:</b> msg.h:379</div></div>
<div class="ttc" id="aclass_m_i_d_i_timed_message_html_a8620466e69bd0a50b9dead94ec9f554f"><div class="ttname"><a href="class_m_i_d_i_timed_message.html#a8620466e69bd0a50b9dead94ec9f554f">MIDITimedMessage::SetTime</a></div><div class="ttdeci">void SetTime(MIDIClockTime t)</div><div class="ttdoc">Sets the MIDIClockTime associated with the message.</div><div class="ttdef"><b>Definition:</b> msg.h:407</div></div>
<div class="ttc" id="aclass_m_i_d_i_track_html"><div class="ttname"><a href="class_m_i_d_i_track.html">MIDITrack</a></div><div class="ttdoc">Manages a std::vector of MIDITimedMessage objects storing MIDI events, with methods for editing them.</div><div class="ttdef"><b>Definition:</b> track.h:80</div></div>
<div class="ttc" id="aclass_m_i_d_i_track_html_a5af064d70942ca6dce6a328242a92ffa"><div class="ttname"><a href="class_m_i_d_i_track.html#a5af064d70942ca6dce6a328242a92ffa">MIDITrack::InsertEvent</a></div><div class="ttdeci">bool InsertEvent(const MIDITimedMessage &amp;msg, tInsMode mode=INSMODE_DEFAULT)</div><div class="ttdoc">Inserts a single event into the track.</div></div>
<div class="ttc" id="aclass_m_i_d_i_track_html_a6ab6ac9674781f8fe1e0678748782c98"><div class="ttname"><a href="class_m_i_d_i_track.html#a6ab6ac9674781f8fe1e0678748782c98">MIDITrack::DeleteEvent</a></div><div class="ttdeci">bool DeleteEvent(const MIDITimedMessage &amp;msg)</div><div class="ttdoc">Deletes an event from the track.</div></div>
<div class="ttc" id="aclass_m_i_d_i_track_html_a7eac7598842402e8b2dd900bb0e484ba"><div class="ttname"><a href="class_m_i_d_i_track.html#a7eac7598842402e8b2dd900bb0e484ba">MIDITrack::InsertNote</a></div><div class="ttdeci">bool InsertNote(const MIDITimedMessage &amp;msg, MIDIClockTime len, tInsMode mode=INSMODE_DEFAULT)</div><div class="ttdoc">Inserts a Note On and a Note Off event into the track.</div></div>
<div class="ttc" id="aclass_m_i_d_i_track_html_ac7782fecb402fdd2d4e0df24fafc26d7"><div class="ttname"><a href="class_m_i_d_i_track.html#ac7782fecb402fdd2d4e0df24fafc26d7">MIDITrack::DeleteNote</a></div><div class="ttdeci">bool DeleteNote(const MIDITimedMessage &amp;msg)</div><div class="ttdoc">Deletes a Note On and corresponding Note Off events from the track.</div></div>
<div class="ttc" id="aclass_m_i_d_i_track_html_af4385d451f08addbfe11440baeb49e68"><div class="ttname"><a href="class_m_i_d_i_track.html#af4385d451f08addbfe11440baeb49e68">MIDITrack::GetEvent</a></div><div class="ttdeci">MIDITimedMessage &amp; GetEvent(int ev_num)</div><div class="ttdoc">Returns a reference to an event in the track.</div><div class="ttdef"><b>Definition:</b> track.h:143</div></div>
<div class="ttc" id="aclass_m_i_d_i_track_html_afb3a453d6cd66ac4b8137e31a97f2983"><div class="ttname"><a href="class_m_i_d_i_track.html#afb3a453d6cd66ac4b8137e31a97f2983">MIDITrack::FindEventNumber</a></div><div class="ttdeci">bool FindEventNumber(const MIDITimedMessage &amp;msg, int *event_num, int mode=COMPMODE_EQUAL) const</div><div class="ttdoc">Finds an event in the track matching a given event.</div></div>
<div class="ttc" id="agroup___g_l_o_b_a_l_s_html_ga1f54d7f8d2631dc21e78751494337221"><div class="ttname"><a href="group___g_l_o_b_a_l_s.html#ga1f54d7f8d2631dc21e78751494337221">MIDIClockTime</a></div><div class="ttdeci">unsigned long MIDIClockTime</div><div class="ttdoc">The type of a variable which can hold a time in MIDI ticks.</div><div class="ttdef"><b>Definition:</b> midi.h:40</div></div>
<div class="ttc" id="agroup___g_l_o_b_a_l_s_html_ga5992348e94d8fd82fd19323f27e6172c"><div class="ttname"><a href="group___g_l_o_b_a_l_s.html#ga5992348e94d8fd82fd19323f27e6172c">WriteMIDIFile</a></div><div class="ttdeci">bool WriteMIDIFile(const char *filename, int format, const MIDIMultiTrack *tracks, bool strip=false)</div><div class="ttdoc">Writes the given MIDIMultiTrack object into a MIDI file.</div></div>
<div class="ttc" id="agroup___g_l_o_b_a_l_s_html_gga80155586fa275b28773c9b203f52cabaa083d39b26bd9a8ca3e54d122fbba0def"><div class="ttname"><a href="group___g_l_o_b_a_l_s.html#gga80155586fa275b28773c9b203f52cabaa083d39b26bd9a8ca3e54d122fbba0def">COMPMODE_SAMEKIND</a></div><div class="ttdeci">@ COMPMODE_SAMEKIND</div><div class="ttdoc">the method searches for an event matching the MIDITimedMessage::IsSameKind() method.</div><div class="ttdef"><b>Definition:</b> track.h:67</div></div>
<div class="ttc" id="agroup___m_i_d_i_e_n_u_m_html_gga0b4386aa3f982099692c169c65950188a8fba91fad9f7853a2e0b24c37e84a01e"><div class="ttname"><a href="group___m_i_d_i_e_n_u_m.html#gga0b4386aa3f982099692c169c65950188a8fba91fad9f7853a2e0b24c37e84a01e">C_MAIN_VOLUME</a></div><div class="ttdeci">@ C_MAIN_VOLUME</div><div class="ttdoc">main volume control</div><div class="ttdef"><b>Definition:</b> midi.h:143</div></div>
<div class="ttc" id="agroup___m_i_d_i_e_n_u_m_html_gga0b4386aa3f982099692c169c65950188ac4cd2a43f5367521bac8bd8550278820"><div class="ttname"><a href="group___m_i_d_i_e_n_u_m.html#gga0b4386aa3f982099692c169c65950188ac4cd2a43f5367521bac8bd8550278820">C_PAN</a></div><div class="ttdeci">@ C_PAN</div><div class="ttdoc">panpot stereo control</div><div class="ttdef"><b>Definition:</b> midi.h:145</div></div>
</div><!-- fragment --> </div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.2 </li>
  </ul>
</div>
</body>
</html>
